<?xml version="1.0" encoding="UTF-8" standalone="yes"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yandex="http://news.yandex.ru" xmlns:turbo="http://turbo.yandex.ru"><channel><title>sql / Library Online</title><link>https://lib.onl/ru/tags/sql/</link><description>Заметки на тему администрирования и разработки различных систем, приложений и серверов.</description><language>ru-RU</language><sy:updatePeriod>weekly</sy:updatePeriod><sy:updateFrequency>1</sy:updateFrequency><image><link>https://lib.onl/ru/tags/sql/</link><url>https://lib.onl/favicon-128.png</url><width>128</width><height>128</height><title>sql / Library Online</title><description>Заметки на тему администрирования и разработки различных систем, приложений и серверов.</description></image><lastBuildDate>Mon, 16 Oct 2023 23:59:21 +0000</lastBuildDate><atom:link href="https://lib.onl/ru/tags/sql/index.xml" rel="self" type="application/rss+xml"/><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>SQL запросы IP.Board 2.3</title><link>https://lib.onl/ru/posts/2023/10/54d4e488-9a8f-55ed-8fea-c77d4dba0720/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2023/10/54d4e488-9a8f-55ed-8fea-c77d4dba0720/</guid><description>Запросы для базы дынных IP.Board 2.3. Информация со старых проектов. Пригодится.</description><media:content medium="image" url="https://images.unsplash.com/photo-1662026911591-335639b11db6" width="1600" height="900"/><content:encoded><![CDATA[<p>Запросы для базы дынных <strong>IP.Board 2.3</strong>. Информация со старых проектов. Пригодится.</p>
<h2 id="sql-запросы">
  <a class="link-body-emphasis" href="#sql-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d1%8b">SQL запросы</a>
</h2><ol>
<li>Заменить определённый текст во всех сообщениях на форуме.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-822162f0f85e153b985d21a632047ba4"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">post</span><span class="p">,</span><span class="s1">&#39;старый текст&#39;</span><span class="p">,</span><span class="s1">&#39;новый текст&#39;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-822162f0f85e153b985d21a632047ba4"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Заменить текст во всех описаниях форумов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-51e1d371e4209648fb3498a1ce144571"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_forums</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="s1">&#39;старый текст&#39;</span><span class="p">,</span><span class="s1">&#39;новый текст&#39;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-51e1d371e4209648fb3498a1ce144571"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="3">
<li>Очистка журнала предупреждений конкретного пользователя, где X - вставить id пользователя, чей журнал вы хотите очистить.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-5d93b84eaef35c4bbed817cfdc0d058e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_warn_logs</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">wlog_mid</span><span class="o">=</span><span class="n">X</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5d93b84eaef35c4bbed817cfdc0d058e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="4">
<li>Удалить подписи у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-4669fc9453fe2fcd732e61f8afcd8e3f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">signature</span><span class="o">=</span><span class="s1">&#39;Ваша подпись удалена&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4669fc9453fe2fcd732e61f8afcd8e3f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="5">
<li>Удаление модераторов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c7185ea9fea76ac8fe0c39c94e2bb19e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_moderators</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c7185ea9fea76ac8fe0c39c94e2bb19e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="6">
<li>Удаление модератора из всех форумов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-38ffea4802ba19febfad94d015f285a0"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_moderators</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">member_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XX</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-38ffea4802ba19febfad94d015f285a0"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="7">
<li>Удаление модератора из определённых форумов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9fd41226664473fa8285a4cb04e6e623"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_moderators</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">member_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XX</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">forum_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9fd41226664473fa8285a4cb04e6e623"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="8">
<li>Удаление аватаров у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3efd65c12f8a33f9ce871c9ec6659c90"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">avatar_location</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">avatar_size</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3efd65c12f8a33f9ce871c9ec6659c90"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="9">
<li>Если не работает, то выполните следующие два запроса:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-4f526d7151cc87a12759d745a6b5a131"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">avatar_location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4f526d7151cc87a12759d745a6b5a131"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-22bb32723dab7194afa83d80d8e297a5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">avatar_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-22bb32723dab7194afa83d80d8e297a5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="10">
<li>Массовый перенос пользователей c определённым количеством сообщений из одной группы в другую.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-e7769236d356876c75bc2e6aea057bdd"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="err">Б</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="err">А</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-e7769236d356876c75bc2e6aea057bdd"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="11">
<li>Удалить пользователей определенной группы, где b меняете на номер группы.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-2fe7542118ebdf0620fdefab1f6d1c16"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2fe7542118ebdf0620fdefab1f6d1c16"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="12">
<li>Удалить все ICQ номера пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0fc39ea109d564ef17fcc37c20fc9246"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">icq_number</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0fc39ea109d564ef17fcc37c20fc9246"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="13">
<li>Удалить ссылки на сайт у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-f0c5ede8e62210b34ce93b6e4825532c"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">website</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f0c5ede8e62210b34ce93b6e4825532c"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="14">
<li>Снятие обязательного подтверждения модератором.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a1159367a58a978dc2cff5793d6d1f00"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">mod_posts</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a1159367a58a978dc2cff5793d6d1f00"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="15">
<li>Снятие только чтение/read_only.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0933cd5d8ce0000ecb0ad0e1ac6722a5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">restrict_post</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0933cd5d8ce0000ecb0ad0e1ac6722a5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="16">
<li>Очистка журнала.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-96deac06044c117f448602e553728f9e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_warn_logs</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">wlog_mid</span><span class="o">=</span><span class="n">id_пользователя</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-96deac06044c117f448602e553728f9e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="17">
<li>Удаление всех установленных смайликов, то есть они переходят в список неустановленных смайликов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ef0faea476d1405185079dd7c33e1b77"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_emoticons</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ef0faea476d1405185079dd7c33e1b77"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="18">
<li>Установка кодировки и сравнения БД по умолчанию.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-d74ace550b817bef36d6b467b2e11945"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="o">`</span><span class="err">название</span><span class="n">_бд</span><span class="o">`</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">cp1251</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">cp1251_general_ci</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d74ace550b817bef36d6b467b2e11945"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="19">
<li>Аннулируем счётчик сообщений у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9eb0e815b9c6c2c6218e96e5e23b76e8"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">posts</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9eb0e815b9c6c2c6218e96e5e23b76e8"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="20">
<li>Аннулируем счётчик сообщений у определённых групп.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b67f30dd3699127d04ae7f1e6cff282e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">posts</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="s1">&#39;номер_группы&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b67f30dd3699127d04ae7f1e6cff282e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="21">
<li>Удаление всех сообщений оставленных гостями.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-466abe0093c59572c266a6443c670744"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">author_id</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-466abe0093c59572c266a6443c670744"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="22">
<li>Заменить текст во всех описаниях тем.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-d3029ba890c865e7a6b4fb2a41612401"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_topics</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="s1">&#39;старый текст&#39;</span><span class="p">,</span><span class="s1">&#39;новый текст&#39;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d3029ba890c865e7a6b4fb2a41612401"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="благодарности">
  <a class="link-body-emphasis" href="#%d0%b1%d0%bb%d0%b0%d0%b3%d0%be%d0%b4%d0%b0%d1%80%d0%bd%d0%be%d1%81%d1%82%d0%b8">Благодарности</a>
</h2><p>В составлении запросов благодарим следующих участников конференции:</p>
<ul>
<li>Mazafuka</li>
<li>КиКиМоРа</li>
<li>a_aqua</li>
<li>Ritsuka</li>
<li>Security</li>
<li>truth</li>
</ul>]]></content:encoded><turbo:source/><turbo:topic>SQL запросы IP.Board 2.3</turbo:topic><turbo:content><![CDATA[<p>Запросы для базы дынных <strong>IP.Board 2.3</strong>. Информация со старых проектов. Пригодится.</p>
<h2 id="sql-запросы">
  <a class="link-body-emphasis" href="#sql-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d1%8b">SQL запросы</a>
</h2><ol>
<li>Заменить определённый текст во всех сообщениях на форуме.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-822162f0f85e153b985d21a632047ba4"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">post</span><span class="p">,</span><span class="s1">&#39;старый текст&#39;</span><span class="p">,</span><span class="s1">&#39;новый текст&#39;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-822162f0f85e153b985d21a632047ba4"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Заменить текст во всех описаниях форумов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-51e1d371e4209648fb3498a1ce144571"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_forums</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="s1">&#39;старый текст&#39;</span><span class="p">,</span><span class="s1">&#39;новый текст&#39;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-51e1d371e4209648fb3498a1ce144571"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="3">
<li>Очистка журнала предупреждений конкретного пользователя, где X - вставить id пользователя, чей журнал вы хотите очистить.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-5d93b84eaef35c4bbed817cfdc0d058e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_warn_logs</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">wlog_mid</span><span class="o">=</span><span class="n">X</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5d93b84eaef35c4bbed817cfdc0d058e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="4">
<li>Удалить подписи у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-4669fc9453fe2fcd732e61f8afcd8e3f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">signature</span><span class="o">=</span><span class="s1">&#39;Ваша подпись удалена&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4669fc9453fe2fcd732e61f8afcd8e3f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="5">
<li>Удаление модераторов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c7185ea9fea76ac8fe0c39c94e2bb19e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_moderators</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c7185ea9fea76ac8fe0c39c94e2bb19e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="6">
<li>Удаление модератора из всех форумов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-38ffea4802ba19febfad94d015f285a0"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_moderators</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">member_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XX</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-38ffea4802ba19febfad94d015f285a0"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="7">
<li>Удаление модератора из определённых форумов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9fd41226664473fa8285a4cb04e6e623"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_moderators</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">member_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">XX</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">forum_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9fd41226664473fa8285a4cb04e6e623"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="8">
<li>Удаление аватаров у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3efd65c12f8a33f9ce871c9ec6659c90"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">avatar_location</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">avatar_size</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3efd65c12f8a33f9ce871c9ec6659c90"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="9">
<li>Если не работает, то выполните следующие два запроса:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-4f526d7151cc87a12759d745a6b5a131"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">avatar_location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4f526d7151cc87a12759d745a6b5a131"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-22bb32723dab7194afa83d80d8e297a5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">avatar_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-22bb32723dab7194afa83d80d8e297a5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="10">
<li>Массовый перенос пользователей c определённым количеством сообщений из одной группы в другую.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-e7769236d356876c75bc2e6aea057bdd"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="err">Б</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="err">А</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-e7769236d356876c75bc2e6aea057bdd"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="11">
<li>Удалить пользователей определенной группы, где b меняете на номер группы.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-2fe7542118ebdf0620fdefab1f6d1c16"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2fe7542118ebdf0620fdefab1f6d1c16"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="12">
<li>Удалить все ICQ номера пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0fc39ea109d564ef17fcc37c20fc9246"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">icq_number</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0fc39ea109d564ef17fcc37c20fc9246"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="13">
<li>Удалить ссылки на сайт у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-f0c5ede8e62210b34ce93b6e4825532c"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_member_extra</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">website</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f0c5ede8e62210b34ce93b6e4825532c"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="14">
<li>Снятие обязательного подтверждения модератором.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a1159367a58a978dc2cff5793d6d1f00"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">mod_posts</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a1159367a58a978dc2cff5793d6d1f00"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="15">
<li>Снятие только чтение/read_only.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0933cd5d8ce0000ecb0ad0e1ac6722a5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">restrict_post</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0933cd5d8ce0000ecb0ad0e1ac6722a5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="16">
<li>Очистка журнала.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-96deac06044c117f448602e553728f9e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_warn_logs</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">wlog_mid</span><span class="o">=</span><span class="n">id_пользователя</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-96deac06044c117f448602e553728f9e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="17">
<li>Удаление всех установленных смайликов, то есть они переходят в список неустановленных смайликов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ef0faea476d1405185079dd7c33e1b77"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_emoticons</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ef0faea476d1405185079dd7c33e1b77"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="18">
<li>Установка кодировки и сравнения БД по умолчанию.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-d74ace550b817bef36d6b467b2e11945"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">ALTER</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="o">`</span><span class="err">название</span><span class="n">_бд</span><span class="o">`</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="nb">CHARACTER</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">cp1251</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">cp1251_general_ci</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d74ace550b817bef36d6b467b2e11945"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="19">
<li>Аннулируем счётчик сообщений у всех пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9eb0e815b9c6c2c6218e96e5e23b76e8"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">posts</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9eb0e815b9c6c2c6218e96e5e23b76e8"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="20">
<li>Аннулируем счётчик сообщений у определённых групп.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b67f30dd3699127d04ae7f1e6cff282e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">posts</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">mgroup</span><span class="o">=</span><span class="s1">&#39;номер_группы&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b67f30dd3699127d04ae7f1e6cff282e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="21">
<li>Удаление всех сообщений оставленных гостями.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-466abe0093c59572c266a6443c670744"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">author_id</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-466abe0093c59572c266a6443c670744"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="22">
<li>Заменить текст во всех описаниях тем.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-d3029ba890c865e7a6b4fb2a41612401"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_topics</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">description</span><span class="p">,</span><span class="s1">&#39;старый текст&#39;</span><span class="p">,</span><span class="s1">&#39;новый текст&#39;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d3029ba890c865e7a6b4fb2a41612401"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="благодарности">
  <a class="link-body-emphasis" href="#%d0%b1%d0%bb%d0%b0%d0%b3%d0%be%d0%b4%d0%b0%d1%80%d0%bd%d0%be%d1%81%d1%82%d0%b8">Благодарности</a>
</h2><p>В составлении запросов благодарим следующих участников конференции:</p>
<ul>
<li>Mazafuka</li>
<li>КиКиМоРа</li>
<li>a_aqua</li>
<li>Ritsuka</li>
<li>Security</li>
<li>truth</li>
</ul>]]></turbo:content><pubDate>Mon, 16 Oct 2023 23:59:21 +0000</pubDate><category>CMF</category><category>В истории</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>SQL запросы IP.Board 3.x</title><link>https://lib.onl/ru/posts/2023/10/06c9d359-31f0-5862-a342-62a21d4eb032/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2023/10/06c9d359-31f0-5862-a342-62a21d4eb032/</guid><description>Запросы для базы дынных IP.Board 3. Информация со старых проектов. Пригодится.</description><media:content medium="image" url="https://images.unsplash.com/photo-1662026911591-335639b11db6" width="1600" height="900"/><content:encoded><![CDATA[<p>Запросы для базы дынных <strong>IP.Board 3</strong>. Информация со старых проектов. Пригодится.</p>
<h2 id="sql-запросы">
  <a class="link-body-emphasis" href="#sql-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d1%8b">SQL запросы</a>
</h2><ol>
<li>Удалить всех модераторов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3d9f00d13c4daa527b08934219babfcf"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">moderators</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3d9f00d13c4daa527b08934219babfcf"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Удалить все подписи.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-65d96ff6e46e793de6e767b60043e6a2"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">content_cache_sigs</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-65d96ff6e46e793de6e767b60043e6a2"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ab6cc233377cc2cc4bdf487134df9aa3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">profile_portal</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">signature</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ab6cc233377cc2cc4bdf487134df9aa3"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="3">
<li>Массовый перенос пользователей c определённым количеством сообщений из одной группы в другую.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b36bd142851e55e8fb36d28094488870"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">member_group_id</span><span class="o">=</span><span class="err">Б</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">member_group_id</span><span class="o">=</span><span class="err">А</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b36bd142851e55e8fb36d28094488870"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="4">
<li>Полный пересчет репутации сообщений и пользователей после ручной правки <code>ibf_reputation_index</code>.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ef3974bfb78b6366e5020f8b9e2c1048"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">TRUNCATE</span><span class="w"> </span><span class="n">ibf_reputation_cache</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ef3974bfb78b6366e5020f8b9e2c1048"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-5a774f244c2fdbe5502765246fffd2e9"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">ibf_reputation_cache</span><span class="w"> </span><span class="p">(</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="p">,</span><span class="w"> </span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="n">rep_points</span><span class="p">)</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="p">,</span><span class="w"> </span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">rep_rating</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_reputation_index</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">type_id</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5a774f244c2fdbe5502765246fffd2e9"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-21d6e10be4f4e9319a2fa3b431ad12fe"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_profile_portal</span><span class="w"> </span><span class="n">pp</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">pp</span><span class="p">.</span><span class="n">pp_reputation_points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">rep_points</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">ibf_reputation_cache</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pid</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">author_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pp</span><span class="p">.</span><span class="n">pp_member_id</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-21d6e10be4f4e9319a2fa3b431ad12fe"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="5">
<li>Удаление или замена ненужного мусора из сообщений, например, куски от старых BBCODE.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-203575dcc5a809145491614dc8dd8708"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">post</span><span class="p">,</span><span class="s2">&#34;original&#34;</span><span class="p">,</span><span class="s2">&#34;replace&#34;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-203575dcc5a809145491614dc8dd8708"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="6">
<li>Удаление или замена информации из подписей пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-61f41db3c103e5e0f17ba2ad3e006ef5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_profile_portal</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="s2">&#34;original&#34;</span><span class="p">,</span><span class="s2">&#34;replace&#34;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-61f41db3c103e5e0f17ba2ad3e006ef5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="благодарности">
  <a class="link-body-emphasis" href="#%d0%b1%d0%bb%d0%b0%d0%b3%d0%be%d0%b4%d0%b0%d1%80%d0%bd%d0%be%d1%81%d1%82%d0%b8">Благодарности</a>
</h2><p>В составлении запросов благодарим следующих участников конференции:</p>
<ul>
<li>Mazafuka</li>
<li>КиКиМоРа</li>
<li>a_aqua</li>
<li>Ritsuka</li>
<li>Security</li>
<li>truth</li>
</ul>]]></content:encoded><turbo:source/><turbo:topic>SQL запросы IP.Board 3.x</turbo:topic><turbo:content><![CDATA[<p>Запросы для базы дынных <strong>IP.Board 3</strong>. Информация со старых проектов. Пригодится.</p>
<h2 id="sql-запросы">
  <a class="link-body-emphasis" href="#sql-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d1%8b">SQL запросы</a>
</h2><ol>
<li>Удалить всех модераторов.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3d9f00d13c4daa527b08934219babfcf"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">moderators</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3d9f00d13c4daa527b08934219babfcf"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Удалить все подписи.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-65d96ff6e46e793de6e767b60043e6a2"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">content_cache_sigs</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-65d96ff6e46e793de6e767b60043e6a2"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ab6cc233377cc2cc4bdf487134df9aa3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">profile_portal</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">signature</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ab6cc233377cc2cc4bdf487134df9aa3"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="3">
<li>Массовый перенос пользователей c определённым количеством сообщений из одной группы в другую.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b36bd142851e55e8fb36d28094488870"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">members</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">member_group_id</span><span class="o">=</span><span class="err">Б</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">member_group_id</span><span class="o">=</span><span class="err">А</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">posts</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b36bd142851e55e8fb36d28094488870"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="4">
<li>Полный пересчет репутации сообщений и пользователей после ручной правки <code>ibf_reputation_index</code>.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ef3974bfb78b6366e5020f8b9e2c1048"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">TRUNCATE</span><span class="w"> </span><span class="n">ibf_reputation_cache</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ef3974bfb78b6366e5020f8b9e2c1048"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-5a774f244c2fdbe5502765246fffd2e9"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">ibf_reputation_cache</span><span class="w"> </span><span class="p">(</span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="p">,</span><span class="w"> </span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="n">rep_points</span><span class="p">)</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="p">,</span><span class="w"> </span><span class="n">type_id</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">rep_rating</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_reputation_index</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">type_id</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5a774f244c2fdbe5502765246fffd2e9"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-21d6e10be4f4e9319a2fa3b431ad12fe"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_profile_portal</span><span class="w"> </span><span class="n">pp</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">pp</span><span class="p">.</span><span class="n">pp_reputation_points</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">rep_points</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">ibf_reputation_cache</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">type_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">pid</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">author_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pp</span><span class="p">.</span><span class="n">pp_member_id</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-21d6e10be4f4e9319a2fa3b431ad12fe"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="5">
<li>Удаление или замена ненужного мусора из сообщений, например, куски от старых BBCODE.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-203575dcc5a809145491614dc8dd8708"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_posts</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">post</span><span class="p">,</span><span class="s2">&#34;original&#34;</span><span class="p">,</span><span class="s2">&#34;replace&#34;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-203575dcc5a809145491614dc8dd8708"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="6">
<li>Удаление или замена информации из подписей пользователей.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sql">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-61f41db3c103e5e0f17ba2ad3e006ef5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ibf_profile_portal</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">signature</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">REPLACE</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="s2">&#34;original&#34;</span><span class="p">,</span><span class="s2">&#34;replace&#34;</span><span class="p">);</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-61f41db3c103e5e0f17ba2ad3e006ef5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="благодарности">
  <a class="link-body-emphasis" href="#%d0%b1%d0%bb%d0%b0%d0%b3%d0%be%d0%b4%d0%b0%d1%80%d0%bd%d0%be%d1%81%d1%82%d0%b8">Благодарности</a>
</h2><p>В составлении запросов благодарим следующих участников конференции:</p>
<ul>
<li>Mazafuka</li>
<li>КиКиМоРа</li>
<li>a_aqua</li>
<li>Ritsuka</li>
<li>Security</li>
<li>truth</li>
</ul>]]></turbo:content><pubDate>Mon, 16 Oct 2023 23:55:00 +0000</pubDate><category>CMF</category><category>В истории</category></item></channel></rss>