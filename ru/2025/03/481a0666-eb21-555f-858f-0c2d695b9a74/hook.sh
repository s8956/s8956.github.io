#!/usr/bin/env -S bash -eu
# -------------------------------------------------------------------------------------------------------------------- #
# ACME: HOOK
# -------------------------------------------------------------------------------------------------------------------- #
# @package    Bash
# @author     Kai Kimera
# @license    MIT
# @version    0.1.0
# @link       https://lib.onl/ru/2025/03/481a0666-eb21-555f-858f-0c2d695b9a74/
# -------------------------------------------------------------------------------------------------------------------- #

SERVICES=(
  'angie.service'
  'apache2.service'
  'nginx.service'
  'postfix@-.service'
)

# -------------------------------------------------------------------------------------------------------------------- #
# SERVICE RELOADING
# -------------------------------------------------------------------------------------------------------------------- #

_if_service() {
  local s; s="${1}"
  systemctl list-units --type='service' --state='running' | grep -Fq "${s}" && return 0 || return 1
}

for s in "${SERVICES[@]}"; do
  _if_service "${s}" && systemctl reload "${s}"
done; exit 0
