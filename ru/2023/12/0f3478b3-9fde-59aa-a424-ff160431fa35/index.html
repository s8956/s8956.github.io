<!doctype html><html class=h-100 dir=ltr lang=ru-RU data-bs-theme=auto prefix="og: http://ogp.me/ns#
      article: http://ogp.me/ns/article#
      profile: http://ogp.me/ns/profile#
      fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>MikroTik: Базовая настройка / Library Online</title>
<meta name=title content="MikroTik: Базовая настройка / Library Online"><meta name=description content="После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа."><meta name=keywords content="mikrotik,routeros"><link rel=preconnect href=https://gravatar.com crossorigin=anonymous><link rel=preconnect href=https://images.unsplash.com crossorigin=anonymous><script src=/js/theme.min.5f10d03721145ce818261015067fd92d71c874ab15bf49889ca53b1cf0c73c18.js integrity="sha256-XxDQNyEUXOgYJhAVBn/ZLXHIdKsVv0mInKU7HPDHPBg=" crossorigin=anonymous></script><link rel=preload href=/css/vendor.bundle.min.css as=style><link rel=stylesheet href=/css/vendor.bundle.min.css><link rel=preload href=/ru/css/system.bundle.min.css as=style><link rel=stylesheet href=/ru/css/system.bundle.min.css><link rel=icon type=image/png sizes=16x16 href=https://lib.onl/favicon-16.png><link rel="shortcut icon" type=image/png sizes=16x16 href=https://lib.onl/favicon-16.png><link rel=apple-touch-icon sizes=16x16 href=https://lib.onl/favicon-16.png><link rel=icon type=image/png sizes=24x24 href=https://lib.onl/favicon-24.png><link rel="shortcut icon" type=image/png sizes=24x24 href=https://lib.onl/favicon-24.png><link rel=apple-touch-icon sizes=24x24 href=https://lib.onl/favicon-24.png><link rel=icon type=image/png sizes=32x32 href=https://lib.onl/favicon-32.png><link rel="shortcut icon" type=image/png sizes=32x32 href=https://lib.onl/favicon-32.png><link rel=apple-touch-icon sizes=32x32 href=https://lib.onl/favicon-32.png><link rel=icon type=image/png sizes=48x48 href=https://lib.onl/favicon-48.png><link rel="shortcut icon" type=image/png sizes=48x48 href=https://lib.onl/favicon-48.png><link rel=apple-touch-icon sizes=48x48 href=https://lib.onl/favicon-48.png><link rel=icon type=image/png sizes=64x64 href=https://lib.onl/favicon-64.png><link rel="shortcut icon" type=image/png sizes=64x64 href=https://lib.onl/favicon-64.png><link rel=apple-touch-icon sizes=64x64 href=https://lib.onl/favicon-64.png><link rel=icon type=image/png sizes=72x72 href=https://lib.onl/favicon-72.png><link rel="shortcut icon" type=image/png sizes=72x72 href=https://lib.onl/favicon-72.png><link rel=apple-touch-icon sizes=72x72 href=https://lib.onl/favicon-72.png><link rel=icon type=image/png sizes=80x80 href=https://lib.onl/favicon-80.png><link rel="shortcut icon" type=image/png sizes=80x80 href=https://lib.onl/favicon-80.png><link rel=apple-touch-icon sizes=80x80 href=https://lib.onl/favicon-80.png><link rel=icon type=image/png sizes=96x96 href=https://lib.onl/favicon-96.png><link rel="shortcut icon" type=image/png sizes=96x96 href=https://lib.onl/favicon-96.png><link rel=apple-touch-icon sizes=96x96 href=https://lib.onl/favicon-96.png><link rel=icon type=image/png sizes=128x128 href=https://lib.onl/favicon-128.png><link rel="shortcut icon" type=image/png sizes=128x128 href=https://lib.onl/favicon-128.png><link rel=apple-touch-icon sizes=128x128 href=https://lib.onl/favicon-128.png><link rel=icon type=image/png sizes=144x144 href=https://lib.onl/favicon-144.png><link rel="shortcut icon" type=image/png sizes=144x144 href=https://lib.onl/favicon-144.png><link rel=apple-touch-icon sizes=144x144 href=https://lib.onl/favicon-144.png><link rel=icon type=image/png sizes=152x152 href=https://lib.onl/favicon-152.png><link rel="shortcut icon" type=image/png sizes=152x152 href=https://lib.onl/favicon-152.png><link rel=apple-touch-icon sizes=152x152 href=https://lib.onl/favicon-152.png><link rel=icon type=image/png sizes=167x167 href=https://lib.onl/favicon-167.png><link rel="shortcut icon" type=image/png sizes=167x167 href=https://lib.onl/favicon-167.png><link rel=apple-touch-icon sizes=167x167 href=https://lib.onl/favicon-167.png><link rel=icon type=image/png sizes=180x180 href=https://lib.onl/favicon-180.png><link rel="shortcut icon" type=image/png sizes=180x180 href=https://lib.onl/favicon-180.png><link rel=apple-touch-icon sizes=180x180 href=https://lib.onl/favicon-180.png><link rel=icon type=image/png sizes=192x192 href=https://lib.onl/favicon-192.png><link rel="shortcut icon" type=image/png sizes=192x192 href=https://lib.onl/favicon-192.png><link rel=apple-touch-icon sizes=192x192 href=https://lib.onl/favicon-192.png><link rel=icon type=image/png sizes=196x196 href=https://lib.onl/favicon-196.png><link rel="shortcut icon" type=image/png sizes=196x196 href=https://lib.onl/favicon-196.png><link rel=apple-touch-icon sizes=196x196 href=https://lib.onl/favicon-196.png><link rel=icon type=image/png sizes=256x256 href=https://lib.onl/favicon-256.png><link rel="shortcut icon" type=image/png sizes=256x256 href=https://lib.onl/favicon-256.png><link rel=apple-touch-icon sizes=256x256 href=https://lib.onl/favicon-256.png><link rel=icon type=image/png sizes=300x300 href=https://lib.onl/favicon-300.png><link rel="shortcut icon" type=image/png sizes=300x300 href=https://lib.onl/favicon-300.png><link rel=apple-touch-icon sizes=300x300 href=https://lib.onl/favicon-300.png><link rel=icon type=image/png sizes=512x512 href=https://lib.onl/favicon-512.png><link rel="shortcut icon" type=image/png sizes=512x512 href=https://lib.onl/favicon-512.png><link rel=apple-touch-icon sizes=512x512 href=https://lib.onl/favicon-512.png><link rel=icon type=image/svg+xml sizes=any href=https://lib.onl/favicon.svg><link rel="shortcut icon" type=image/x-icon href=https://lib.onl/favicon.ico><link rel="shortcut icon" type=image/vnd.microsoft.icon href=https://lib.onl/favicon.ico><link rel=canonical href=https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/><link rel=alternate href=https://lib.onl/ hreflang=x-default><link rel=alternate href=https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/ hreflang=ru><link rel=manifest type=application/manifest+json href=https://lib.onl/ru/manifest.json title="Library Online"><link rel=search type=application/opensearchdescription+xml href=https://lib.onl/ru/opensearch.xml title="Library Online"><link rel=alternate type=application/json href=https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/index.json title="Library Online"><meta name=application-name content="Library Online"><meta name=theme-color content="#f8f9fa" media="(prefers-color-scheme: light)"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1520869562399-e772f042f422"><meta name=twitter:title content="MikroTik: Базовая настройка"><meta name=twitter:description content="После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа."><meta property="og:url" content="https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/"><meta property="og:site_name" content="Library Online"><meta property="og:title" content="MikroTik: Базовая настройка"><meta property="og:description" content="После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа."><meta property="og:locale" content="ru_RU"><meta property="og:type" content="article"><meta property="article:section" content="articles"><meta property="article:published_time" content="2024-04-18T16:28:00+03:00"><meta property="article:modified_time" content="2024-04-18T16:28:00+03:00"><meta property="article:tag" content="Mikrotik"><meta property="article:tag" content="Routeros"><meta property="og:image" content="https://images.unsplash.com/photo-1520869562399-e772f042f422"><meta property="twitter:domain" content="lib.onl"><meta property="twitter:url" content="https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/"><meta property="og:locale" content="ru_RU"><meta property="og:site_name" content="Library Online"><meta name=aiturec:title content="MikroTik: Базовая настройка"><meta property="aiturec:description" content="После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа."><meta property="aiturec:item_id" content="0f3478b3-9fde-59aa-a424-ff160431fa35"><meta property="aiturec:datetime" content="2023-12-20T06:53:34Z"><meta property="aiturec:image" content="https://images.unsplash.com/photo-1520869562399-e772f042f422"><meta property="vk:image" content="https://images.unsplash.com/photo-1520869562399-e772f042f422"><meta property="article:author" content="Kai Kimera"><meta property="article:tag" content="mikrotik"><meta property="article:tag" content="routeros"><meta name=DC.Title content="MikroTik: Базовая настройка"><meta name=DC.Subject content="После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа."><meta name=DC.Description content="После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа."><meta name=DC.Type content="Text"><meta name=DC.Source content="https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/"><meta name=DC.Relation content="https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/"><meta name=DC.Coverage content="World"><meta name=DC.Creator content="Library Online"><meta name=DC.Publisher content="Library Online"><meta name=DC.Contributor content="Library Online"><meta name=DC.Rights content="Library Online"><meta name=DC.Format content="Digital"><meta name=DC.Identifier content="https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/"><meta name=DC.Language content="ru-RU"><meta name=DC.Provenance content="Library Online"><meta name=DC.RightsHolder content="Library Online"><meta name=DC.AccrualPeriodicity content="Weekly"><meta name=DC.AccrualPolicy content="Active"></head><body class="d-flex flex-column h-100 is-page type-articles"><header id=site-header><nav class="navbar navbar-expand-lg navbar-light fixed-top border-bottom shadow-sm text-lg-center bg-body-tertiary"><div class=container-fluid><a class=navbar-brand href=/ru/><img src=https://lib.onl/img/logo.min.svg alt=Логотип width=30 height=24 class="d-inline-block align-text-top"><h2 class="d-inline-block h5 m-0 ms-1">Library Online</h2></a><button type=button class=navbar-toggler data-bs-toggle=collapse data-bs-target=#navTopBar aria-controls=navTopBar aria-expanded=false aria-label='Переключить навигацию'>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navTopBar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/ru/articles/><i class="fas fa-file-lines fa-fw"></i>
<span>Статьи</span></a></li><li class=nav-item><a class=nav-link href=/ru/faq/><i class="fas fa-circle-question fa-fw"></i>
<span>Q&amp;A</span></a></li><li class=nav-item><a class=nav-link href=/ru/archive/><i class="fas fa-archive fa-fw"></i>
<span>Архив</span></a></li><li class=nav-item><a class=nav-link href=/ru/about/><i class="fas fa-info-circle fa-fw"></i>
<span>О проекте</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-list fa-fw"></i>
<span>META</span></a><ul class="dropdown-menu shadow"><li><a class=dropdown-item href=/ru/authors/><i class="fas fa-user-circle fa-fw"></i>
<span>Авторы</span></a></li><li><a class=dropdown-item href=/ru/categories/><i class="fas fa-folder-open fa-fw"></i>
<span>Категории</span></a></li><li><a class=dropdown-item href=/ru/tags/><i class="fas fa-tags fa-fw"></i>
<span>Теги</span></a></li></ul></li></ul><ul class="navbar-nav ms-auto"><li class=nav-item><a class="nav-link d-lg-none" href=# data-bs-toggle=modal data-bs-target=#search-modal aria-label=Поиск><i class="fas fa-search fa-fw"></i>
<span>Поиск</span>
</a><a title=Поиск class="nav-link d-none d-lg-block" href=# data-bs-toggle=modal data-bs-target=#search-modal aria-label=Поиск><i class="fas fa-search fa-fw"></i></a></li></ul></div></div></nav></header><main class="wrapper flex-shrink-0" id=site-main><div class="section py-3"><div class=container><nav style="--bs-breadcrumb-divider:'\2f '" class=small aria-label=breadcrumb><ol class="breadcrumb p-2 rounded bg-body-tertiary"><li class=breadcrumb-item><a href=/ru/ aria-label=Главная><i class="fas fa-home fa-fw"></i></a></li><li class=breadcrumb-item><a href=/ru/articles/ aria-label=Статьи>Статьи</a></li><li class="breadcrumb-item active">MikroTik: Базовая настройка</li></ol></nav><article><header><div class="node-cover mb-3"><a title="MikroTik: Базовая настройка" class="d-flex align-items-center rounded overflow-hidden bg-body-tertiary" href=/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/><picture><source srcset='https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1520869562399-e772f042f422?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="MikroTik: Базовая настройка" loading=lazy></picture></a></div><div class=node-title><h1 class=text-center>MikroTik: Базовая настройка</h1></div></header><footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><time datetime=2023-12-20T06:53:34Z data-fn=date-local>2023/12/20 06:53:34 UTC</time></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li></ul></footer><ul class="nav nav-tabs mb-3" id=node-tabs-91f7e21e5bfd10523e40218e0ce51d4f data-fn=node-tabs role=tablist><li class=nav-item role=presentation title=Главная><button class="nav-link active" id=tab-main-home type=button role=tab data-bs-toggle=tab data-bs-target=#tab-pane-main-home aria-controls=tab-pane-main-home aria-selected=true aria-label=Главная>
<i class="fas fa-home fa-fw"></i></button></li><li class=nav-item role=presentation title=Информация><button class=nav-link id=tab-main-info type=button role=tab data-bs-toggle=tab data-bs-target=#tab-pane-main-info aria-controls=tab-pane-main-info aria-selected=false aria-label=Информация>
<i class="fas fa-info fa-fw"></i></button></li><li class=nav-item role=presentation title=Комментарии><button class=nav-link id=tab-main-comments type=button role=tab data-bs-toggle=tab data-bs-target=#tab-pane-main-comments aria-controls=tab-pane-main-comments aria-selected=false aria-label=Комментарии>
<i class="far fa-comments fa-fw"></i></button></li><li class="nav-item ms-auto" role=presentation title=Поделиться><button class=nav-link id=tab-main-share type=button role=tab data-bs-toggle=tab data-bs-target=#tab-pane-main-share aria-controls=tab-pane-main-share aria-selected=false aria-label=Поделиться>
<i class="fas fa-share fa-fw"></i></button></li></ul><div class=tab-content><div class="tab-pane show active" id=tab-pane-main-home role=tabpanel aria-labelledby=tab-main-home tabindex=0><div class=node-body><div class="alert alert-warning d-flex align-items-center overflow-hidden node-body" id=alert-2cd008825365c87ed338cbf86431b176 role=alert><div class=flex-shrink-0><i class="fas fa-edit fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Информация на этой странице находится в доработке. Информация может добавляться (и / или) изменяться.</p></div></div><div class="node-toc mb-3"><div class=accordion id=accordion-toc-40fd92aa69dac0998c86a8dc19d3084e><div class=accordion-item><h2 class=accordion-header><a class="accordion-button collapsed" href=# role=button tabindex=0 data-bs-toggle=collapse data-bs-target=#collapse-toc-40fd92aa69dac0998c86a8dc19d3084e aria-expanded=false aria-controls=collapse-toc-40fd92aa69dac0998c86a8dc19d3084e aria-label=Содержание>Содержание</a></h2><div id=collapse-toc-40fd92aa69dac0998c86a8dc19d3084e class="accordion-collapse collapse"><div class=accordion-body><nav id=TableOfContents><ul><li><a href=#настройка-основного-роутера>Настройка основного роутера</a><ul><li><a href=#параметры-конфигурации>Параметры конфигурации</a></li><li><a href=#скрипт-конфигурации>Скрипт конфигурации</a></li></ul></li></ul></nav></div></div></div></div></div><p>После покупки <span class="shortcode shortcode-tag"><a href=/ru/tags/mikrotik/ target=_blank>#MikroTik</a></span> советуют обнулить все его настройки и начать конфигурацию с чистого листа.</p><p>Я написал небольший скрип для автоматизации действий по базовой настройки маршрутизатора. В скрипте есть параметры, которые необходимо предварительно настроить под себя.</p><h2 id=настройка-основного-роутера><a class=link-body-emphasis href=#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d0%be%d1%81%d0%bd%d0%be%d0%b2%d0%bd%d0%be%d0%b3%d0%be-%d1%80%d0%be%d1%83%d1%82%d0%b5%d1%80%d0%b0>Настройка основного роутера</a></h2><ul><li>Загрузить скрипт в память <span class="shortcode shortcode-tag"><a href=/ru/tags/mikrotik/ target=_blank>#MikroTik</a></span>, предварительно настроив параметры скрипта под себя.</li><li>Зайти в <strong>Terminal</strong> и выполнить следующую команду:</li></ul><div class="shortcode mb-3 shortcode-codeblock shortcode-codeblock-0
shortcode-codeblock-text"><div class="d-flex overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden bg-body-tertiary text-body" id=cp-113a89798abba789b054d1fb3b5ce982 data-bs-theme=dark><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/system reset-configuration no-defaults=yes skip-backup=yes run-after-reset=&#34;ros.router.rsc&#34;</span></span></code></pre></td></tr></table></div></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item title=Копировать><a class=text-body href=# data-fn=clipboard data-clipboard-target=#cp-113a89798abba789b054d1fb3b5ce982 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h3 id=параметры-конфигурации><a class=link-body-emphasis href=#%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d1%8b-%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d0%b8>Параметры конфигурации</a></h3><ul><li>Пароль администратора: <code>PassWord</code>.</li><li>Мост:<ul><li>Имя: <code>bridge1</code>.</li><li>Порты: <code>2-5</code>.</li></ul></li><li>Шлюз:<ul><li>Название: <code>GW1</code>.</li><li>IP: <code>10.1.0.1</code>.</li><li>Домен: <code>gw1.lan</code>.</li></ul></li><li>Подсеть:<ul><li>Маска: <code>10.1.0.0/16</code>.</li><li>Домен: <code>home.lan</code>.</li><li>Адресация DHCP: <code>10.1.200.1-10.1.200.254</code>.</li></ul></li><li>Порты:<ul><li>SSH: <code>22022</code>.</li><li>Winbox: <code>9090</code>.</li></ul></li></ul><h3 id=скрипт-конфигурации><a class=link-body-emphasis href=#%d1%81%d0%ba%d1%80%d0%b8%d0%bf%d1%82-%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d0%b8>Скрипт конфигурации</a></h3><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2 text-truncate"><code>mt.router.rsc</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item title=Копировать><a class=text-body href=# data-fn=clipboard data-clipboard-target=#cp-318753d88e3dacdbbc8e0a2f7cbab49a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item title=Скачать><a class=text-body href=/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/mt.router.rsc download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item title=Открыть><a class=text-body href=/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/mt.router.rsc target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0 overflow-auto" id=cp-318753d88e3dacdbbc8e0a2f7cbab49a><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span><span class=lnt>135
</span><span class=lnt>136
</span><span class=lnt>137
</span><span class=lnt>138
</span><span class=lnt>139
</span><span class=lnt>140
</span><span class=lnt>141
</span><span class=lnt>142
</span><span class=lnt>143
</span><span class=lnt>144
</span><span class=lnt>145
</span><span class=lnt>146
</span><span class=lnt>147
</span><span class=lnt>148
</span><span class=lnt>149
</span><span class=lnt>150
</span><span class=lnt>151
</span><span class=lnt>152
</span><span class=lnt>153
</span><span class=lnt>154
</span><span class=lnt>155
</span><span class=lnt>156
</span><span class=lnt>157
</span><span class=lnt>158
</span><span class=lnt>159
</span><span class=lnt>160
</span><span class=lnt>161
</span><span class=lnt>162
</span><span class=lnt>163
</span><span class=lnt>164
</span><span class=lnt>165
</span><span class=lnt>166
</span><span class=lnt>167
</span><span class=lnt>168
</span><span class=lnt>169
</span><span class=lnt>170
</span><span class=lnt>171
</span><span class=lnt>172
</span><span class=lnt>173
</span><span class=lnt>174
</span><span class=lnt>175
</span><span class=lnt>176
</span><span class=lnt>177
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl># @package    MikroTik / RouterOS
</span></span><span class=line><span class=cl># @author     Kai Kimera &lt;mail@kai.kim&gt;
</span></span><span class=line><span class=cl># @copyright  2023 Library Online
</span></span><span class=line><span class=cl># @license    MIT
</span></span><span class=line><span class=cl># @version    0.1.0
</span></span><span class=line><span class=cl># @link       https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/
</span></span><span class=line><span class=cl># -------------------------------------------------------------------------------------------------------------------- #
</span></span><span class=line><span class=cl># Set MAC:
</span></span><span class=line><span class=cl># /interface ethernet set [find default-name=&#34;ether1&#34;] mac-address=&#34;00:00:00:00:00:00&#34;
</span></span><span class=line><span class=cl># -------------------------------------------------------------------------------------------------------------------- #
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Administrator password.
</span></span><span class=line><span class=cl>:local rosAdminPassword &#34;PassWord&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Bridge.
</span></span><span class=line><span class=cl>:local rosBridgeName &#34;bridge1&#34;
</span></span><span class=line><span class=cl>:local rosBridgeMinPort 2
</span></span><span class=line><span class=cl>:local rosBridgeMaxPort 5
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Router name.
</span></span><span class=line><span class=cl>:local rosRouterName &#34;GW1&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Static gateway name.
</span></span><span class=line><span class=cl>:local rosGwDomain &#34;gw1.lan&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Network domain name.
</span></span><span class=line><span class=cl>:local rosNwDomain &#34;home.lan&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Port knocking.
</span></span><span class=line><span class=cl>:local rosIcmpKnockSize 100
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># -------------------------------------------------------------------------------------------------------------------- #
</span></span><span class=line><span class=cl># -----------------------------------------------------&lt; SCRIPT &gt;----------------------------------------------------- #
</span></span><span class=line><span class=cl># -------------------------------------------------------------------------------------------------------------------- #
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/interface bridge
</span></span><span class=line><span class=cl>add name=$rosBridgeName
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/interface list
</span></span><span class=line><span class=cl>add name=WAN
</span></span><span class=line><span class=cl>add name=LAN
</span></span><span class=line><span class=cl>add name=GRE
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/interface bridge port
</span></span><span class=line><span class=cl>:for i from=$rosBridgeMinPort to=$rosBridgeMaxPort do={
</span></span><span class=line><span class=cl>  add bridge=$rosBridgeName interface=(&#34;ether&#34; . $i)
</span></span><span class=line><span class=cl>}
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/interface list member
</span></span><span class=line><span class=cl>add interface=ether1 list=WAN
</span></span><span class=line><span class=cl>add interface=$rosBridgeName list=LAN
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ipv6 settings
</span></span><span class=line><span class=cl>set disable-ipv6=yes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip ipsec profile
</span></span><span class=line><span class=cl>set [find default=yes] dh-group=ecp384 enc-algorithm=aes-256 hash-algorithm=sha256
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip ipsec proposal
</span></span><span class=line><span class=cl>set [find default=yes] auth-algorithms=sha256 enc-algorithms=aes-256-cbc pfs-group=ecp384
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip pool
</span></span><span class=line><span class=cl>add name=dhcp ranges=10.1.200.1-10.1.200.254
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip dhcp-server
</span></span><span class=line><span class=cl>add address-pool=dhcp interface=$rosBridgeName name=dhcp1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip neighbor discovery-settings
</span></span><span class=line><span class=cl>set discover-interface-list=LAN
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip address
</span></span><span class=line><span class=cl>add address=10.1.0.1/16 interface=$rosBridgeName network=10.1.0.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip dhcp-client
</span></span><span class=line><span class=cl>add interface=ether1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip dhcp-server lease
</span></span><span class=line><span class=cl># add address=10.1.0.40 mac-address=00:00:00:00:00:00 comment=&#34;SERVER01&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip dhcp-server network
</span></span><span class=line><span class=cl>add address=10.1.0.0/16 dns-server=10.1.0.1 domain=$rosNwDomain gateway=10.1.0.1 ntp-server=10.1.0.1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip dns
</span></span><span class=line><span class=cl>set allow-remote-requests=yes servers=1.1.1.1,8.8.8.8,77.88.8.8
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip dns static
</span></span><span class=line><span class=cl>add address=10.1.0.1 name=$rosGwDomain
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip firewall filter
</span></span><span class=line><span class=cl>add action=accept chain=input connection-state=established,related,untracked \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] Established, Related, Untracked&#34;
</span></span><span class=line><span class=cl>add action=drop chain=input connection-state=invalid \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] Invalid&#34;
</span></span><span class=line><span class=cl>add action=add-src-to-address-list address-list=&#34;AdminCP&#34; address-list-timeout=30m chain=input in-interface-list=WAN \
</span></span><span class=line><span class=cl>  packet-size=($rosIcmpKnockSize + 28) protocol=icmp \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] ICMP port knocking for AdminCP&#34;
</span></span><span class=line><span class=cl>add action=accept chain=input protocol=icmp \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] ICMP&#34;
</span></span><span class=line><span class=cl>add action=accept chain=input in-interface-list=GRE protocol=ospf disabled=yes \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] OSPF&#34;
</span></span><span class=line><span class=cl>add action=accept chain=input dst-port=53 in-interface-list=GRE protocol=udp disabled=yes \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] DNS&#34;
</span></span><span class=line><span class=cl>add action=accept chain=input dst-port=9090,22022 protocol=tcp src-address-list=&#34;AdminCP&#34; \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] WinBox and SSH&#34;
</span></span><span class=line><span class=cl>add action=accept chain=input dst-port=9090,22022 in-interface-list=GRE protocol=tcp disabled=yes \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] WinBox and SSH&#34;
</span></span><span class=line><span class=cl>add action=drop chain=input in-interface-list=!LAN \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] All not coming from LAN&#34;
</span></span><span class=line><span class=cl>add action=accept chain=forward ipsec-policy=in,ipsec disabled=yes \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] In IPsec policy&#34;
</span></span><span class=line><span class=cl>add action=accept chain=forward ipsec-policy=out,ipsec disabled=yes \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] Out IPsec policy&#34;
</span></span><span class=line><span class=cl>add action=fasttrack-connection chain=forward connection-state=established,related \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] FastTrack&#34;
</span></span><span class=line><span class=cl>add action=accept chain=forward connection-state=established,related,untracked \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] FastTrack&#34;
</span></span><span class=line><span class=cl>add action=drop chain=forward connection-state=invalid \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] Invalid&#34;
</span></span><span class=line><span class=cl>add action=drop chain=forward connection-nat-state=!dstnat connection-state=new in-interface-list=WAN \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] All from WAN not DSTNATed&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip firewall nat
</span></span><span class=line><span class=cl>add action=masquerade chain=srcnat ipsec-policy=out,none out-interface-list=WAN \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] Masquerade&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/ip service
</span></span><span class=line><span class=cl>set telnet disabled=yes
</span></span><span class=line><span class=cl>set ftp disabled=yes
</span></span><span class=line><span class=cl>set www disabled=yes
</span></span><span class=line><span class=cl>set ssh port=22022
</span></span><span class=line><span class=cl>set api disabled=yes
</span></span><span class=line><span class=cl>set winbox port=9090
</span></span><span class=line><span class=cl>set api-ssl disabled=yes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system clock
</span></span><span class=line><span class=cl>set time-zone-name=Europe/Moscow
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system identity
</span></span><span class=line><span class=cl>set name=$rosRouterName
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system ntp client
</span></span><span class=line><span class=cl>set enabled=yes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system ntp server
</span></span><span class=line><span class=cl>set enabled=yes manycast=yes multicast=yes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system ntp client servers
</span></span><span class=line><span class=cl>add address=&#34;0.ru.pool.ntp.org&#34;
</span></span><span class=line><span class=cl>add address=&#34;1.ru.pool.ntp.org&#34;
</span></span><span class=line><span class=cl>add address=&#34;time.google.com&#34;
</span></span><span class=line><span class=cl>add address=&#34;time.cloudflare.com&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system routerboard settings
</span></span><span class=line><span class=cl>set silent-boot=yes
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/system watchdog
</span></span><span class=line><span class=cl>set automatic-supout=no
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/tool bandwidth-server
</span></span><span class=line><span class=cl>set enabled=no
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/tool mac-server
</span></span><span class=line><span class=cl>set allowed-interface-list=none
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/tool mac-server ping
</span></span><span class=line><span class=cl>set enabled=no
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/user
</span></span><span class=line><span class=cl>set [find name=&#34;admin&#34;] password=&#34;$rosAdminPassword&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># -------------------------------------------------------------------------------------------------------------------- #
</span></span><span class=line><span class=cl># Router ID.
</span></span><span class=line><span class=cl># -------------------------------------------------------------------------------------------------------------------- #
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>/routing id
</span></span><span class=line><span class=cl>add id=10.1.0.1 name=lo select-dynamic-id=only-loopback \
</span></span><span class=line><span class=cl>  comment=&#34;[ROS] Router ID (Loopback)&#34;</span></span></code></pre></td></tr></table></div></div></div></div></div></div></div><div class=tab-pane id=tab-pane-main-info role=tabpanel aria-labelledby=tab-main-info tabindex=0><div class=node-body><div class="row row-cols-1 row-cols-lg-2 g-3"><div class=col><section class="card node-categories h-100"><div class=card-body><h5 class=card-title>Категории</h5><ul class=list-inline><li class=list-inline-item><a href=https://lib.onl/ru/categories/network/>Сеть</a></li><li class=list-inline-item><a href=https://lib.onl/ru/categories/scripts/>Скрипты</a></li><li class=list-inline-item><a href=https://lib.onl/ru/categories/indev/>В доработке</a></li></ul></div></section></div><div class=col><section class="card node-tags h-100"><div class=card-body><h5 class=card-title>Теги</h5><ul class=list-inline><li class=list-inline-item><a href=https://lib.onl/ru/tags/mikrotik/>#mikrotik</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/routeros/>#routeros</a></li></ul></div></section></div><div class=col><section class="card node-authors h-100"><div class=card-body><h5 class=card-title>Авторы</h5><ul><li><a href=https://lib.onl/ru/authors/kaikimera/>Kai Kimera</a></li></ul></div></section></div><div class=col><section class="card node-similar h-100"><div class=card-body><h5 class=card-title>Смотрите также</h5><ul><li><a href=/ru/2023/10/cc13623b-970c-5950-867e-168f9ba9025a/>MikroTik: Добавление корневых сертификатов в RouterOS</a></li><li><a href=/ru/2024/04/326618af-d950-5001-8114-57c66bb8a5af/>MikroTik: Туннель GRE/IPsec (Site-to-Site)</a></li><li><a href=/ru/2024/04/146e83d5-f571-5273-9a29-172bf5dc10fe/>MikroTik: Туннель WireGuard (Site-to-Site) + OSPF</a></li><li><a href=/ru/2024/03/54a2b39f-38b4-5f0c-9b54-310f853da38f/>MikroTik: Туннель IPsec (Site-to-Site)</a></li><li><a href=/ru/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/>MikroTik и CloudFlare: Динамический IP для домена</a></li><li><a href=/ru/2023/12/b6c7c5cd-1b0d-5fcd-8dd2-f28f87a5064c/>MikroTik: Настройка DoH</a></li></ul></div></section></div><div class=col><section class="card node-meta h-100"><div class=card-body><h5 class=card-title>Мета</h5><div class="row row-cols-1 row-cols-sm-2 g-2 align-items-center"><div class=col>Лицензия</div><div class=col><div class=input-group><input type=text class=form-control value=CC-BY-SA-4.0 readonly>
<a class="btn btn-primary" href=https://choosealicense.com/licenses/cc-by-sa-4.0 target=_blank role=button rel="noopener noreferrer nofollow" title="Текст лицензии"><i class="far fa-file-lines fa-fw"></i></a></div></div><div class=col>ID файла</div><div class=col><input type=text class=form-control value=40fd92aa69dac0998c86a8dc19d3084e readonly></div><div class=col>UUID</div><div class=col><input type=text class=form-control value=0f3478b3-9fde-59aa-a424-ff160431fa35 readonly></div><div class=col>Системный путь</div><div class=col><input type=text class=form-control value=articles/2023/12/1703055214131_3663/index.md readonly></div><div class=col>Тип</div><div class=col><input type=text class=form-control value=articles readonly></div></div></div></section></div><div class=col><section class="card node-stats h-100"><div class=card-body><h5 class=card-title>Статистика</h5><div class="row row-cols-1 row-cols-sm-2 g-2 align-items-center"><div class=col>Количество слов</div><div class=col><input type=text class=form-control value=741 readonly></div><div class=col>Время чтения</div><div class=col><div class=input-group><input type=text class=form-control value=4 readonly>
<span class=input-group-text>мин.</span></div></div></div></div></section></div></div></div></div><div class=tab-pane id=tab-pane-main-comments role=tabpanel aria-labelledby=tab-main-comments tabindex=0><div class=node-body><div class=giscus></div></div></div><div class=tab-pane id=tab-pane-main-share role=tabpanel aria-labelledby=tab-main-share tabindex=0><div class=node-body><div class="row row-cols-1 row-cols-lg-2 g-3"><div class=col><div class="row row-cols-1 g-3"><div class=col><div class="row row-cols-auto g-2"><div class=col><a class="btn btn-light" href="mailto:?subject=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;body=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" data-bs-tooltip data-bs-title=Email role=button rel="noopener noreferrer nofollow"><i class="fas fa-envelope-open-text fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://twitter.com/intent/tweet?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;text=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;hashtags=mikrotik%2crouteros" title=Twitter role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-twitter fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" title=Facebook role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-facebook fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://linkedin.com/sharing/share-offsite/?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" data-bs-tooltip data-bs-title=LinkedIn role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-linkedin fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://reddit.com/submit?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;title=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0" data-bs-tooltip data-bs-title=Reddit role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-reddit fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://vk.com/share.php?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;title=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;description=%d0%9f%d0%be%d1%81%d0%bb%d0%b5%20%d0%bf%d0%be%d0%ba%d1%83%d0%bf%d0%ba%d0%b8%20%23MikroTik%20%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%83%d1%8e%d1%82%20%d0%be%d0%b1%d0%bd%d1%83%d0%bb%d0%b8%d1%82%d1%8c%20%d0%b2%d1%81%d0%b5%20%d0%b5%d0%b3%d0%be%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8%20%d0%b8%20%d0%bd%d0%b0%d1%87%d0%b0%d1%82%d1%8c%20%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8e%20%d1%81%20%d1%87%d0%b8%d1%81%d1%82%d0%be%d0%b3%d0%be%20%d0%bb%d0%b8%d1%81%d1%82%d0%b0.%0a" title=ВКонтакте role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-vk fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://t.me/share/url?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;text=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0" data-bs-tooltip data-bs-title=Telegram role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-telegram fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" title=Pinterest role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-pinterest fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://getpocket.com/edit?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;title=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0" target=_blank title=Pocket role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-get-pocket fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;t=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0" data-bs-tooltip data-bs-title='Hacker News' role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-hacker-news fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://livejournal.com/update.bml?subject=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;event=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" title=LiveJournal role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fas fa-edit fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&amp;st.shareUrl=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;title=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0" title=Одноклассники role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-odnoklassniki fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://blogger.com/blog-this.g?u=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;n=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;t=%d0%9f%d0%be%d1%81%d0%bb%d0%b5%20%d0%bf%d0%be%d0%ba%d1%83%d0%bf%d0%ba%d0%b8%20%23MikroTik%20%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%83%d1%8e%d1%82%20%d0%be%d0%b1%d0%bd%d1%83%d0%bb%d0%b8%d1%82%d1%8c%20%d0%b2%d1%81%d0%b5%20%d0%b5%d0%b3%d0%be%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8%20%d0%b8%20%d0%bd%d0%b0%d1%87%d0%b0%d1%82%d1%8c%20%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8e%20%d1%81%20%d1%87%d0%b8%d1%81%d1%82%d0%be%d0%b3%d0%be%20%d0%bb%d0%b8%d1%81%d1%82%d0%b0.%0a" title=Blogger role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-blogger fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://digg.com/submit?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" data-bs-tooltip data-bs-title=Digg role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-digg fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://web.skype.com/share?url=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;title=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0" data-bs-tooltip data-bs-title=Skype role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-skype fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://api.whatsapp.com/send?text=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f" title=WhatsApp role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-whatsapp fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://tumblr.com/widgets/share/tool?canonicalUrl=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;title=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;content=%d0%9f%d0%be%d1%81%d0%bb%d0%b5%20%d0%bf%d0%be%d0%ba%d1%83%d0%bf%d0%ba%d0%b8%20%23MikroTik%20%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%83%d1%8e%d1%82%20%d0%be%d0%b1%d0%bd%d1%83%d0%bb%d0%b8%d1%82%d1%8c%20%d0%b2%d1%81%d0%b5%20%d0%b5%d0%b3%d0%be%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8%20%d0%b8%20%d0%bd%d0%b0%d1%87%d0%b0%d1%82%d1%8c%20%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8e%20%d1%81%20%d1%87%d0%b8%d1%81%d1%82%d0%be%d0%b3%d0%be%20%d0%bb%d0%b8%d1%81%d1%82%d0%b0.%0a&amp;tags=mikrotik%2crouteros&amp;posttype=link" title=Tumblr role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-tumblr fa-fw"></i></a></div><div class=col><a class="btn btn-light btn-social" href="https://wordpress.com/wp-admin/press-this.php?u=https%3a%2f%2flib.onl%2fru%2f2023%2f12%2f0f3478b3-9fde-59aa-a424-ff160431fa35%2f&amp;t=MikroTik%3a%20%d0%91%d0%b0%d0%b7%d0%be%d0%b2%d0%b0%d1%8f%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0&amp;s=%d0%9f%d0%be%d1%81%d0%bb%d0%b5%20%d0%bf%d0%be%d0%ba%d1%83%d0%bf%d0%ba%d0%b8%20%23MikroTik%20%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%83%d1%8e%d1%82%20%d0%be%d0%b1%d0%bd%d1%83%d0%bb%d0%b8%d1%82%d1%8c%20%d0%b2%d1%81%d0%b5%20%d0%b5%d0%b3%d0%be%20%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b8%20%d0%b8%20%d0%bd%d0%b0%d1%87%d0%b0%d1%82%d1%8c%20%d0%ba%d0%be%d0%bd%d1%84%d0%b8%d0%b3%d1%83%d1%80%d0%b0%d1%86%d0%b8%d1%8e%20%d1%81%20%d1%87%d0%b8%d1%81%d1%82%d0%be%d0%b3%d0%be%20%d0%bb%d0%b8%d1%81%d1%82%d0%b0.%0a" title=WordPress role=button rel="noopener noreferrer nofollow" data-fn=popup><i class="fab fa-wordpress fa-fw"></i></a></div></div></div><div class=col><div class=input-group><span class=input-group-text><i class="fas fa-link fa-fw"></i></span>
<input type=text class=form-control value=https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/ data-fn=select-all readonly></div></div><div class=col><div class=input-group><span class=input-group-text><i class="fas fa-file fa-fw"></i></span>
<input type=text class=form-control value=articles/2023/12/1703055214131_3663/index.md data-fn=select-all readonly></div></div></div></div><div class=col><div class="d-flex justify-content-center"><div class="d-block img-thumbnail" data-fn=qrcode data-qr-text=https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/></div></div></div></div></div></div></div></article></div></div></main><footer class="mt-auto border-top bg-body-tertiary" id=site-footer><div class="section py-5 border-bottom"><div class=container><div class="row g-3"><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">О проекте</h2><div class=node-body><p>Заметки по системному администрированию и веб-разработкам.</p></div></article></div><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">Ресурсы</h2><div class=node-body><ul><li><a title href=https://kai.kim/ target=_blank rel="noopener noreferrer">Kai Kimera</a></li><li><a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer">Universal AIK</a></li></ul></div></article></div><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">Контакты</h2><div class=node-body><ul><li><a title href=mailto:mail@lib.onl target=_self rel>Email</a></li></ul></div></article></div></div></div></div><div class="section py-3 bg-body-secondary"><div class=container><div class="row row-cols-1 row-cols-lg-2 small text-body-secondary align-items-center"><div class="col text-center text-lg-start"><ul class="list-inline mb-0"><li class=list-inline-item><div>Library Online &copy; 2025</div><div>Заметки на тему администрирования и разработки различных систем, приложений и серверов.</div></li></ul></div><div class="col text-center text-lg-end"><ul class="list-inline mb-0"><li class=list-inline-item title=JSON><a class="btn btn-sm" href=/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/index.json target=_blank aria-label=JSON><i class="fas fa-code fa-fw"></i></a></li><li class="list-inline-item dropup" title='Тема интерфейса'><button class="btn btn-sm dropdown-toggle ui-theme" type=button data-bs-toggle=dropdown aria-expanded=false aria-label='Переключить тему'>
<i class="fas fa-circle-half-stroke fa-fw"></i></button><ul class="dropdown-menu dropdown-menu-end shadow"><li><button class=dropdown-item type=button data-bs-theme-value=light aria-pressed=false>
<i class="fas fa-sun fa-fw"></i>
<span>Светлая</span></button></li><li><button class=dropdown-item type=button data-bs-theme-value=dark aria-pressed=false>
<i class="fas fa-moon fa-fw"></i>
<span>Тёмная</span></button></li><li><button class="dropdown-item active" type=button data-bs-theme-value=auto aria-pressed=true>
<i class="fas fa-circle-half-stroke fa-fw"></i>
<span>Системная</span></button></li></ul></li><li class="list-inline-item dropup" title=Языки><button class="btn btn-sm dropdown-toggle" type=button data-bs-toggle=dropdown aria-expanded=false aria-label=Языки>
<i class="fas fa-language fa-fw"></i></button><ul class="dropdown-menu dropdown-menu-end shadow"><li><a class=dropdown-item href=/ru/ hreflang=ru>Русский</a></li><li><a class=dropdown-item href=/en/ hreflang=en>English</a></li></ul></li></ul></div></div></div></div></footer><div class="modal fade" id=search-modal tabindex=-1 aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-xl"><div class=modal-content><div class=modal-header><h5 class=modal-title id=searchModalLabel>Поиск</h5><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class="modal-body node-body"><div class="row row-cols-1 g-3"><div class=col><div class="row g-3"><div class=col-lg><form action=https://google.com/search method=get class=d-flex target=_blank><input type=hidden name=domains value=lib.onl>
<input type=hidden name=sitesearch value=lib.onl><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input type=search class=form-control name=q placeholder='Поиск Google' aria-label='Поиск Google'>
<span class=input-group-text><i class="fab fa-google fa-fw"></i></span></div></form></div><div class=col-lg><form action=https://ya.ru/search method=get class=d-flex target=_blank><input type=hidden name=site value=lib.onl><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input type=search class=form-control name=text placeholder='Поиск Яндекс' aria-label='Поиск Яндекс'>
<span class=input-group-text><i class="fab fa-yandex fa-fw"></i></span></div></form></div></div></div><div class=col><form id=search-form method=get class=d-flex autocomplete=off><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input id=search-input type=search class=form-control name=q placeholder='Внутренний поиск' aria-label='Внутренний поиск'>
<span class=input-group-text><i class="fas fa-brain fa-fw"></i></span></div></form></div><div class=col><div class="list-group list-group-flush d-none overflow-auto" id=search-results></div><div id=search-help><div class="alert alert-info d-flex align-items-center overflow-hidden node-body" id=alert-2b59569e5313bc3958ea9e00706d6974 role=alert><div class=flex-shrink-0><i class="fas fa-search fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Используется нечёткий поиск (приблизительное сопоставление строк).
Это метод поиска строк, которые приблизительно соответствуют поисковому шаблону.</p><p>Результаты поиска сортируются по точности совпадения с поисковым шаблоном.
Результаты поиска, наиболее точно соответствующие запросу, находятся сверху, приблизительные результаты - снизу.</p></div></div></div></div></div></div></div></div></div><script src=/js/vendor.bundle.min.85b1a46641329b26e58b16e922d5e9797dbc96de73b50df4a9e8f4b897566128.js integrity="sha256-hbGkZkEymyblixbpItXpeX28lt5ztQ30qej0uJdWYSg=" crossorigin=anonymous defer></script><script src=/ru/js/system.bundle.min.e8278af4a5e659c111987a377887079e16ac2cb49267841b749d588d554f6820.js integrity="sha256-6CeK9KXmWcERmHo3eIcHnhasLLSSZ4QbdJ1YjVVPaCA=" crossorigin=anonymous defer></script><script src=https://giscus.app/client.js data-repo=s8956/comments data-repo-id=R_kgDOKgu0Tg data-category=Site data-category-id=DIC_kwDOKgu0Ts4CaJ2z data-mapping=pathname data-strict=1 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=ru data-loading=lazy crossorigin=anonymous async></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","articleBody":"После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа.\nЯ написал небольший скрип для автоматизации действий по базовой настройки маршрутизатора. В скрипте есть параметры, которые необходимо предварительно настроить под себя.\nНастройка основного роутера Загрузить скрипт в память #MikroTik, предварительно настроив параметры скрипта под себя. Зайти в Terminal и выполнить следующую команду: 1 /system reset-configuration no-defaults=yes skip-backup=yes run-after-reset=\u0026#34;ros.router.rsc\u0026#34; Параметры конфигурации Пароль администратора: PassWord. Мост: Имя: bridge1. Порты: 2-5. Шлюз: Название: GW1. IP: 10.1.0.1. Домен: gw1.lan. Подсеть: Маска: 10.1.0.0/16. Домен: home.lan. Адресация DHCP: 10.1.200.1-10.1.200.254. Порты: SSH: 22022. Winbox: 9090. Скрипт конфигурации mt.router.rsc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 # @package MikroTik / RouterOS # @author Kai Kimera \u0026lt;mail@kai.kim\u0026gt; # @copyright 2023 Library Online # @license MIT # @version 0.1.0 # @link https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/ # -------------------------------------------------------------------------------------------------------------------- # # Set MAC: # /interface ethernet set [find default-name=\u0026#34;ether1\u0026#34;] mac-address=\u0026#34;00:00:00:00:00:00\u0026#34; # -------------------------------------------------------------------------------------------------------------------- # # Administrator password. :local rosAdminPassword \u0026#34;PassWord\u0026#34; # Bridge. :local rosBridgeName \u0026#34;bridge1\u0026#34; :local rosBridgeMinPort 2 :local rosBridgeMaxPort 5 # Router name. :local rosRouterName \u0026#34;GW1\u0026#34; # Static gateway name. :local rosGwDomain \u0026#34;gw1.lan\u0026#34; # Network domain name. :local rosNwDomain \u0026#34;home.lan\u0026#34; # Port knocking. :local rosIcmpKnockSize 100 # -------------------------------------------------------------------------------------------------------------------- # # -----------------------------------------------------\u0026lt; SCRIPT \u0026gt;----------------------------------------------------- # # -------------------------------------------------------------------------------------------------------------------- # /interface bridge add name=$rosBridgeName /interface list add name=WAN add name=LAN add name=GRE /interface bridge port :for i from=$rosBridgeMinPort to=$rosBridgeMaxPort do={ add bridge=$rosBridgeName interface=(\u0026#34;ether\u0026#34; . $i) } /interface list member add interface=ether1 list=WAN add interface=$rosBridgeName list=LAN /ipv6 settings set disable-ipv6=yes /ip ipsec profile set [find default=yes] dh-group=ecp384 enc-algorithm=aes-256 hash-algorithm=sha256 /ip ipsec proposal set [find default=yes] auth-algorithms=sha256 enc-algorithms=aes-256-cbc pfs-group=ecp384 /ip pool add name=dhcp ranges=10.1.200.1-10.1.200.254 /ip dhcp-server add address-pool=dhcp interface=$rosBridgeName name=dhcp1 /ip neighbor discovery-settings set discover-interface-list=LAN /ip address add address=10.1.0.1/16 interface=$rosBridgeName network=10.1.0.0 /ip dhcp-client add interface=ether1 /ip dhcp-server lease # add address=10.1.0.40 mac-address=00:00:00:00:00:00 comment=\u0026#34;SERVER01\u0026#34; /ip dhcp-server network add address=10.1.0.0/16 dns-server=10.1.0.1 domain=$rosNwDomain gateway=10.1.0.1 ntp-server=10.1.0.1 /ip dns set allow-remote-requests=yes servers=1.1.1.1,8.8.8.8,77.88.8.8 /ip dns static add address=10.1.0.1 name=$rosGwDomain /ip firewall filter add action=accept chain=input connection-state=established,related,untracked \\ comment=\u0026#34;[ROS] Established, Related, Untracked\u0026#34; add action=drop chain=input connection-state=invalid \\ comment=\u0026#34;[ROS] Invalid\u0026#34; add action=add-src-to-address-list address-list=\u0026#34;AdminCP\u0026#34; address-list-timeout=30m chain=input in-interface-list=WAN \\ packet-size=($rosIcmpKnockSize + 28) protocol=icmp \\ comment=\u0026#34;[ROS] ICMP port knocking for AdminCP\u0026#34; add action=accept chain=input protocol=icmp \\ comment=\u0026#34;[ROS] ICMP\u0026#34; add action=accept chain=input in-interface-list=GRE protocol=ospf disabled=yes \\ comment=\u0026#34;[ROS] OSPF\u0026#34; add action=accept chain=input dst-port=53 in-interface-list=GRE protocol=udp disabled=yes \\ comment=\u0026#34;[ROS] DNS\u0026#34; add action=accept chain=input dst-port=9090,22022 protocol=tcp src-address-list=\u0026#34;AdminCP\u0026#34; \\ comment=\u0026#34;[ROS] WinBox and SSH\u0026#34; add action=accept chain=input dst-port=9090,22022 in-interface-list=GRE protocol=tcp disabled=yes \\ comment=\u0026#34;[ROS] WinBox and SSH\u0026#34; add action=drop chain=input in-interface-list=!LAN \\ comment=\u0026#34;[ROS] All not coming from LAN\u0026#34; add action=accept chain=forward ipsec-policy=in,ipsec disabled=yes \\ comment=\u0026#34;[ROS] In IPsec policy\u0026#34; add action=accept chain=forward ipsec-policy=out,ipsec disabled=yes \\ comment=\u0026#34;[ROS] Out IPsec policy\u0026#34; add action=fasttrack-connection chain=forward connection-state=established,related \\ comment=\u0026#34;[ROS] FastTrack\u0026#34; add action=accept chain=forward connection-state=established,related,untracked \\ comment=\u0026#34;[ROS] FastTrack\u0026#34; add action=drop chain=forward connection-state=invalid \\ comment=\u0026#34;[ROS] Invalid\u0026#34; add action=drop chain=forward connection-nat-state=!dstnat connection-state=new in-interface-list=WAN \\ comment=\u0026#34;[ROS] All from WAN not DSTNATed\u0026#34; /ip firewall nat add action=masquerade chain=srcnat ipsec-policy=out,none out-interface-list=WAN \\ comment=\u0026#34;[ROS] Masquerade\u0026#34; /ip service set telnet disabled=yes set ftp disabled=yes set www disabled=yes set ssh port=22022 set api disabled=yes set winbox port=9090 set api-ssl disabled=yes /system clock set time-zone-name=Europe/Moscow /system identity set name=$rosRouterName /system ntp client set enabled=yes /system ntp server set enabled=yes manycast=yes multicast=yes /system ntp client servers add address=\u0026#34;0.ru.pool.ntp.org\u0026#34; add address=\u0026#34;1.ru.pool.ntp.org\u0026#34; add address=\u0026#34;time.google.com\u0026#34; add address=\u0026#34;time.cloudflare.com\u0026#34; /system routerboard settings set silent-boot=yes /system watchdog set automatic-supout=no /tool bandwidth-server set enabled=no /tool mac-server set allowed-interface-list=none /tool mac-server ping set enabled=no /user set [find name=\u0026#34;admin\u0026#34;] password=\u0026#34;$rosAdminPassword\u0026#34; # -------------------------------------------------------------------------------------------------------------------- # # Router ID. # -------------------------------------------------------------------------------------------------------------------- # /routing id add id=10.1.0.1 name=lo select-dynamic-id=only-loopback \\ comment=\u0026#34;[ROS] Router ID (Loopback)\u0026#34; ","author":[{"@context":"https://schema.org","@type":"Person","address":{"@type":"PostalAddress","addressCountry":"Russia","addressLocality":"Reutov","addressRegion":"Moscow Region"},"alternateName":"Kai Kimera","award":["Грамота АО Институт ЭНЕРГОСЕТЬПРОЕКТ"],"birthDate":"1987-03-13","birthPlace":{"@type":"Place","address":{"@type":"PostalAddress","addressCountry":"Russia","addressLocality":"Reutov","addressRegion":"Moscow Region"}},"email":"mail@kai.kim","gender":"Male","image":"https://gravatar.com/avatar/911c0a839d7d4c3d750a8ce0de293e84?s=512","jobTitle":"System administrator","mainEntityOfPage":"https://lib.onl/ru/authors/kaikimera/","name":"Kai Kimera","sameAs":["https://github.com/KaiKimera","https://instagram.com/KaiKimera","https://twitter.com/KaiKimera","https://vk.com/KaiKimera","https://youtube.com/@KaiKimera"],"telephone":"+7 (000) 000-0000","url":"https://kai.kim/"}],"dateCreated":"2023-12-20T06:53:34Z","dateModified":"2024-04-18T13:28:00Z","datePublished":"2024-04-18T13:28:00Z","description":"После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа.\n","headline":"MikroTik: Базовая настройка","image":"https://images.unsplash.com/photo-1520869562399-e772f042f422","inLanguage":[{"@type":"Language","alternateName":"ru-RU","name":"Русский"}],"keywords":["mikrotik","routeros"],"mainEntityOfPage":"https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/","pageEnd":1,"pageStart":1,"publisher":"https://lib.onl/#organization","text":"После покупки #MikroTik советуют обнулить все его настройки и начать конфигурацию с чистого листа.\nЯ написал небольший скрип для автоматизации действий по базовой настройки маршрутизатора. В скрипте есть параметры, которые необходимо предварительно настроить под себя.\nНастройка основного роутера Загрузить скрипт в память #MikroTik, предварительно настроив параметры скрипта под себя. Зайти в Terminal и выполнить следующую команду: 1 /system reset-configuration no-defaults=yes skip-backup=yes run-after-reset=\u0026#34;ros.router.rsc\u0026#34; Параметры конфигурации Пароль администратора: PassWord. Мост: Имя: bridge1. Порты: 2-5. Шлюз: Название: GW1. IP: 10.1.0.1. Домен: gw1.lan. Подсеть: Маска: 10.1.0.0/16. Домен: home.lan. Адресация DHCP: 10.1.200.1-10.1.200.254. Порты: SSH: 22022. Winbox: 9090. Скрипт конфигурации mt.router.rsc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 # @package MikroTik / RouterOS # @author Kai Kimera \u0026lt;mail@kai.kim\u0026gt; # @copyright 2023 Library Online # @license MIT # @version 0.1.0 # @link https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/ # -------------------------------------------------------------------------------------------------------------------- # # Set MAC: # /interface ethernet set [find default-name=\u0026#34;ether1\u0026#34;] mac-address=\u0026#34;00:00:00:00:00:00\u0026#34; # -------------------------------------------------------------------------------------------------------------------- # # Administrator password. :local rosAdminPassword \u0026#34;PassWord\u0026#34; # Bridge. :local rosBridgeName \u0026#34;bridge1\u0026#34; :local rosBridgeMinPort 2 :local rosBridgeMaxPort 5 # Router name. :local rosRouterName \u0026#34;GW1\u0026#34; # Static gateway name. :local rosGwDomain \u0026#34;gw1.lan\u0026#34; # Network domain name. :local rosNwDomain \u0026#34;home.lan\u0026#34; # Port knocking. :local rosIcmpKnockSize 100 # -------------------------------------------------------------------------------------------------------------------- # # -----------------------------------------------------\u0026lt; SCRIPT \u0026gt;----------------------------------------------------- # # -------------------------------------------------------------------------------------------------------------------- # /interface bridge add name=$rosBridgeName /interface list add name=WAN add name=LAN add name=GRE /interface bridge port :for i from=$rosBridgeMinPort to=$rosBridgeMaxPort do={ add bridge=$rosBridgeName interface=(\u0026#34;ether\u0026#34; . $i) } /interface list member add interface=ether1 list=WAN add interface=$rosBridgeName list=LAN /ipv6 settings set disable-ipv6=yes /ip ipsec profile set [find default=yes] dh-group=ecp384 enc-algorithm=aes-256 hash-algorithm=sha256 /ip ipsec proposal set [find default=yes] auth-algorithms=sha256 enc-algorithms=aes-256-cbc pfs-group=ecp384 /ip pool add name=dhcp ranges=10.1.200.1-10.1.200.254 /ip dhcp-server add address-pool=dhcp interface=$rosBridgeName name=dhcp1 /ip neighbor discovery-settings set discover-interface-list=LAN /ip address add address=10.1.0.1/16 interface=$rosBridgeName network=10.1.0.0 /ip dhcp-client add interface=ether1 /ip dhcp-server lease # add address=10.1.0.40 mac-address=00:00:00:00:00:00 comment=\u0026#34;SERVER01\u0026#34; /ip dhcp-server network add address=10.1.0.0/16 dns-server=10.1.0.1 domain=$rosNwDomain gateway=10.1.0.1 ntp-server=10.1.0.1 /ip dns set allow-remote-requests=yes servers=1.1.1.1,8.8.8.8,77.88.8.8 /ip dns static add address=10.1.0.1 name=$rosGwDomain /ip firewall filter add action=accept chain=input connection-state=established,related,untracked \\ comment=\u0026#34;[ROS] Established, Related, Untracked\u0026#34; add action=drop chain=input connection-state=invalid \\ comment=\u0026#34;[ROS] Invalid\u0026#34; add action=add-src-to-address-list address-list=\u0026#34;AdminCP\u0026#34; address-list-timeout=30m chain=input in-interface-list=WAN \\ packet-size=($rosIcmpKnockSize + 28) protocol=icmp \\ comment=\u0026#34;[ROS] ICMP port knocking for AdminCP\u0026#34; add action=accept chain=input protocol=icmp \\ comment=\u0026#34;[ROS] ICMP\u0026#34; add action=accept chain=input in-interface-list=GRE protocol=ospf disabled=yes \\ comment=\u0026#34;[ROS] OSPF\u0026#34; add action=accept chain=input dst-port=53 in-interface-list=GRE protocol=udp disabled=yes \\ comment=\u0026#34;[ROS] DNS\u0026#34; add action=accept chain=input dst-port=9090,22022 protocol=tcp src-address-list=\u0026#34;AdminCP\u0026#34; \\ comment=\u0026#34;[ROS] WinBox and SSH\u0026#34; add action=accept chain=input dst-port=9090,22022 in-interface-list=GRE protocol=tcp disabled=yes \\ comment=\u0026#34;[ROS] WinBox and SSH\u0026#34; add action=drop chain=input in-interface-list=!LAN \\ comment=\u0026#34;[ROS] All not coming from LAN\u0026#34; add action=accept chain=forward ipsec-policy=in,ipsec disabled=yes \\ comment=\u0026#34;[ROS] In IPsec policy\u0026#34; add action=accept chain=forward ipsec-policy=out,ipsec disabled=yes \\ comment=\u0026#34;[ROS] Out IPsec policy\u0026#34; add action=fasttrack-connection chain=forward connection-state=established,related \\ comment=\u0026#34;[ROS] FastTrack\u0026#34; add action=accept chain=forward connection-state=established,related,untracked \\ comment=\u0026#34;[ROS] FastTrack\u0026#34; add action=drop chain=forward connection-state=invalid \\ comment=\u0026#34;[ROS] Invalid\u0026#34; add action=drop chain=forward connection-nat-state=!dstnat connection-state=new in-interface-list=WAN \\ comment=\u0026#34;[ROS] All from WAN not DSTNATed\u0026#34; /ip firewall nat add action=masquerade chain=srcnat ipsec-policy=out,none out-interface-list=WAN \\ comment=\u0026#34;[ROS] Masquerade\u0026#34; /ip service set telnet disabled=yes set ftp disabled=yes set www disabled=yes set ssh port=22022 set api disabled=yes set winbox port=9090 set api-ssl disabled=yes /system clock set time-zone-name=Europe/Moscow /system identity set name=$rosRouterName /system ntp client set enabled=yes /system ntp server set enabled=yes manycast=yes multicast=yes /system ntp client servers add address=\u0026#34;0.ru.pool.ntp.org\u0026#34; add address=\u0026#34;1.ru.pool.ntp.org\u0026#34; add address=\u0026#34;time.google.com\u0026#34; add address=\u0026#34;time.cloudflare.com\u0026#34; /system routerboard settings set silent-boot=yes /system watchdog set automatic-supout=no /tool bandwidth-server set enabled=no /tool mac-server set allowed-interface-list=none /tool mac-server ping set enabled=no /user set [find name=\u0026#34;admin\u0026#34;] password=\u0026#34;$rosAdminPassword\u0026#34; # -------------------------------------------------------------------------------------------------------------------- # # Router ID. # -------------------------------------------------------------------------------------------------------------------- # /routing id add id=10.1.0.1 name=lo select-dynamic-id=only-loopback \\ comment=\u0026#34;[ROS] Router ID (Loopback)\u0026#34; ","url":"https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/","wordCount":741}</script><script type=application/ld+json>{"@context":"https://schema.org","@id":"https://lib.onl/#website","@type":"WebSite","description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","hasPart":[{"@context":"https://schema.org","@type":"WPHeader","cssSelector":"#site-header","headline":"headline-string"},{"@context":"https://schema.org","@type":"WPFooter","copyrightHolder":"https://lib.onl/#organization","copyrightYear":"2025","cssSelector":"#site-footer","publisher":"https://lib.onl/#organization"}],"inLanguage":[{"@type":"Language","alternateName":"ru-RU","name":"Русский"}],"keywords":["Powershell","Debian","Forum","Ipb","Ips","Mikrotik","Linux","Freebsd","Routeros","Cisco","Bash","Dns","Cloudflare","Cmd","Cmf","Cms","Php","Sql","Systemd","Vbulletin"],"mainEntityOfPage":"https://lib.onl/","name":"Library Online","publisher":"https://lib.onl/#organization","url":"https://lib.onl/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@id":"https://lib.onl/#organization","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"Russia","addressLocality":"Moscow","addressRegion":"Moscow Region"},"contactPoint":{"@type":"ContactPoint","contactType":"customer service","email":"mail@lib.onl","telephone":"+7 (000) 000-0000"},"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","foundingDate":"2020","legalName":"Library Online","logo":{"@type":"ImageObject","url":"https://lib.onl/img/logo.min.svg"},"mainEntityOfPage":"https://lib.onl/","name":"Library Online","sameAs":[""],"url":"https://lib.onl/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"SiteNavigationElement","name":"Статьи","position":10,"url":"https://lib.onl/ru/articles/"},{"@type":"SiteNavigationElement","name":"Q\u0026A","position":20,"url":"https://lib.onl/ru/faq/"},{"@type":"SiteNavigationElement","name":"Архив","position":100,"url":"https://lib.onl/ru/archive/"},{"@type":"SiteNavigationElement","name":"О проекте","position":999,"url":"https://lib.onl/ru/about/"},{"@type":"SiteNavigationElement","name":"META","position":9999,"url":"https://lib.onl/ru/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":{"@id":"https://lib.onl/ru/","name":"Главная"},"position":1},{"@type":"ListItem","item":{"@id":"https://lib.onl/ru/articles/","name":"Статьи"},"position":2},{"@type":"ListItem","item":{"@id":"https://lib.onl/ru/2023/12/0f3478b3-9fde-59aa-a424-ff160431fa35/","name":"MikroTik: Базовая настройка"},"position":3}]}</script></body></html>