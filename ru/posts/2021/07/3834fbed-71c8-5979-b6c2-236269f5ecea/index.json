{"data":[{"page":{"authors":["KitsuneSolar"],"categories":["Dev"],"content":"В предыдущей статье Синхронизация репозитория от GitHub к GitLab я рассказал о том, как организовать синхронизацию между репозиториями GIT на разных хостингах, в частности, между GitHub и GitLab. В итоге, я решил сделать собственный GitHub Action, который позволяет полностью зеркалировать репозитории.\nmirror GitHub Actions Store 1 0 0 MIT Использование Для подключения зеркалирования, к примеру, с GitHub на GitLab, необходимо в исходном репозитории создать файл .github/workflows/mirror.yml, в котором указать следующее содержимое:\nname: \u0026quot;Repository Mirror\u0026quot; on: - push jobs: mirror: runs-on: ubuntu-latest name: \u0026quot;Mirror\u0026quot; steps: - uses: pkgstore/github-action-mirror@main with: source_repo: \u0026quot;https://github.com/${{ github.repository }}.git\u0026quot; source_user: \u0026quot;${{ secrets.MIRROR_SOURCE_USER_GITHUB }}\u0026quot; source_token: \u0026quot;${{ secrets.MIRROR_SOURCE_TOKEN_GITHUB }}\u0026quot; target_repo: \u0026quot;https://gitlab.com/${{ github.repository }}.git\u0026quot; target_user: \u0026quot;${{ secrets.MIRROR_TARGET_USER_GITLAB }}\u0026quot; target_token: \u0026quot;${{ secrets.MIRROR_TARGET_TOKEN_GITLAB }}\u0026quot; source_repo - URL исходного репозитория. source_user - пользователь исходного репозитория. source_token - токен пользователя исходного репозитория. target_repo - URL зеркального репозитория. target_user - пользователь зеркального репозитория. target_token - токен пользователя зеркального репозитория. В этом коде стоит обратить внимание на параметр target_repo. GitLab позволяет автоматически создавать репозиторий при зеркалировании, а так как у меня адреса репозиториев совпадают между GitHub и GitLab, мне гораздо проще выстроить конструкцию https://gitlab.com/${{ github.repository }}.git. Переменная ${{ github.repository }} содержит имя пользователя / организации и название репозитория, и, при настройке зеркалирования репозитория на GitHub\u0026rsquo;е, зеркало репозитория автоматически создаётся на GitLab\u0026rsquo;е.","date":{"created":"2021-07-06T17:40:43Z","modified":"2021-07-06T17:40:43Z","published":"2021-07-06T17:40:43Z"},"description":"В предыдущей статье Синхронизация репозитория от GitHub к GitLab я рассказал о том, как организовать синхронизацию между репозиториями GIT на разных хостингах, в частности, между GitHub и GitLab. В итоге, я решил сделать собственный GitHub Action, который позволяет полностью зеркалировать репозитории.","images":["https://images.unsplash.com/photo-1611854571485-982a1f4ba294"],"meta":{"fid":"fa81ffe21f777856db0078065440189b","licenses":["cc-by-sa-4.0"],"read_time":1,"sha1":"92e03a4b9acc65bb7162018e10406a1533e3bc45","type":"posts","uuid":"3834fbed-71c8-5979-b6c2-236269f5ecea","word_count":205},"name":"Зеркалирование репозитория между хостингами","tags":["git","github","gitlab","mirror","sync","action"],"url":"https://lib.onl/ru/posts/2021/07/3834fbed-71c8-5979-b6c2-236269f5ecea/"},"site":{"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","name":"Library Online","url":"https://lib.onl/"}}]}