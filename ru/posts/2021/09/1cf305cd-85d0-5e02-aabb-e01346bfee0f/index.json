{"data":[{"page":{"authors":["KitsuneSolar"],"categories":["Linux","InDev"],"content":"В этой небольшой заметке, я расскажу как установить Proxmox VE на чистый Debian 11 (Bullseye).\nПодготовка Для начала необходимо отредактировать файл /etc/hosts, прописав туда IP сервера, на который будет устанавливаться наш Proxmox VE:\n127.0.0.1 localhost 127.0.1.1 localhost.localdomain localhost # Proxmox 10.0.1.1 srv-vm.home.local srv-vm Для проверки, можно выполнить команду hostname --ip-address, которая вернёт IP сервера, указанного в /etc/hosts выше.\nДобавление репозиториев Добавим репозиторий Proxmox VE:\necho \u0026quot;deb [arch=amd64] http://download.proxmox.com/debian/pve bullseye pve-no-subscription\u0026quot; \u0026gt; /etc/apt/sources.list.d/pve.list Скачаем и установим ключ репозитория:\ncurl 'https://enterprise.proxmox.com/debian/proxmox-release-bullseye.gpg' -o /etc/apt/trusted.gpg.d/pve.gpg Обновим базу пакетов APT и саму систему:\napt update \u0026amp;\u0026amp; apt full-upgrade Установка пакетов Начнём установку пакетов командой:\napt install proxmox-ve postfix open-iscsi Стоит заметить, что устанавливается Postfix, он необходим для отправки писем от Proxmox VE. Но мне в локальной сети такая функция не нужна. При установке, Postfix спросит в каком режиме ему необходимо будет работать. Я выбираю local only.\nИсправление ошибок После установки Proxmox VE через пакетны менеджер APT, я столкнулся с некоторыми проблемами. Не знаю, может быть они будут отсутствовать, если устанавливать Proxmox VE при помощи его отдельного ISO-файла\u0026hellip;\nlvm2-activation-generator: lvmconfig failed Для исправления ошибки lvm2-activation-generator: lvmconfig failed, необходимо в файле /etc/lvm/lvm.conf изменить параметр event_activation, а именно раскомментировать и установить в 0:\nglobal { \u0026lt;...\u0026gt; # Configuration option global/event_activation. # Activate LVs based on system-generated device events. # When a device appears on the system, a system-generated event runs # the pvscan command to activate LVs if the new PV completes the VG. # Use auto_activation_volume_list to select which LVs should be # activated from these events (the default is all.) # When event_activation is disabled, the system will generally run # a direct activation command to activate LVs in complete VGs. # This configuration option has an automatic default value. # event_activation = 1 \u0026lt;...\u0026gt; } global { \u0026lt;...\u0026gt; # Configuration option global/event_activation. # Activate LVs based on system-generated device events. # When a device appears on the system, a system-generated event runs # the pvscan command to activate LVs if the new PV completes the VG. # Use auto_activation_volume_list to select which LVs should be # activated from these events (the default is all.) # When event_activation is disabled, the system will generally run # a direct activation command to activate LVs in complete VGs. # This configuration option has an automatic default value. event_activation = 0 \u0026lt;...\u0026gt; } Не поднимается интерфейс После установки, у меня перестал автоматически подниматься сетевой интерфейс. Может быть, в отдельном ISO-образе Proxmox VE такой проблемы нет, потому что при установке с отдельного ISO-образа, он запрашивает у администратора параметры сети. Но если устанавливать Proxmox VE через пакетную систему Debian, то никаких запросов не появляется. В общем, я сделал так (/etc/network/interfaces):\nauto lo iface lo inet loopback iface enp3s0 inet manual auto vmbr0 iface vmbr0 inet static address 10.0.1.1/16 gateway 10.0.0.1 bridge-ports enp3s0 bridge-stp off bridge-fd 0 Конкретно, тут я добавил блок виртуального соединения:\nauto vmbr0 iface vmbr0 inet static address 10.0.1.1/16 gateway 10.0.0.1 bridge-ports enp3s0 bridge-stp off bridge-fd 0 Где указал мост с физической картой enp3s0. Саму же карту enp3s0 я перевёл в режим manual. После этого, сетевой интерфейс на сервере заработал в штатном режиме.\nНа этом консольная настройка сервера виртуализации закончена. Настройка самого Proxmox\u0026rsquo;а можно выполнять уже в удобном web-интерфейсе.","date":{"created":"2021-09-12T21:36:02Z","modified":"2021-09-12T21:36:02Z","published":"2021-09-12T21:36:02Z"},"description":"В этой небольшой заметке, я расскажу как установить Proxmox VE на чистый Debian 11 (Bullseye).","images":["https://images.unsplash.com/photo-1566443280617-35db331c54fb"],"meta":{"fid":"d1c77012105fc344a5fea5694e9c9756","licenses":["cc-by-sa-4.0"],"read_time":3,"sha1":"6db30421fef4d967c8535280306a9960d3b7291e","type":"posts","uuid":"1cf305cd-85d0-5e02-aabb-e01346bfee0f","word_count":530},"name":"Установка Proxmox VE на Debian 11 (Bullseye)","tags":["proxmox","debian"],"url":"https://lib.onl/ru/posts/2021/09/1cf305cd-85d0-5e02-aabb-e01346bfee0f/"},"site":{"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","name":"Library Online","url":"https://lib.onl/"}}]}