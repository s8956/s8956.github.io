{"data":[{"page":{"authors":["KitsuneSolar"],"categories":["Terminal","Linux"],"content":"Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.\nИзменение прав доступа осуществляется при помощи команды chmod, рекурсивное при добавлении опции -R:\nchmod -R MODE DIR -R - рекурсивный обход директорий и файлов. MODE - набор прав доступа для их установки. DIR - файл или директория, у которых необходимо установить определённые права доступа. В итоге, команда должна выглядеть так:\nuser@localhost ~ % chmod -R 755 /var/www/html Но, стоит учитывать, что таким образом директории и файлы примут одинаковые права доступа. Чтобы избежать этого, можно воспользоваться командой find, которая отфильтрует директории и файлы друг от друга:\nuser@localhost ~ % find /var/www/html -type d -exec chmod 755 {} \\; user@localhost ~ % find /var/www/html -type f -exec chmod 644 {} \\; Команда find ищет директории (-type d) и файлы (-type f) и скармливает их команде chmod, а та, в свою очередь, уже расставляет права доступа. При использовании -exec, chmod выполняется для каждого найденного элемента поочерёдно. Можно оптимизировать и записать с использованием xargs:\nuser@localhost ~ % find /var/www/html -type d -print0 | xargs -0 chmod 755 user@localhost ~ % find /var/www/html -type f -print0 | xargs -0 chmod 644 При xargs, chmod выполняется сразу для нескольких записей одновременно, как сообщает Daniel Miessler:\nThis is where -exec breaks down and xargs shows its superiority. When you use -exec to do the work you run a separate instance of the called program for each element of input. So if find comes up with 10,000 results, you run exec 10,000 times. With xargs, you build up the input into bundles and run them through the command as few times as possible, which is often just once. When dealing with hundreds or thousands of elements this is a big win for xargs.\nDaniel Miessler Если необходимо запустить рекурсивное изменение прав доступа начиная с текущей директории, то /var/www/html необходимо поменять на точку:\nuser@localhost ~ % find . -type d -print0 | xargs -0 chmod 755 user@localhost ~ % find . -type f -print0 | xargs -0 chmod 644 ","date":{"created":"2021-05-09T17:15:26Z","modified":"2021-05-09T17:15:26Z","published":"2021-05-09T17:15:26Z"},"description":"Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.","images":["https://images.unsplash.com/photo-1569235186275-626cb53b83ce"],"meta":{"fid":"c3d936dacadab3d4611f85e222df6fcd","licenses":["cc-by-sa-4.0"],"read_time":2,"sha1":"8c8be18e03d08c1eb85639f04c858a55ac394ba3","type":"posts","uuid":"4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e","word_count":344},"name":"Рекурсивное изменение прав доступа на файлы и директории","tags":["linux","terminal","chmod","find"],"url":"https://lib.onl/ru/posts/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/"},"site":{"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","name":"Library Online","url":"https://lib.onl/"}}]}