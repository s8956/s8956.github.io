{"data":[{"page":{"authors":["KitsuneSolar"],"categories":["Network"],"content":"Когда то на просторах интернета нашёл скрипт реализации динамической смены IP из MikroTik напрямую в панели управления Cloudflare при помощи API. Сам скрипт я немного подкорректировал и опубликовал в MikroTik Marketplace . Где нашёл скрипт уже не помню, вроде бы на страницах официального форума MikroTik. Привожу описание скрипта и переменных.\nСам скрипт нужно настроить под себя, прописав в нём значения переменных. Значения переменных я указал в README на GitHub’е. Большинство значений можно узнать из панели управления доменом в Cloudflare, но для получения значения переменной cfDNSID необходимо выполнит немного телодвижений.\nДля начала в терминале Linux выполнить следующую команду:\ncurl -X GET \u0026quot;https://api.cloudflare.com/client/v4/zones/API_ZONE_ID/dns_records\u0026quot; \\ -H \u0026quot;X-Auth-Email: USER_EMAIL\u0026quot; \\ -H \u0026quot;X-Auth-Key: USER_TOKEN\u0026quot; \\ -H \u0026quot;Content-Type: application/json\u0026quot; | python -mjson.tool \u0026hellip;соответственно, подставив собственные значения, например (значения фальшивые):\ncurl -X GET \u0026quot;https://api.cloudflare.com/client/v4/zones/Q7dslfag51U2B3jRpmbxMInDTCoSFYyH/dns_records\u0026quot; \\ -H \u0026quot;X-Auth-Email: user@cloudflare.com\u0026quot; \\ -H \u0026quot;X-Auth-Key: CcDXmj5lzd9Na3Wi2fQLPvAJIuwUrxF1VnMyS\u0026quot; \\ -H \u0026quot;Content-Type: application/json\u0026quot; | python -mjson.tool Команды вернёт результат в формате JSON, к примеру (результаты фальшивые):\n{ \u0026quot;result\u0026quot;: [ { \u0026quot;id\u0026quot;: \u0026quot;gJDSG5la4IWNOEVn6K2PHyope8Q9YhzC\u0026quot;, \u0026quot;zone_id\u0026quot;: \u0026quot;Q7dslfag51U2B3jRpmbxMInDTCoSFYyH\u0026quot;, \u0026quot;zone_name\u0026quot;: \u0026quot;example.com\u0026quot;, \u0026quot;name\u0026quot;: \u0026quot;example.com\u0026quot;, \u0026quot;type\u0026quot;: \u0026quot;A\u0026quot;, \u0026quot;content\u0026quot;: \u0026quot;192.168.10.232\u0026quot;, \u0026quot;proxiable\u0026quot;: true, \u0026quot;proxied\u0026quot;: true, \u0026quot;ttl\u0026quot;: 1, \u0026quot;locked\u0026quot;: false, \u0026quot;meta\u0026quot;: { \u0026quot;auto_added\u0026quot;: false, \u0026quot;managed_by_apps\u0026quot;: false, \u0026quot;managed_by_argo_tunnel\u0026quot;: false, \u0026quot;source\u0026quot;: \u0026quot;primary\u0026quot; }, \u0026quot;created_on\u0026quot;: \u0026quot;2020-02-23T21:26:27.56227Z\u0026quot;, \u0026quot;modified_on\u0026quot;: \u0026quot;2020-02-23T21:26:27.56227Z\u0026quot; } ], \u0026quot;success\u0026quot;: true, \u0026quot;errors\u0026quot;: [], \u0026quot;messages\u0026quot;: [], \u0026quot;result_info\u0026quot;: { \u0026quot;page\u0026quot;: 1, \u0026quot;per_page\u0026quot;: 20, \u0026quot;count\u0026quot;: 7, \u0026quot;total_count\u0026quot;: 7, \u0026quot;total_pages\u0026quot;: 1 } } Смотрим поле id и значение этого поля вставляем в переменную cfDNSID.\nНа этом всё. Не забываем выдать скрипту необходимые права в панели MikroTik, а также прописать автоматический запуск скрипта через Scheduler.","date":{"created":"2020-07-12T15:09:48Z","modified":"2020-07-12T15:09:48Z","published":"2020-07-12T15:09:48Z"},"description":"Когда то на просторах интернета нашёл скрипт реализации динамической смены IP из MikroTik напрямую в панели управления Cloudflare при помощи API. Сам скрипт я немного подкорректировал и опубликовал в MikroTik Marketplace . Где нашёл скрипт уже не помню, вроде бы на страницах официального форума MikroTik. Привожу описание скрипта и переменных.","images":["https://images.unsplash.com/photo-1521542464131-cb30f7398bc6"],"meta":{"fid":"7d60a953d13cf600a60bbafcd0215140","licenses":null,"read_time":2,"sha1":"1eddc59ef6103ab3836536a49b3b90a24966f039","type":"posts","uuid":"ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517","word_count":244},"name":"MikroTik и Cloudflare: Динамический IP для домена","tags":["router","mikrotik","cloudflare"],"url":"https://lib.onl/ru/posts/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/"},"site":{"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","name":"Library Online","url":"https://lib.onl/"}}]}