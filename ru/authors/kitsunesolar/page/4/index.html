<!doctype html><html class=h-100 dir=ltr lang=ru-RU prefix="og: http://ogp.me/ns#
      article: http://ogp.me/ns/article#
      profile: http://ogp.me/ns/profile#
      fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Kitsune Solar / Library Online</title>
<meta name=title content="Kitsune Solar / Library Online"><meta name=description content="Системный администратор и веб-разработчик. Я пишу статьи по системному администрированию и разработке различных систем, приложений и серверов."><meta name=keywords content="powershell,forum,ipb,ips,debian,linux,cmd,cmf,cms,vbulletin,bash,cloudflare,fedora,git,php,systemd,terminal,dhcp,find,gdm"><link rel=preconnect href=https://fonts.googleapis.com crossorigin=anonymous><link rel=preconnect href=https://fonts.gstatic.com crossorigin=anonymous><link rel=preconnect href=https://gravatar.com crossorigin=anonymous><link rel=preconnect href=https://images.unsplash.com crossorigin=anonymous><link rel=preload href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href=/css/vendor.bundle.css as=style><link rel=stylesheet href=/css/vendor.bundle.css><link rel=preload href=/ru/css/system.bundle.min.css as=style><link rel=stylesheet href=/ru/css/system.bundle.min.css><link rel=icon type=image/png sizes=16x16 href=https://lib.onl/favicon-16.png><link rel="shortcut icon" type=image/png sizes=16x16 href=https://lib.onl/favicon-16.png><link rel=apple-touch-icon sizes=16x16 href=https://lib.onl/favicon-16.png><link rel=icon type=image/png sizes=24x24 href=https://lib.onl/favicon-24.png><link rel="shortcut icon" type=image/png sizes=24x24 href=https://lib.onl/favicon-24.png><link rel=apple-touch-icon sizes=24x24 href=https://lib.onl/favicon-24.png><link rel=icon type=image/png sizes=32x32 href=https://lib.onl/favicon-32.png><link rel="shortcut icon" type=image/png sizes=32x32 href=https://lib.onl/favicon-32.png><link rel=apple-touch-icon sizes=32x32 href=https://lib.onl/favicon-32.png><link rel=icon type=image/png sizes=48x48 href=https://lib.onl/favicon-48.png><link rel="shortcut icon" type=image/png sizes=48x48 href=https://lib.onl/favicon-48.png><link rel=apple-touch-icon sizes=48x48 href=https://lib.onl/favicon-48.png><link rel=icon type=image/png sizes=64x64 href=https://lib.onl/favicon-64.png><link rel="shortcut icon" type=image/png sizes=64x64 href=https://lib.onl/favicon-64.png><link rel=apple-touch-icon sizes=64x64 href=https://lib.onl/favicon-64.png><link rel=icon type=image/png sizes=72x72 href=https://lib.onl/favicon-72.png><link rel="shortcut icon" type=image/png sizes=72x72 href=https://lib.onl/favicon-72.png><link rel=apple-touch-icon sizes=72x72 href=https://lib.onl/favicon-72.png><link rel=icon type=image/png sizes=80x80 href=https://lib.onl/favicon-80.png><link rel="shortcut icon" type=image/png sizes=80x80 href=https://lib.onl/favicon-80.png><link rel=apple-touch-icon sizes=80x80 href=https://lib.onl/favicon-80.png><link rel=icon type=image/png sizes=96x96 href=https://lib.onl/favicon-96.png><link rel="shortcut icon" type=image/png sizes=96x96 href=https://lib.onl/favicon-96.png><link rel=apple-touch-icon sizes=96x96 href=https://lib.onl/favicon-96.png><link rel=icon type=image/png sizes=128x128 href=https://lib.onl/favicon-128.png><link rel="shortcut icon" type=image/png sizes=128x128 href=https://lib.onl/favicon-128.png><link rel=apple-touch-icon sizes=128x128 href=https://lib.onl/favicon-128.png><link rel=icon type=image/png sizes=144x144 href=https://lib.onl/favicon-144.png><link rel="shortcut icon" type=image/png sizes=144x144 href=https://lib.onl/favicon-144.png><link rel=apple-touch-icon sizes=144x144 href=https://lib.onl/favicon-144.png><link rel=icon type=image/png sizes=152x152 href=https://lib.onl/favicon-152.png><link rel="shortcut icon" type=image/png sizes=152x152 href=https://lib.onl/favicon-152.png><link rel=apple-touch-icon sizes=152x152 href=https://lib.onl/favicon-152.png><link rel=icon type=image/png sizes=167x167 href=https://lib.onl/favicon-167.png><link rel="shortcut icon" type=image/png sizes=167x167 href=https://lib.onl/favicon-167.png><link rel=apple-touch-icon sizes=167x167 href=https://lib.onl/favicon-167.png><link rel=icon type=image/png sizes=180x180 href=https://lib.onl/favicon-180.png><link rel="shortcut icon" type=image/png sizes=180x180 href=https://lib.onl/favicon-180.png><link rel=apple-touch-icon sizes=180x180 href=https://lib.onl/favicon-180.png><link rel=icon type=image/png sizes=192x192 href=https://lib.onl/favicon-192.png><link rel="shortcut icon" type=image/png sizes=192x192 href=https://lib.onl/favicon-192.png><link rel=apple-touch-icon sizes=192x192 href=https://lib.onl/favicon-192.png><link rel=icon type=image/png sizes=196x196 href=https://lib.onl/favicon-196.png><link rel="shortcut icon" type=image/png sizes=196x196 href=https://lib.onl/favicon-196.png><link rel=apple-touch-icon sizes=196x196 href=https://lib.onl/favicon-196.png><link rel=icon type=image/png sizes=256x256 href=https://lib.onl/favicon-256.png><link rel="shortcut icon" type=image/png sizes=256x256 href=https://lib.onl/favicon-256.png><link rel=apple-touch-icon sizes=256x256 href=https://lib.onl/favicon-256.png><link rel=icon type=image/png sizes=300x300 href=https://lib.onl/favicon-300.png><link rel="shortcut icon" type=image/png sizes=300x300 href=https://lib.onl/favicon-300.png><link rel=apple-touch-icon sizes=300x300 href=https://lib.onl/favicon-300.png><link rel=icon type=image/png sizes=512x512 href=https://lib.onl/favicon-512.png><link rel="shortcut icon" type=image/png sizes=512x512 href=https://lib.onl/favicon-512.png><link rel=apple-touch-icon sizes=512x512 href=https://lib.onl/favicon-512.png><link rel=icon type=image/svg+xml sizes=any href=https://lib.onl/favicon.svg><link rel="shortcut icon" type=image/x-icon href=https://lib.onl/favicon.ico><link rel="shortcut icon" type=image/vnd.microsoft.icon href=https://lib.onl/favicon.ico><link rel=first href=https://lib.onl/ru/authors/kitsunesolar/><link rel=last href=https://lib.onl/ru/authors/kitsunesolar/page/4/><link rel=prev href=https://lib.onl/ru/authors/kitsunesolar/page/3/><link rel=canonical href=https://lib.onl/ru/authors/kitsunesolar/page/4/><link rel=alternate href=https://lib.onl/ hreflang=x-default><link rel=alternate href=https://lib.onl/ru/authors/kitsunesolar/ hreflang=ru><link rel=alternate href=https://lib.onl/en/authors/kitsunesolar/ hreflang=en><link rel=manifest type=application/manifest+json href=https://lib.onl/ru/manifest.json title="Library Online"><link rel=search type=application/opensearchdescription+xml href=https://lib.onl/ru/opensearch.xml title="Library Online"><link rel=alternate type=application/rss+xml href=https://lib.onl/ru/authors/kitsunesolar/index.xml title="Library Online"><meta name=application-name content="Library Online"><meta name=theme-color content="#f8f9fa" media="(prefers-color-scheme: light)"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lib.onl/favicon-512.png"><meta name=twitter:title content="Kitsune Solar"><meta name=twitter:description content="Заметки на тему администрирования и разработки различных систем, приложений и серверов."><meta property="og:title" content="Kitsune Solar"><meta property="og:description" content="Заметки на тему администрирования и разработки различных систем, приложений и серверов."><meta property="og:type" content="website"><meta property="og:url" content="https://lib.onl/ru/authors/kitsunesolar/"><meta property="og:image" content="https://lib.onl/favicon-512.png"><meta property="twitter:domain" content="lib.onl"><meta property="twitter:url" content="https://lib.onl/ru/authors/kitsunesolar/"><meta property="og:locale" content="ru_RU"><meta property="og:site_name" content="Library Online"><meta name=DC.Title content="Kitsune Solar"><meta name=DC.Subject content="Системный администратор и веб-разработчик. Я пишу статьи по системному администрированию и разработке различных систем, приложений и серверов."><meta name=DC.Description content="Системный администратор и веб-разработчик. Я пишу статьи по системному администрированию и разработке различных систем, приложений и серверов."><meta name=DC.Type content="Text"><meta name=DC.Source content="https://lib.onl/ru/authors/kitsunesolar/"><meta name=DC.Relation content="https://lib.onl/ru/authors/kitsunesolar/"><meta name=DC.Coverage content="World"><meta name=DC.Creator content="Library Online"><meta name=DC.Publisher content="Library Online"><meta name=DC.Contributor content="Library Online"><meta name=DC.Rights content="Library Online"><meta name=DC.Format content="Digital"><meta name=DC.Identifier content="https://lib.onl/ru/authors/kitsunesolar/"><meta name=DC.Language content="ru-RU"><meta name=DC.Provenance content="Library Online"><meta name=DC.RightsHolder content="Library Online"><meta name=DC.AccrualPeriodicity content="Weekly"><meta name=DC.AccrualPolicy content="Active"></head><body class="d-flex flex-column h-100 is-node type-authors"><header id=site-header><nav class="navbar navbar-expand-lg navbar-light fixed-top border-bottom shadow-sm text-lg-center bg-light"><div class=container-fluid><a class=navbar-brand href=/ru/><img src=https://lib.onl/img/logo.min.svg alt=Логотип width=30 height=24 class="d-inline-block align-text-top"><h1 class="d-inline-block h5 m-0 ms-1">Library Online</h1></a><button type=button class=navbar-toggler data-bs-toggle=collapse data-bs-target=#navTopBar aria-controls=navTopBar aria-expanded=false aria-label='Переключить навигацию'>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navTopBar><ul class="navbar-nav me-auto"><li class=nav-item><a class=nav-link href=/ru/articles/><i class="fas fa-book fa-fw"></i>
<span>Статьи</span></a></li><li class=nav-item><a class=nav-link href=/ru/faq/><i class="fas fa-circle-question fa-fw"></i>
<span>Q&amp;A</span></a></li><li class=nav-item><a class=nav-link href=/ru/archive/><i class="fas fa-archive fa-fw"></i>
<span>Архив</span></a></li><li class=nav-item><a class=nav-link href=/ru/about/><i class="fas fa-info-circle fa-fw"></i>
<span>О проекте</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-list fa-fw"></i>
<span>META</span></a><div class="dropdown-menu shadow"><a class="dropdown-item active" href=/ru/authors/><i class="fas fa-user-circle fa-fw"></i>
<span>Авторы</span>
</a><a class=dropdown-item href=/ru/categories/><i class="fas fa-folder-open fa-fw"></i>
<span>Категории</span>
</a><a class=dropdown-item href=/ru/tags/><i class="fas fa-tags fa-fw"></i>
<span>Теги</span>
</a><a class=dropdown-item href=/ru/drafts/><i class="fas fa-file-pen fa-fw"></i>
<span>Черновики</span></a></div></li></ul><ul class=navbar-nav><li class=nav-item><a class="nav-link d-lg-none" href=# data-bs-toggle=modal data-bs-target=#search-modal aria-label=Поиск><i class="fas fa-search fa-fw"></i>
<span>Поиск</span>
</a><a class="nav-link d-none d-lg-block" href=# data-bs-toggle=modal data-bs-target=#search-modal data-bs-tooltip data-bs-title=Поиск aria-label=Поиск><i class="fas fa-search fa-fw"></i></a></li></ul></div></div></nav></header><main class="wrapper flex-shrink-0" id=site-main><div class="section py-3"><div class=container><nav style="--bs-breadcrumb-divider:'\2f '" class=small aria-label=breadcrumb><ol class="breadcrumb bg-light p-2 rounded"><li class=breadcrumb-item><a href=/ru/ aria-label=Главная><i class="fas fa-home fa-fw"></i></a></li><li class=breadcrumb-item><a href=/ru/authors/ aria-label=Авторы>Авторы</a></li><li class="breadcrumb-item active">Kitsune Solar</li></ol></nav><div class="row row-cols-1 row-cols-xl-2 g-3"><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Настройка времени в Linux" class="d-flex align-items-center rounded overflow-hidden" href=/ru/drafts/2021/05/8bdb6bfe-c516-5eed-a9e4-05003575d210/ data-bs-toggle=modal data-bs-target=#modal-07ba1c6681e12994fa75e918b1acf95b><picture><source srcset='https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Настройка времени в Linux" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/drafts/2021/05/8bdb6bfe-c516-5eed-a9e4-05003575d210/ data-bs-toggle=modal data-bs-target=#modal-07ba1c6681e12994fa75e918b1acf95b>Настройка времени в Linux</a></h2></div></header><div class=node-body></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Настройка времени в Linux" class="d-flex align-items-center rounded overflow-hidden" href=/ru/drafts/2021/05/8bdb6bfe-c516-5eed-a9e4-05003575d210/ data-bs-toggle=modal data-bs-target=#modal-07ba1c6681e12994fa75e918b1acf95b><img class=img-fluid src="https://images.unsplash.com/photo-1501139083538-0139583c060f?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Настройка времени в Linux" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/drafts/2021/05/8bdb6bfe-c516-5eed-a9e4-05003575d210/ data-bs-toggle=modal data-bs-target=#modal-07ba1c6681e12994fa75e918b1acf95b>Настройка времени в Linux</a></h2></div></header><div class=node-body></div></div></article></div><div class="modal fade" id=modal-07ba1c6681e12994fa75e918b1acf95b tabindex=-1 aria-labelledby=modal-07ba1c6681e12994fa75e918b1acf95b-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-07ba1c6681e12994fa75e918b1acf95b-label><a href=/ru/drafts/2021/05/8bdb6bfe-c516-5eed-a9e4-05003575d210/>Настройка времени в Linux</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><h2 id=3557778931-системные-часы><a class=link-body-emphasis href=#3557778931-%d1%81%d0%b8%d1%81%d1%82%d0%b5%d0%bc%d0%bd%d1%8b%d0%b5-%d1%87%d0%b0%d1%81%d1%8b>Системные часы</a></h2><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c2de9d27ab936950878f00be7cfdc5e5><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>timedatectl status</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c2de9d27ab936950878f00be7cfdc5e5 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-8a99ada1e778cbe4685a06cc8a2481be><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>               Local time: Sat 2021-05-15 19:44:40 MSK
</span></span><span class=line><span class=cl>           Universal time: Sat 2021-05-15 16:44:40 UTC
</span></span><span class=line><span class=cl>                 RTC time: Sat 2021-05-15 16:44:40
</span></span><span class=line><span class=cl>                Time zone: Europe/Moscow (MSK, +0300)
</span></span><span class=line><span class=cl>System clock synchronized: yes
</span></span><span class=line><span class=cl>              NTP service: active
</span></span><span class=line><span class=cl>          RTC in local TZ: no</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-8a99ada1e778cbe4685a06cc8a2481be role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ab33c1a81126b22fc5523be41817c368><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>timedatectl set-ntp true</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ab33c1a81126b22fc5523be41817c368 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-38c290b0e53be304d3eaad564d6da6c4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>systemctl status systemd-timesyncd</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-38c290b0e53be304d3eaad564d6da6c4 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c9bbd135845146804168e630b29c91ce><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>systemctl <span class=nb>enable</span> systemd-timesyncd --now</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c9bbd135845146804168e630b29c91ce role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-877d9bf71d552957772739bd7a9f565a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>timedatectl list-timezones</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-877d9bf71d552957772739bd7a9f565a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-990ab5e0a7787c13680dd059c6aebb2e><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>timedatectl set-timezone Europe/Moscow</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-990ab5e0a7787c13680dd059c6aebb2e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-098c7d94ca8cfd027f10ad849fac8c57><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>timedatectl set-time <span class=s2>&#34;yyyy-MM-dd hh:mm:ss&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-098c7d94ca8cfd027f10ad849fac8c57 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-8 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-68e9a23a57f414878cd74ddf6b32976e><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>timedatectl set-time <span class=s2>&#34;2014-05-26 11:13:54&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-68e9a23a57f414878cd74ddf6b32976e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2 id=3557778931-аппаратные-часы><a class=link-body-emphasis href=#3557778931-%d0%b0%d0%bf%d0%bf%d0%b0%d1%80%d0%b0%d1%82%d0%bd%d1%8b%d0%b5-%d1%87%d0%b0%d1%81%d1%8b>Аппаратные часы</a></h2><div class="shortcode shortcode-codeblock shortcode-codeblock-9 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-908997f7bef194d2da89362b858e80e4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>hwclock --show</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-908997f7bef194d2da89362b858e80e4 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-10 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-f55304b6f7eabb9ff984c62d13d41b57><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>hwclock --systohc</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-f55304b6f7eabb9ff984c62d13d41b57 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/time/>#time</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/timezone/>#timezone</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/hwclock/>#hwclock</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-15T16:22:34Z data-fn=date-local>2021/05/15 16:22:34 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Перезагрузка и выключение Linux" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886><picture><source srcset='https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Перезагрузка и выключение Linux" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886>Перезагрузка и выключение Linux</a></h2></div></header><div class=node-body><p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я …</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Перезагрузка и выключение Linux" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886><img class=img-fluid src="https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Перезагрузка и выключение Linux" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886>Перезагрузка и выключение Linux</a></h2></div></header><div class=node-body><p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я …</p></div></div></article></div><div class="modal fade" id=modal-983478b7bdda568986722e518392c886 tabindex=-1 aria-labelledby=modal-983478b7bdda568986722e518392c886-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-983478b7bdda568986722e518392c886-label><a href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/>Перезагрузка и выключение Linux</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</p><h2 id=2661170542-halt--poweroff--reboot><a class=link-body-emphasis href=#2661170542-halt--poweroff--reboot>halt / poweroff / reboot</a></h2><p>Старые команды по управлению питанием системы. Опции у этих команд одинаковые. Отдаются команды из под пользователя <strong>root</strong>. Команда <code>halt</code> приостанавливает все функции CPU, но сам ПК остаётся включённым. Команда <code>poweroff</code> отключает питание ПК, посылая сигнал по ACPI. Команда <code>reboot</code> даёт команду системе на перезагрузку.</p><div class="shortcode shortcode-alert"><div class="alert alert-success d-flex overflow-hidden" role=alert><div class="flex-shrink-0 align-self-center"><i class="fas fa-lightbulb fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Команда <code>halt</code> в современных ОС полностью прекращает работу системы. На системах с <strong>systemd</strong> команда <code>halt</code> является устаревшей и представляет собой символьную ссылку на утилиту <code>systemctl</code>.</p></div></div></div><p>Предпочтительнее использовать команду <code>shutdown</code>, о которой я расскажу ниже.</p><h3 id=2661170542-синтаксис><a class=link-body-emphasis href=#2661170542-%d1%81%d0%b8%d0%bd%d1%82%d0%b0%d0%ba%d1%81%d0%b8%d1%81>Синтаксис</a></h3><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-e48688d390dc2482d935a80fbcb005d0><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>halt [OPTION]
</span></span><span class=line><span class=cl>poweroff [OPTION]
</span></span><span class=line><span class=cl>reboot [OPTION]</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e48688d390dc2482d935a80fbcb005d0 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h4 id=2661170542-некоторые-опции><a class=link-body-emphasis href=#2661170542-%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8>Некоторые опции</a></h4><ul><li><code>-f</code> - принудительное выполнение команды.</li><li><code>-p</code> - сообщает команде <code>halt</code> действовать как <code>poweroff</code>.</li><li><code>-w</code> - не выполнять никакие действия, только записать в журнал <code>/var/log/wtmp</code> сообщение о завершении работы.</li></ul><h2 id=2661170542-shutdown><a class=link-body-emphasis href=#2661170542-shutdown>shutdown</a></h2><p>За остановку работы ПК отвечает команда <code>shutdown</code>. Она поддерживает несколько опций, через которые задаётся определённое действие. К примеру:</p><ul><li><code>-r</code> - перезагрузка.</li><li><code>-h</code> - выключение.</li><li><code>-c</code> - отмена запланированных действий на перезагрузку или выключение.</li></ul><p>Для запланированной перезагрузки ПК через 1 минуту используется опция <code>-r</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-358d20ea7b2a837fb21e1eb03ce8fccb role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-358d20ea7b2a837fb21e1eb03ce8fccb><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r</span></span></code></pre></div></div></div></div><p>Команда <code>shutdown</code> поддерживает указание времени, когда ПК должен быть перезагружен или выключен. К примеру, перезагрузить через 5 минут:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ce11e3ad5790baf3ea315ec947b12eab role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ce11e3ad5790baf3ea315ec947b12eab><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r +5</span></span></code></pre></div></div></div></div><p>Также можно указать конкретное время для перезагрузки. Например, перезагрузить ПК в 18:30:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-59b5bb36c12f204834a14e73345308ee role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-59b5bb36c12f204834a14e73345308ee><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r 18:30</span></span></code></pre></div></div></div></div><p>Если перезагрузка или выключение уже запланированы, их можно отменить опцией <code>-c</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-cc6257cdc322abfeb757d4d919b2112c role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-cc6257cdc322abfeb757d4d919b2112c><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -c</span></span></code></pre></div></div></div></div><p>Для немедленной перезагрузки ПК, вместо времени можно ввести <code>now</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-5bda3fcc3162e12234ec9b03f7632e0e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-5bda3fcc3162e12234ec9b03f7632e0e><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r now</span></span></code></pre></div></div></div></div><p>Чтобы выключить ПК через 1 минуту, используется опция <code>-h</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e3b09ad0f8344a7340139025354ecc70 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-e3b09ad0f8344a7340139025354ecc70><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -h</span></span></code></pre></div></div></div></div><p>На этом всё, ничего сложного нет. <span class="shortcode shortcode-emoji">😄</span></p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/terminal/>#terminal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/halt/>#halt</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/poweroff/>#poweroff</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/reboot/>#reboot</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/shutdown/>#shutdown</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-12T14:20:47Z data-fn=date-local>2021/05/12 14:20:47 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Рекурсивное изменение прав доступа на файлы и директории" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f><picture><source srcset='https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Рекурсивное изменение прав доступа на файлы и директории" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f>Рекурсивное изменение прав доступа на файлы и директории</a></h2></div></header><div class=node-body><p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Рекурсивное изменение прав доступа на файлы и директории" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f><img class=img-fluid src="https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Рекурсивное изменение прав доступа на файлы и директории" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f>Рекурсивное изменение прав доступа на файлы и директории</a></h2></div></header><div class=node-body><p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p></div></div></article></div><div class="modal fade" id=modal-3df1b1b7de5b463a5859f297c951103f tabindex=-1 aria-labelledby=modal-3df1b1b7de5b463a5859f297c951103f-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-3df1b1b7de5b463a5859f297c951103f-label><a href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/>Рекурсивное изменение прав доступа на файлы и директории</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p><p>Изменение прав доступа осуществляется при помощи команды <code>chmod</code>, рекурсивное при добавлении опции <code>-R</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-2973c60b4034f55c8c44038557dd465b><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>chmod -R MODE DIR</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-2973c60b4034f55c8c44038557dd465b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ul><li><code>-R</code> - рекурсивный обход директорий и файлов.</li><li><code>MODE</code> - набор прав доступа для их установки.</li><li><code>DIR</code> - файл или директория, у которых необходимо установить определённые права доступа.</li></ul><p>В итоге, команда должна выглядеть так:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-e8827b16ed172c8a8669f2cb75e1a65e><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>chmod -R <span class=m>755</span> /var/www/html</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e8827b16ed172c8a8669f2cb75e1a65e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Но, стоит учитывать, что таким образом директории и файлы примут одинаковые права доступа. Чтобы избежать этого, можно воспользоваться командой <code>find</code>, которая отфильтрует директории и файлы друг от друга:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-3d6d285e97d8918d638ef18dee73e657><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type d -exec chmod <span class=m>755</span> <span class=o>{}</span> <span class=se>\;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-3d6d285e97d8918d638ef18dee73e657 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-3d86bc96cc0e447554565968585568e8><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type f -exec chmod <span class=m>644</span> <span class=o>{}</span> <span class=se>\;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-3d86bc96cc0e447554565968585568e8 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Команда <code>find</code> ищет директории (<code>-type d</code>) и файлы (<code>-type f</code>) и скармливает их команде <code>chmod</code>, а та, в свою очередь, уже расставляет права доступа. При использовании <code>-exec</code>, <code>chmod</code> выполняется для каждого найденного элемента поочерёдно. Можно оптимизировать и записать с использованием <code>xargs</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-17b4be1bbf5424d4e68b6787fc13749f><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type d -print0 <span class=p>|</span> xargs -0 chmod <span class=m>755</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-17b4be1bbf5424d4e68b6787fc13749f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fc7eb920ce816699a293c96417947240><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type f -print0 <span class=p>|</span> xargs -0 chmod <span class=m>644</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fc7eb920ce816699a293c96417947240 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>При <code>xargs</code>, <code>chmod</code> выполняется сразу для нескольких записей одновременно, как сообщает <strong>Daniel Miessler</strong>:</p><div class="shortcode shortcode-quote"><figure><blockquote class=blockquote><p>This is where -exec breaks down and xargs shows its superiority. When you use -exec to do the work you run a separate instance of the called program for each element of input. So if find comes up with 10,000 results, you run exec 10,000 times. With xargs, you build up the input into bundles and run them through the command as few times as possible, which is often just once. When dealing with hundreds or thousands of elements this is a big win for xargs.</p></blockquote><figcaption class=blockquote-footer><cite><a href=https://danielmiessler.com/blog/linux-xargs-vs-exec/ target=_blank rel="noopener nofollow">Daniel Miessler</a></cite></figcaption></figure></div><p>Если необходимо запустить рекурсивное изменение прав доступа начиная с текущей директории, то <code>/var/www/html</code> необходимо поменять на точку:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ebde3e30380458e576100093076b9500><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find . -type d -print0 <span class=p>|</span> xargs -0 chmod <span class=m>755</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ebde3e30380458e576100093076b9500 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-cc72259e328a767e7db088f21b467b9a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find . -type f -print0 <span class=p>|</span> xargs -0 chmod <span class=m>644</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-cc72259e328a767e7db088f21b467b9a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/terminal/>#terminal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/chmod/>#chmod</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/find/>#find</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-09T17:15:26Z data-fn=date-local>2021/05/09 17:15:26 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Разнообразие команд ls*" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715><picture><source srcset='https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Разнообразие команд ls*" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715>Разнообразие команд ls*</a></h2></div></header><div class=node-body><p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве …</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Разнообразие команд ls*" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715><img class=img-fluid src="https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=bottom&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Разнообразие команд ls*" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715>Разнообразие команд ls*</a></h2></div></header><div class=node-body><p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве …</p></div></div></article></div><div class="modal fade" id=modal-bb7c3fe8a315f8b29387dd9ec5094715 tabindex=-1 aria-labelledby=modal-bb7c3fe8a315f8b29387dd9ec5094715-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-bb7c3fe8a315f8b29387dd9ec5094715-label><a href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/>Разнообразие команд ls*</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве дистрибутивов Linux.</p><p>Знаю, что есть <code>lsscsi</code>, <code>lsusb</code> и т.п., которые появляются в системе с установкой дополнительных пакетов, но я подобные команды рассматривать не стал. Хотя, по возможности, статью буду дополнять.</p><h2 id=2423782896-ls><a class=link-body-emphasis href=#2423782896-ls>ls</a></h2><p>Команда позволяет вывести список директорий и файлов в текущем каталоге.</p><h3 id=2423782896-некоторые-опции><a class=link-body-emphasis href=#2423782896-%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8>Некоторые опции</a></h3><ul><li><code>-l</code> - использовать длинный формат отображения.</li><li><code>-S</code> - сортировать по размеру файла.</li><li><code>-t</code> - сортировать по времени модификации.</li><li><code>-a</code> - показать ВСЕ файлы, в том числе скрытые.</li><li><code>-R</code> - рекурсивное отображение директорий и файлов в них.</li><li><code>-h</code> - отображение размеров файлов в человеко-читаемом формате.</li><li><code>--hide='*.txt' -l</code> - игнорировать файлы с форматом <code>.txt</code>.</li></ul><h2 id=2423782896-lscpu><a class=link-body-emphasis href=#2423782896-lscpu>lscpu</a></h2><p>Отображение доступной информации об установленном процессоре.</p><h3 id=2423782896-некоторые-опции-1><a class=link-body-emphasis href=#2423782896-%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8-1>Некоторые опции</a></h3><ul><li><code>-a</code> - показать ВСЕ CPU, как включённые, так и отключённые.</li></ul><h3 id=2423782896-пример-использования><a class=link-body-emphasis href=#2423782896-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f>Пример использования</a></h3><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-812fe51e3f34b8b9b30c788a3bac556a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-812fe51e3f34b8b9b30c788a3bac556a><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lscpu
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Architecture:                    x86_64
</span></span><span class=line><span class=cl>CPU op-mode<span class=o>(</span>s<span class=o>)</span>:                  32-bit, 64-bit
</span></span><span class=line><span class=cl>Byte Order:                      Little Endian
</span></span><span class=line><span class=cl>Address sizes:                   <span class=m>39</span> bits physical, <span class=m>48</span> bits virtual
</span></span><span class=line><span class=cl>CPU<span class=o>(</span>s<span class=o>)</span>:                          <span class=m>12</span>
</span></span><span class=line><span class=cl>On-line CPU<span class=o>(</span>s<span class=o>)</span> list:             0-11
</span></span><span class=line><span class=cl>Thread<span class=o>(</span>s<span class=o>)</span> per core:              <span class=m>2</span>
</span></span><span class=line><span class=cl>Core<span class=o>(</span>s<span class=o>)</span> per socket:              <span class=m>6</span>
</span></span><span class=line><span class=cl>Socket<span class=o>(</span>s<span class=o>)</span>:                       <span class=m>1</span>
</span></span><span class=line><span class=cl>NUMA node<span class=o>(</span>s<span class=o>)</span>:                    <span class=m>1</span>
</span></span><span class=line><span class=cl>Vendor ID:                       GenuineIntel
</span></span><span class=line><span class=cl>CPU family:                      <span class=m>6</span>
</span></span><span class=line><span class=cl>Model:                           <span class=m>165</span>
</span></span><span class=line><span class=cl>Model name:                      Intel<span class=o>(</span>R<span class=o>)</span> Core<span class=o>(</span>TM<span class=o>)</span> i5-10400 CPU @ 2.90GHz
</span></span><span class=line><span class=cl>Stepping:                        <span class=m>5</span>
</span></span><span class=line><span class=cl>CPU MHz:                         2900.000
</span></span><span class=line><span class=cl>CPU max MHz:                     4300.0000
</span></span><span class=line><span class=cl>CPU min MHz:                     800.0000
</span></span><span class=line><span class=cl>BogoMIPS:                        5799.77
</span></span><span class=line><span class=cl>L1d cache:                       <span class=m>192</span> KiB
</span></span><span class=line><span class=cl>L1i cache:                       <span class=m>192</span> KiB
</span></span><span class=line><span class=cl>L2 cache:                        1.5 MiB
</span></span><span class=line><span class=cl>L3 cache:                        <span class=m>12</span> MiB</span></span></code></pre></div></div></div></div><h2 id=2423782896-lspci><a class=link-body-emphasis href=#2423782896-lspci>lspci</a></h2><p>Отображение информации по шине PCI и подключённых к ней устройствах.</p><h3 id=2423782896-пример-использования-1><a class=link-body-emphasis href=#2423782896-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-1>Пример использования</a></h3><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-94bfd291079fc85f4453d72a4d64a78b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-94bfd291079fc85f4453d72a4d64a78b><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lspci
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>00:00.0 Host bridge: Intel Corporation Comet Lake-S 6c Host Bridge/DRAM Controller <span class=o>(</span>rev 05<span class=o>)</span>
</span></span><span class=line><span class=cl>00:01.0 PCI bridge: Intel Corporation 6th-10th Gen Core Processor PCIe Controller <span class=o>(</span>x16<span class=o>)</span> <span class=o>(</span>rev 05<span class=o>)</span>
</span></span><span class=line><span class=cl>00:14.0 USB controller: Intel Corporation Comet Lake USB 3.1 xHCI Host Controller
</span></span><span class=line><span class=cl>00:14.2 RAM memory: Intel Corporation Comet Lake PCH Shared SRAM
</span></span><span class=line><span class=cl>00:14.3 Network controller: Intel Corporation Comet Lake PCH CNVi WiFi
</span></span><span class=line><span class=cl>00:15.0 Serial bus controller <span class=o>[</span>0c80<span class=o>]</span>: Intel Corporation Comet Lake PCH Serial IO I2C Controller <span class=c1>#0</span>
</span></span><span class=line><span class=cl>00:15.1 Serial bus controller <span class=o>[</span>0c80<span class=o>]</span>: Intel Corporation Comet Lake PCH Serial IO I2C Controller <span class=c1>#1</span>
</span></span><span class=line><span class=cl>00:16.0 Communication controller: Intel Corporation Comet Lake HECI Controller
</span></span><span class=line><span class=cl>00:17.0 SATA controller: Intel Corporation Comet Lake SATA AHCI Controller
</span></span><span class=line><span class=cl>00:1d.0 PCI bridge: Intel Corporation Comet Lake PCI Express Root Port <span class=c1>#9 (rev f0)</span>
</span></span><span class=line><span class=cl>00:1f.0 ISA bridge: Intel Corporation Device <span class=m>0684</span>
</span></span><span class=line><span class=cl>00:1f.3 Audio device: Intel Corporation Comet Lake PCH cAVS
</span></span><span class=line><span class=cl>00:1f.4 SMBus: Intel Corporation Comet Lake PCH SMBus Controller
</span></span><span class=line><span class=cl>00:1f.5 Serial bus controller <span class=o>[</span>0c80<span class=o>]</span>: Intel Corporation Comet Lake PCH SPI Controller
</span></span><span class=line><span class=cl>00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection <span class=o>(</span>11<span class=o>)</span> I219-V
</span></span><span class=line><span class=cl>01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. <span class=o>[</span>AMD/ATI<span class=o>]</span> Baffin <span class=o>[</span>Radeon RX <span class=m>550</span> 640SP / RX 560/560X<span class=o>]</span> <span class=o>(</span>rev cf<span class=o>)</span>
</span></span><span class=line><span class=cl>01:00.1 Audio device: Advanced Micro Devices, Inc. <span class=o>[</span>AMD/ATI<span class=o>]</span> Baffin HDMI/DP Audio <span class=o>[</span>Radeon RX <span class=m>550</span> 640SP / RX 560/560X<span class=o>]</span></span></span></code></pre></div></div></div></div><h2 id=2423782896-lsblk><a class=link-body-emphasis href=#2423782896-lsblk>lsblk</a></h2><p>Отображение информации по блочным устройствам.</p><h3 id=2423782896-пример-использования-2><a class=link-body-emphasis href=#2423782896-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-2>Пример использования</a></h3><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-9c04712a51e9914c411708c5d90a1389 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-9c04712a51e9914c411708c5d90a1389><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsblk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
</span></span><span class=line><span class=cl>sda      8:0    <span class=m>0</span> 232.9G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>├─sda1   8:1    <span class=m>0</span>   200M  <span class=m>0</span> part /boot/efi
</span></span><span class=line><span class=cl>├─sda2   8:2    <span class=m>0</span>     4G  <span class=m>0</span> part /boot
</span></span><span class=line><span class=cl>├─sda3   8:3    <span class=m>0</span>    64G  <span class=m>0</span> part /
</span></span><span class=line><span class=cl>├─sda4   8:4    <span class=m>0</span>    32G  <span class=m>0</span> part <span class=o>[</span>SWAP<span class=o>]</span>
</span></span><span class=line><span class=cl>├─sda5   8:5    <span class=m>0</span>    16G  <span class=m>0</span> part /tmp
</span></span><span class=line><span class=cl>└─sda6   8:6    <span class=m>0</span> 116.7G  <span class=m>0</span> part /home
</span></span><span class=line><span class=cl>sdb      8:16   <span class=m>0</span> 465.8G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─sdb1   8:17   <span class=m>0</span> 465.8G  <span class=m>0</span> part /home/storage.01
</span></span><span class=line><span class=cl>sdc      8:32   <span class=m>1</span> 119.5G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─sdc1   8:33   <span class=m>1</span> 119.5G  <span class=m>0</span> part /run/media/user-0001/USB01
</span></span><span class=line><span class=cl>sdd      8:48   <span class=m>1</span>  59.8G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>├─sdd1   8:49   <span class=m>1</span>  59.7G  <span class=m>0</span> part /run/media/user-0001/Ventoy
</span></span><span class=line><span class=cl>└─sdd2   8:50   <span class=m>1</span>    32M  <span class=m>0</span> part /run/media/user-0001/VTOYEFI
</span></span><span class=line><span class=cl>zram0  252:0    <span class=m>0</span>     4G  <span class=m>0</span> disk <span class=o>[</span>SWAP<span class=o>]</span></span></span></code></pre></div></div></div></div><h2 id=2423782896-lsmod><a class=link-body-emphasis href=#2423782896-lsmod>lsmod</a></h2><p>Отображение модулей ядра, загруженных в системе.</p><h3 id=2423782896-пример-использования-3><a class=link-body-emphasis href=#2423782896-%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-3>Пример использования</a></h3><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-9a7ad4042dd363ebfa3a910778c14e76 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-9a7ad4042dd363ebfa3a910778c14e76><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsmod
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Module                  Size  Used by
</span></span><span class=line><span class=cl>exfat                  <span class=m>81920</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>f2fs                  <span class=m>700416</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>uas                    <span class=m>32768</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>usb_storage            <span class=m>81920</span>  <span class=m>4</span> uas
</span></span><span class=line><span class=cl>snd_seq_dummy          <span class=m>16384</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>rfcomm                 <span class=m>90112</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>snd_hrtimer            <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>xt_CHECKSUM            <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>xt_MASQUERADE          <span class=m>20480</span>  <span class=m>3</span>
</span></span><span class=line><span class=cl>xt_conntrack           <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>ipt_REJECT             <span class=m>16384</span>  <span class=m>2</span>
</span></span><span class=line><span class=cl>nft_compat             <span class=m>20480</span>  <span class=m>16</span>
</span></span><span class=line><span class=cl>nf_nat_tftp            <span class=m>16384</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>nft_objref             <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>nf_conntrack_tftp      <span class=m>20480</span>  <span class=m>3</span> nf_nat_tftp
</span></span><span class=line><span class=cl>nft_counter            <span class=m>16384</span>  <span class=m>33</span>
</span></span><span class=line><span class=cl>tun                    <span class=m>57344</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>bridge                <span class=m>294912</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>stp                    <span class=m>16384</span>  <span class=m>1</span> bridge
</span></span><span class=line><span class=cl>llc                    <span class=m>16384</span>  <span class=m>2</span> bridge,stp</span></span></code></pre></div></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/terminal/>#terminal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/ls/>#ls</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-09T13:44:05Z data-fn=date-local>2021/05/09 13:44:05 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Синхронизация репозитория от GitHub к GitLab" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e><picture><source srcset='https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Синхронизация репозитория от GitHub к GitLab" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e>Синхронизация репозитория от GitHub к GitLab</a></h2></div></header><div class=node-body><p>Понадобилось мне на днях синхронизировать некоторые свои репозитории между GitHub и GitLab. Сам GitLab имеет встроенные средства зеркалирования репозиториев от себя к другому git-хранилищу. GitHub …</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Синхронизация репозитория от GitHub к GitLab" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e><img class=img-fluid src="https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Синхронизация репозитория от GitHub к GitLab" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e>Синхронизация репозитория от GitHub к GitLab</a></h2></div></header><div class=node-body><p>Понадобилось мне на днях синхронизировать некоторые свои репозитории между GitHub и GitLab. Сам GitLab имеет встроенные средства зеркалирования репозиториев от себя к другому git-хранилищу. GitHub …</p></div></div></article></div><div class="modal fade" id=modal-4de6fb1edb7c9dabf530865208229b1e tabindex=-1 aria-labelledby=modal-4de6fb1edb7c9dabf530865208229b1e-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-4de6fb1edb7c9dabf530865208229b1e-label><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/>Синхронизация репозитория от GitHub к GitLab</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Понадобилось мне на днях синхронизировать некоторые свои репозитории между GitHub и GitLab. Сам GitLab имеет встроенные средства зеркалирования репозиториев от себя к другому git-хранилищу. GitHub же не обладает такой функцией. Но эту функцию можно воссоздать при помощи GitHub Actions.</p><p>Для начала необходимо создать &ldquo;секреты&rdquo; с такими переменными:</p><ul><li><code>GITLAB_SYNC_REPO_URL</code> - ссылка на пустой репозиторий GitLab.</li><li><code>GITLAB_SYNC_USER_NAME</code> - имя пользователя GitLab.</li><li><code>GITLAB_SYNC_USER_TOKEN</code> - токен пользователя GitLab. Токен создаётся в настройках аккаунта GitLab.</li></ul><p>Далее, в корне репозитория нужно создать файл <code>.github/workflows/gitlab-sync.yml</code> со следующим содержанием:</p><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>gitlab-sync.yml</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-69cc55ae68b2e7481b53deba8b0e2dee role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=gitlab-sync.yml download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=gitlab-sync.yml target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-69cc55ae68b2e7481b53deba8b0e2dee><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitLab Sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>delete</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Git Repo Sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wangchucheng/git-repo-sync@v0.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Such as https://github.com/wangchucheng/git-repo-sync.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target-url</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITLAB_SYNC_REPO_URL }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Such as wangchucheng</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target-username</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITLAB_SYNC_USER_NAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># You can store token in your project&#39;s &#39;Setting &gt; Secrets&#39; and reference the name here. Such as ${{ secrets.ACCESS_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target-token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITLAB_SYNC_USER_TOKEN }}</span></span></span></code></pre></div></div></div></div><p>На этом всё. Теперь при коммите в репозиторий, GutHub будет запускать Action и автоматически синхронизировать изменения с репозиторием на GitLab.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/git/>#git</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/github/>#github</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/gitlab/>#gitlab</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/sync/>#sync</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/actions/>#actions</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-08T21:06:18Z data-fn=date-local>2021/05/08 21:06:18 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Monero Unit" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636><picture><source srcset='https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Monero Unit" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636>Monero Unit</a></h2></div></header><div class=node-body><p>Бум майнинга. Скупают видеокарты, ноутбуки. Будут майнить на тостерах и стиральных машинах. Решил попробовать <strong>Monero</strong>. Задача была запустить майнер в фоне, желательно в отдельной сессии. И чтобы …</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Monero Unit" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636><img class=img-fluid src="https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Monero Unit" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636>Monero Unit</a></h2></div></header><div class=node-body><p>Бум майнинга. Скупают видеокарты, ноутбуки. Будут майнить на тостерах и стиральных машинах. Решил попробовать <strong>Monero</strong>. Задача была запустить майнер в фоне, желательно в отдельной сессии. И чтобы …</p></div></div></article></div><div class="modal fade" id=modal-b411400899711c8f5fb25e41c727c636 tabindex=-1 aria-labelledby=modal-b411400899711c8f5fb25e41c727c636-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-b411400899711c8f5fb25e41c727c636-label><a href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/>Monero Unit</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Бум майнинга. Скупают видеокарты, ноутбуки. Будут майнить на тостерах и стиральных машинах. Решил попробовать <strong>Monero</strong>. Задача была запустить майнер в фоне, желательно в отдельной сессии. И чтобы запускался он каждый раз при старте машины.</p><p>Написал небольшой <a title href=https://github.com/KitsuneSolar/xmrig-systemd target=_blank rel="noopener noreferrer nofollow">systemd unit</a> для майнера <a title href="https://github.com/search?q=xmrig" target=_blank rel="noopener noreferrer nofollow">xmrig</a>. Запускается от имени <code>root</code> в отдельной сессии <strong>screen</strong>, но можно запускать от любого пользователя: в командах запуска и остановки необходимо вместо <code>root</code> прописывать имя другого пользователя.</p><h2 id=459555987-установка><a class=link-body-emphasis href=#459555987-%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0>Установка</a></h2><ol><li>Установить <code>screen</code>.</li><li>Поместить в директорию <code>/etc/systemd/system</code> файл <code>xmrig@.service</code>.</li><li>В файле <code>xmrig@.service</code> задать в параметре <code>ExecStart</code> путь до <code>xmrig.run.sh</code>.</li></ol><h2 id=459555987-использование><a class=link-body-emphasis href=#459555987-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5>Использование</a></h2><ul><li>Запуск:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-22d5ecf50561d5b1a09ccfd4ea23e299 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-22d5ecf50561d5b1a09ccfd4ea23e299><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> --now xmrig@root</span></span></code></pre></div></div></div></div><ul><li>Остановка:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a5e01d529ac085a20bf57ec78e333e64 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-a5e01d529ac085a20bf57ec78e333e64><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl disable --now xmrig@root</span></span></code></pre></div></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/monero/>#monero</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/systemd/>#systemd</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-03-05T11:03:20Z data-fn=date-local>2021/03/05 11:03:20 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Генератор идентификаторов расширений" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4><picture><source srcset='https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Генератор идентификаторов расширений" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4>Генератор идентификаторов расширений</a></h2></div></header><div class=node-body><p>В свободное от работы время я балуюсь разработкой небольших модулей и расширений для различных CMF, и некоторые CMF требуют использовать идентификаторы в расширениях.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Генератор идентификаторов расширений" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4><img class=img-fluid src="https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Генератор идентификаторов расширений" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4>Генератор идентификаторов расширений</a></h2></div></header><div class=node-body><p>В свободное от работы время я балуюсь разработкой небольших модулей и расширений для различных CMF, и некоторые CMF требуют использовать идентификаторы в расширениях.</p></div></div></article></div><div class="modal fade" id=modal-2e3d4d565b81908d0813d84ed4d8e6b4 tabindex=-1 aria-labelledby=modal-2e3d4d565b81908d0813d84ed4d8e6b4-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-2e3d4d565b81908d0813d84ed4d8e6b4-label><a href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/>Генератор идентификаторов расширений</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>В свободное от работы время я балуюсь разработкой небольших модулей и расширений для различных CMF, и некоторые CMF требуют использовать идентификаторы в расширениях.</p><p>Я стараюсь как то &ldquo;обезличить&rdquo; и унифицировать идентификаторы. Поэтому, для генерации идентификаторов использую очень простой BASH-скрипт. В идентификатор кодируется текущее время в формате UNIX с наносекундами.</p><p>Пример кодирования:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-348621f5dc4f60c58312f076f0db335a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;ext_</span><span class=k>$(</span>date +%s%N <span class=p>|</span> sha512sum <span class=p>|</span> fold -w <span class=m>8</span> <span class=p>|</span> head -n 1<span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-348621f5dc4f60c58312f076f0db335a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Вывод: <code>ext_96824896</code></p><p>Если необходимо, можно конвертировать в верхний регистр:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-dc36ea7a40efa85c325068afb9640b2a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;EXT_</span><span class=k>$(</span>date +%s%N <span class=p>|</span> sha512sum <span class=p>|</span> fold -w <span class=m>8</span> <span class=p>|</span> head -n <span class=m>1</span> <span class=p>|</span> tr <span class=s1>&#39;[:lower:]&#39;</span> <span class=s1>&#39;[:upper:]&#39;</span><span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-dc36ea7a40efa85c325068afb9640b2a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Вывод: <code>EXT_950E60E1</code></p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/cms/>#cms</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cmf/>#cmf</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/php/>#php</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-08-02T21:01:49Z data-fn=date-local>2020/08/02 21:01:49 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Конструирование собственной системы ВКС" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8><picture><source srcset='https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Конструирование собственной системы ВКС" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8>Конструирование собственной системы ВКС</a></h2></div></header><div class=node-body><p>Крупные компании покупают дорогие наборы техники для создания систем ВКС (видео-конференц-связь), но для небольших организаций можно собрать такую систему &ldquo;на коленке&rdquo;.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Конструирование собственной системы ВКС" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8><img class=img-fluid src="https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Конструирование собственной системы ВКС" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8>Конструирование собственной системы ВКС</a></h2></div></header><div class=node-body><p>Крупные компании покупают дорогие наборы техники для создания систем ВКС (видео-конференц-связь), но для небольших организаций можно собрать такую систему &ldquo;на коленке&rdquo;.</p></div></div></article></div><div class="modal fade" id=modal-fdd2141e7ff4850eb3b85b151183c4e8 tabindex=-1 aria-labelledby=modal-fdd2141e7ff4850eb3b85b151183c4e8-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-fdd2141e7ff4850eb3b85b151183c4e8-label><a href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/>Конструирование собственной системы ВКС</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Крупные компании покупают дорогие наборы техники для создания систем ВКС (видео-конференц-связь), но для небольших организаций можно собрать такую систему &ldquo;на коленке&rdquo;.</p><h2 id=3789873191-оборудование><a class=link-body-emphasis href=#3789873191-%d0%be%d0%b1%d0%be%d1%80%d1%83%d0%b4%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5>Оборудование</a></h2><p>Для конструирования понадобятся следующие компоненты:</p><ul><li>Веб-камера высокого разрешения.</li><li>Два и более микрофона (зависит от размера комнаты для переговоров) с <strong>круговой диаграммой направленности</strong>.</li><li>Стационарный компьютер или ноутбук, который будет использоваться как <strong>передатчик</strong> потока.</li><li>Программа создания виртуальных аудио-кабелей <a title href=https://vac.muzychenko.net/ target=_blank rel="noopener noreferrer nofollow">VAC</a>.</li></ul><p>На момент публикации статьи я выбрал следующие компоненты, доступные на рынке:</p><ul><li>Веб-камера <a title href=https://www.logitech.com/en-us/product/hd-webcam-c615 target=_blank rel="noopener noreferrer nofollow">Logitech WebCam C615</a>.</li><li>Два настольных микрофона <a title href=https://www.maono.com/products/usb-microphone-bm10/ target=_blank rel="noopener noreferrer nofollow">Maono AU-BM10</a>.</li></ul><div class="shortcode shortcode-imgur float- me-3"><figure class=figure><a class=d-inline-block href=https://i.imgur.com/Yhim15t.jpeg rel="noopener nofollow" data-fancybox=gallery data-caption><picture><img class="figure-img img-thumbnail" src=https://i.imgur.com/Yhim15tm.jpeg alt=Yhim15tm.jpeg loading=lazy></picture></a></figure></div><p>С выбором остальных компонентов, думаю, проблем возникнуть не должно. Единственное, что могу посоветовать не брать ПК со слишком слабым процессором, потому что виртуальные кабели будут так же забирать часть процессорного времени вместе с остальными программами. И, возможно, понадобится вести записи конференций - это тоже требует процессорного времени.</p><p>Надо быть внимательным с количеством доступных разъёмов USB, потому как выбранные компоненты подключаются при помощи коннекторов USB и количество портов может банально не хватить. Если видно, что разъёмов не хватает, необходимо докупить активный (желательно) <strong>USB-концентратор</strong>.</p><h2 id=3789873191-подключение-и-настройка><a class=link-body-emphasis href=#3789873191-%d0%bf%d0%be%d0%b4%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b8-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0>Подключение и настройка</a></h2><p>При конференции используется два и более микрофонов. Микрофоны должны быть с круговой диаграммой направленности, то есть они должны улавливать все звуки в помещении, независимо от местоположения источника звука.</p><p>Сборка всех компонентов не должна составить труда. Технический персонал любой организации справится с этим без лишних проблем. Нетривиальной задачей является подключение двух независимых микрофонов к ПК, надо заставить работать их синхронно. Как раз в этом поможет проброс виртуальных кабелей <a title href=https://vac.muzychenko.net/ target=_blank rel="noopener noreferrer nofollow">VAC</a>.</p><p>После установки VAC необходимо указать двум физическим микрофонам передавать поток на один <em>виртуальный интерфейс</em>. Этот виртуальный интерфейс будет выходной точной для приложений. Делается это так:</p><ul><li>Пуск > Выполнить <code>mmsys.cpl sounds</code> > вкладка <strong>Запись</strong>.</li><li>Открыть физический микрофон, перейти на вкладку <strong>Прослушать</strong>.</li><li>Поставить галочку <strong>Прослушать с данного устройства</strong>.</li><li>В параметре <strong>Воспроизводить с данного устройства</strong> указать необходимый <em>виртуальный интерфейс</em>.</li></ul><h2 id=3789873191-проверка><a class=link-body-emphasis href=#3789873191-%d0%bf%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0>Проверка</a></h2><p>Проверка правильности настроек производится очень просто. Необходимо, чтобы индикаторы физических микрофонов и виртуального интерфейса на вкладке <strong>Запись</strong> работали синхронно. Таким образом, видно, что физические микрофоны принимают звук и передают на виртуальный интерфейс.</p><h2 id=3789873191-заключение><a class=link-body-emphasis href=#3789873191-%d0%b7%d0%b0%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5>Заключение</a></h2><p>Как видно, больших денежных вложений в организацию системы ВКС не требуется. Нужны только понимание логики работы аудио / видео потоков и смекалка. :smile:</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/video/>#video</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/conference/>#conference</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/polycom/>#polycom</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/%D0%B2%D0%BA%D1%81/>#вкс</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/skype/>#skype</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/discord/>#discord</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/zoom/>#zoom</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-08-01T22:44:46Z data-fn=date-local>2020/08/01 22:44:46 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Windows 10: Настройка через групповые политики" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225><picture><source srcset='https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Windows 10: Настройка через групповые политики" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225>Windows 10: Настройка через групповые политики</a></h2></div></header><div class=node-body><p>Windows 10 до сих пор вызывает противоречивые чувства: иногда её поведение предсказуемо, иногда какое-нибудь обновление ломает систему, удаляя данные пользователя. И чтобы как-то улучшить положение …</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Windows 10: Настройка через групповые политики" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225><img class=img-fluid src="https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Windows 10: Настройка через групповые политики" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225>Windows 10: Настройка через групповые политики</a></h2></div></header><div class=node-body><p>Windows 10 до сих пор вызывает противоречивые чувства: иногда её поведение предсказуемо, иногда какое-нибудь обновление ломает систему, удаляя данные пользователя. И чтобы как-то улучшить положение …</p></div></div></article></div><div class="modal fade" id=modal-2b584755f3f9c38340233d15cabf0225 tabindex=-1 aria-labelledby=modal-2b584755f3f9c38340233d15cabf0225-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-2b584755f3f9c38340233d15cabf0225-label><a href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/>Windows 10: Настройка через групповые политики</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Windows 10 до сих пор вызывает противоречивые чувства: иногда её поведение предсказуемо, иногда какое-нибудь обновление ломает систему, удаляя данные пользователя. И чтобы как-то улучшить положение дел и усмирить некоторые функции, я использую групповые политики в настройке операционной системы (ОС).</p><p>Сразу скажу, что мне нравится английский текст в интерфейсах. Поэтому все ОС у меня с интерфейсом в английской локализации, но я постараюсь максимально подробно описывать приведённые здесь групповые политики. Я использую Windows 10 в версии Enterprise, и не стоит забывать, что политики могут отличаться между различными версиями ОС.</p><p>Как открыть редактор групповых политик? Очень просто: необходимо нажать сочетание клавиш <span class="shortcode shortcode-key d-inline-block"><kbd>WIN + R</kbd></span>, откроется окно команды &ldquo;Выполнить&rdquo; и в текстовом поле набрать gpedit.msc и нажать <span class="shortcode shortcode-key d-inline-block"><kbd>OK</kbd></span>.</p><ul><li><span class="shortcode shortcode-emoji">✅</span> - включить (разрешить).</li><li><span class="shortcode shortcode-emoji">⛔</span> - отключить (запретить).</li></ul><h2 id=4280965096-computer-details><a class=link-body-emphasis href=#4280965096-computer-details>Computer Details</a></h2><p>Секция отвечает за корректировку групповых политик компьютера в целом.</p><h3 id=4280965096-systemdevice-installation><a class=link-body-emphasis href=#4280965096-systemdevice-installation>System/Device Installation</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Prevent device metadata retrieval from the Internet</strong><br>Запретить использование мета-информации для подключённых устройств из Интернета. Политика отвечает за отображение индивидуальных значков принтеров, сканеров и такое прочее. Для отображения подобных значков, Windows лезет в Интернет и загружает мета-данные. Мне подобное не нужно, поэтому я включаю политику (включить = запретить).</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Specify search order for device driver source locations</strong><br>Специальный порядок источников для поиска драйверов в них. А вот эта политика отвечает за автоматическую установку драйверов на видеокарты, звуковые карты, различную периферию и прочее. Здесь можно указать ОС в каких источниках искать драйвера, приложения и прочее. Меня всегда раздражало, когда Windows при подключении к Интернету устанавливает устаревшие драйвера, например, на видеокарту. Зачем, когда я могу скачать свежие версии с сайта производителя? Включаю политику и выбираю опцию, указанную ниже.<ul><li><em>Do not search Windows Update</em><br>Не использовать Windows Update для поиска драйверов.</li></ul></li></ul><h3 id=4280965096-windows-componentsautoplay-policies><a class=link-body-emphasis href=#4280965096-windows-componentsautoplay-policies>Windows Components/AutoPlay Policies</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <em>Turn off Autoplay</em><br>Отключить автоматический запуск. Политика позволяет отключить запуск подходящего приложения при втыкании, например, флешки с музыкой или картинками. Ранее (да и сейчас, наверно) таким способом любили запускаться злые вирусы. Включаю политику и выбираю опцию, указанную ниже.<ul><li>All drives<br>У меня отключено на всех устройствах.</li></ul></li></ul><h3 id=4280965096-windows-componentscloud-content><a class=link-body-emphasis href=#4280965096-windows-componentscloud-content>Windows Components/Cloud Content</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not show Windows tips</strong><br>Не показывать подсказки Windows. Лично мне подсказки ОС не нужны. Я как нибудь без них обойдусь. Включаю политику.</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off Microsoft consumer experiences</strong><br>Выключить Microsoft Consumer Experience. Компания Microsoft своими рекомендациями навязывает установку таких приложений, как Candy Crush Soda Saga, FarmVille 2, Flipboard, Twitter, Photoshop Express, Minecraft и т.д. Мне они не нужны да и мне чуждо такое навязывание. Неприятно. Включаю политику, тем самым отключая подобную рекламу.</li></ul><h3 id=4280965096-windows-componentsdata-collection-and-preview-builds><a class=link-body-emphasis href=#4280965096-windows-componentsdata-collection-and-preview-builds>Windows Components/Data Collection and Preview Builds</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Allow Telemetry</strong><br>Разрешить телеметрию. Полностью телеметрию отключить всё равно не получится, что бы там не писали в Интернете. Поэтому, я включаю телеметрию и устанавливаю уровень сбора информации.<ul><li><em>0 - Security [Enterprise Only]</em><br>Ставлю нулевой уровень. Собирать данные, необходимые для осуществления безопасности. Но это только для операционной системы класса Enterprise.</li></ul></li></ul><h3 id=4280965096-windows-componentsdesktop-gadgets><a class=link-body-emphasis href=#4280965096-windows-componentsdesktop-gadgets>Windows Components/Desktop Gadgets</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off desktop gadgets</strong><br>Выключить гаджеты рабочего стола. Актуально для Windows Vista / 7. В Windows 10 гаджетов не видел. Может потому что не использовал их никогда. Но политику включаю.</li></ul><h3 id=4280965096-windows-componentsmicrosoft-defender-antivirus><a class=link-body-emphasis href=#4280965096-windows-componentsmicrosoft-defender-antivirus>Windows Components/Microsoft Defender Antivirus</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off Microsoft Defender Antivirus</strong><br>Отключить Microsoft Defender Antivirus. Я отключаю себе антивирус. Головы хватает, чтобы не подхватить вирусы. Использую только ограниченный проверенный набор программ. При этом, если необходимо запустить что-то экзотическое, у меня всегда развёрнута виртуальная машина в Hyper-V.</li></ul><h3 id=4280965096-windows-componentsonedrive><a class=link-body-emphasis href=#4280965096-windows-componentsonedrive>Windows Components/OneDrive</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Prevent the usage of OneDrive for file storage</strong><br>Запретить использование OneDrive как файловое хранилище. Мне не нужен OneDrive. Поэтому я запрещаю использование OneDrive в качестве хранилища файлов.</li></ul><h3 id=4280965096-windows-componentssearch><a class=link-body-emphasis href=#4280965096-windows-componentssearch>Windows Components/Search</a></h3><ul><li><span class="shortcode shortcode-emoji">⛔</span> <strong>Allow Cloud Search</strong><br>Разрешить использование облачного поиска. Мне не нужен в ОС поиск, который будет искать по различным сайтам. Только локальный поиск. Поэтому, я запрещаю политику.</li><li><span class="shortcode shortcode-emoji">⛔</span> <strong>Allow Cortana</strong><br>Разрешить Cortana. Cortana мне тоже не нужна. Мне не о чём с ней поговорить. Поэтому, я запрещаю Cortana.</li></ul><h3 id=4280965096-windows-componentsstore><a class=link-body-emphasis href=#4280965096-windows-componentsstore>Windows Components/Store</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Disable all apps from Microsoft Store</strong><br>Отключить все приложения из Microsoft Store. Для выпиливания приложений, установленных из Microsoft Store в Интернете гуляет скрипт на PowerShell. Но мне лень его использовать, да и мало ли что&mldr; Поэтому, я просто отключаю подобные приложения через групповые политики. Они остаются в меню Start, но не используются.</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off the Store application</strong><br>Подобно представленной выше политике, эта отключает магазин приложений. Согласно описанию и Интернету, эта политика важнее предыдущей, и включение её отключает не только сам магазин, но и приложения из него.</li></ul><h3 id=4280965096-windows-componentssync-your-settings><a class=link-body-emphasis href=#4280965096-windows-componentssync-your-settings>Windows Components/Sync your settings</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not sync</strong><br>Не синхронизировать настройки пользователя. Синхронизация настроек между устройствами мне не нужна. Я включаю политику, тем самым отключаю синхронизацию.</li></ul><h3 id=4280965096-windows-componentswindows-game-recording-and-broadcasting><a class=link-body-emphasis href=#4280965096-windows-componentswindows-game-recording-and-broadcasting>Windows Components/Windows Game Recording and Broadcasting</a></h3><ul><li><span class="shortcode shortcode-emoji">⛔</span> <strong>Enables or disables Windows Game Recording and Broadcasting</strong><br>Включение или отключение функций Windows Game Recording и Broadcasting. Так как я не играю в игры, для меня подобная функциональность ОС избыточна. Отключаю политику.</li></ul><h3 id=4280965096-windows-componentswindows-update><a class=link-body-emphasis href=#4280965096-windows-componentswindows-update>Windows Components/Windows Update</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Configure Automatic Updates</strong><br>Конфигурация автоматического обновления. Ох, сколько в Интернете страданий по поводу обновлений Windows 10. При включении этой политике, я указываю опции, которые помогут избавится от ряда проблем с автоматическим обновлением.<ul><li><strong>Configure automatic updating:</strong> <em>2 - Notify for download and auto install</em><br>Я выбираю опцию #2, которая гласит как &ldquo;Информировать о выпуске новых обновлений&rdquo;.</li><li><span class="shortcode shortcode-emoji">✅</span> <em>Install updates for other Microsoft products</em><br>Также отмечаю галочкой опцию &ldquo;Устанавливать обновления для других продуктов Microsoft&rdquo;. Таким образом, более-менее свежие версии, например, Microsoft Office будут обновляться через Windows Update вместе с ОС.</li></ul></li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not include drivers with Windows Updates</strong><br>Не использовать драйвера в Windows Updates. Вот эта опция странная. Может я её не так понимаю, но при включении, Windows Updates всё равно ставит драйвера на устройства. А мне подобное обслуживание не надо.</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>No auto-restart with logged on users for scheduled automatic updates installations</strong><br>Не использовать автоматическую перезагрузку при вошедшем в систему пользователе, когда обновления установились. Вот эта та самая автоматическая перезагрузка, которая попортила нервишки многим пользователям. Например, когда ты днём много работаешь, а на ночь ставишь компьютер считать различные данные, утром можно обнаружить окно готовности войти в систему. Да, установились обновления и компьютер перезагрузился. Включаем политику, тем самым отключая автоматическую перезагрузку.</li></ul><h2 id=4280965096-user-details><a class=link-body-emphasis href=#4280965096-user-details>User Details</a></h2><p>Секция отвечает за корректировку групповых политик под пользователей.</p><h3 id=4280965096-windows-componentsattachment-manager><a class=link-body-emphasis href=#4280965096-windows-componentsattachment-manager>Windows Components/Attachment Manager</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not preserve zone information in file attachments</strong><br>Не сохранять информацию о зоне в файлах. Суть этой политики такова, что если я скачаю из Интернета, например, какой-нибудь EXE-файл, то файловая система пометит его как небезопасный. Лично мне в этом нет необходимости. Включаю политику.</li></ul><h3 id=4280965096-windows-componentscloud-content-1><a class=link-body-emphasis href=#4280965096-windows-componentscloud-content-1>Windows Components/Cloud Content</a></h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off all Windows spotlight features</strong><br>Отключить все возможности Windows Spotlight. Windows Spotlight эта функция ОС, которая позволяет отображать на экране входа в систему различную интерактивную информацию, например, сменяющиеся фоновые изображения, различные предложения (рекламные / не рекламные - не знаю, не видел ни разу). Мне это не надо, поэтому я включаю политику, запрещая использование Windows Spotlight.</li></ul><p>На этом всё. Возможно, некоторые параметры групповых политик покажутся спорными, а некоторые вообще странными и ненужными, но мне так удобно работать. Список будет дорабатываться, если найду что-нибудь ещё интересное.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/gpo/>#gpo</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-07-21T21:15:37Z data-fn=date-local>2020/07/21 21:15:37 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="GnuPG: Создание и работа с ключами шифрования" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8><picture><source srcset='https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="GnuPG: Создание и работа с ключами шифрования" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8>GnuPG: Создание и работа с ключами шифрования</a></h2></div></header><div class=node-body><p><strong>GnuPG (GPG)</strong> это программа для шифрования информации и создания электронных цифровых подписей. Она создавалась в качестве свободной альтернативе несвободному <strong>PGP</strong>.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="GnuPG: Создание и работа с ключами шифрования" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8><img class=img-fluid src="https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=bottom&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="GnuPG: Создание и работа с ключами шифрования" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8>GnuPG: Создание и работа с ключами шифрования</a></h2></div></header><div class=node-body><p><strong>GnuPG (GPG)</strong> это программа для шифрования информации и создания электронных цифровых подписей. Она создавалась в качестве свободной альтернативе несвободному <strong>PGP</strong>.</p></div></div></article></div><div class="modal fade" id=modal-76779e233edf4c0625c243072a5292c8 tabindex=-1 aria-labelledby=modal-76779e233edf4c0625c243072a5292c8-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-76779e233edf4c0625c243072a5292c8-label><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/>GnuPG: Создание и работа с ключами шифрования</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p><strong>GnuPG (GPG)</strong> это программа для шифрования информации и создания электронных цифровых подписей. Она создавалась в качестве свободной альтернативе несвободному <strong>PGP</strong>.</p><h2 id=3794201176-создание-ключа><a class=link-body-emphasis href=#3794201176-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0>Создание ключа</a></h2><p>GPG предоставляет различные алгоритмы шифрования. Я предпочитаю алгоритм <strong>ECC</strong>, основанный на эллиптических кривых (Elliptic Curve Cryptography).</p><p>Для создания ключей шифрования, нужно чтобы в системе была установлена утилита GPG. Для систем <strong>Debian</strong> и <strong>CentOS / Fedora</strong> этим занимается пакет <code>gnupg</code>, устанавливается командами:</p><ul><li>CentOS 8 / Fedora:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1dad49784401cd914cfa3b2c94f4fb24><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>dnf install gnupg</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1dad49784401cd914cfa3b2c94f4fb24 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ul><li>Debian:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1c558a3d6f4d17d7fdb2e24a3cb3b679><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>apt install gnupg</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1c558a3d6f4d17d7fdb2e24a3cb3b679 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>После того, как пакет установлен, можно начать создание ключа командой:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-52121aba25e8ca76982d9cb36ba0593b><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --expert --full-gen-key</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-52121aba25e8ca76982d9cb36ba0593b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Команда вернёт следующий результат:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ab1ecec11982feb384f4faf29f616341 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ab1ecec11982feb384f4faf29f616341><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --expert --full-gen-key
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gpg <span class=o>(</span>GnuPG<span class=o>)</span> 2.2.20<span class=p>;</span> Copyright <span class=o>(</span>C<span class=o>)</span> <span class=m>2020</span> Free Software Foundation, Inc.
</span></span><span class=line><span class=cl>This is free software: you are free to change and redistribute it.
</span></span><span class=line><span class=cl>There is NO WARRANTY, to the extent permitted by law.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please <span class=k>select</span> what kind of key you want:
</span></span><span class=line><span class=cl>   <span class=o>(</span>1<span class=o>)</span> RSA and RSA <span class=o>(</span>default<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>2<span class=o>)</span> DSA and Elgamal
</span></span><span class=line><span class=cl>   <span class=o>(</span>3<span class=o>)</span> DSA <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>4<span class=o>)</span> RSA <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>7<span class=o>)</span> DSA <span class=o>(</span><span class=nb>set</span> your own capabilities<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>8<span class=o>)</span> RSA <span class=o>(</span><span class=nb>set</span> your own capabilities<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>9<span class=o>)</span> ECC and ECC
</span></span><span class=line><span class=cl>  <span class=o>(</span>10<span class=o>)</span> ECC <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span>11<span class=o>)</span> ECC <span class=o>(</span><span class=nb>set</span> your own capabilities<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span>13<span class=o>)</span> Existing key
</span></span><span class=line><span class=cl>  <span class=o>(</span>14<span class=o>)</span> Existing key from card
</span></span><span class=line><span class=cl>Your selection?</span></span></code></pre></div></div></div></div><p>Здесь спрашивается, какой конкретно ключ мы хотим получить. Вводим <code>9</code>. Получаем:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1206ab6360e8f82b42f12c7208faf448 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-1206ab6360e8f82b42f12c7208faf448><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --expert --full-gen-key
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please <span class=k>select</span> which elliptic curve you want:
</span></span><span class=line><span class=cl>   <span class=o>(</span>1<span class=o>)</span> Curve <span class=m>25519</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>3<span class=o>)</span> NIST P-256
</span></span><span class=line><span class=cl>   <span class=o>(</span>4<span class=o>)</span> NIST P-384
</span></span><span class=line><span class=cl>   <span class=o>(</span>5<span class=o>)</span> NIST P-521
</span></span><span class=line><span class=cl>   <span class=o>(</span>9<span class=o>)</span> secp256k1
</span></span><span class=line><span class=cl>Your selection?</span></span></code></pre></div></div></div></div><p>А здесь уже предстоит выбрать алгоритм шифрования. Вводим <code>1</code>. Получаем:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-9123269020fdd7c189179a38f504c80f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-9123269020fdd7c189179a38f504c80f><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --expert --full-gen-key
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please specify how long the key should be valid.
</span></span><span class=line><span class=cl>         <span class=nv>0</span> <span class=o>=</span> key does not expire
</span></span><span class=line><span class=cl>      &lt;n&gt;  <span class=o>=</span> key expires in n days
</span></span><span class=line><span class=cl>      &lt;n&gt;w <span class=o>=</span> key expires in n weeks
</span></span><span class=line><span class=cl>      &lt;n&gt;m <span class=o>=</span> key expires in n months
</span></span><span class=line><span class=cl>      &lt;n&gt;y <span class=o>=</span> key expires in n years
</span></span><span class=line><span class=cl>Key is valid <span class=k>for</span>? <span class=o>(</span>0<span class=o>)</span></span></span></code></pre></div></div></div></div><p>На последнем шаге настройки ключа спрашивается время действия ключа. Обычно, личные ключи генерируются с безлимитным временем действия. Вводим <code>0</code> (этот пункт идёт по умолчанию).</p><p>Дальше будет пара-тройка вопросов по поводу имени владельца ключа, его адреса e-mail и с просьбой указать комментарий. Таким образом, создаётся пара ключей: закрытый и открытый. Открытый ключ можно публиковать на различных ресурсах с целью идентификации владельца и подтверждения его личности. Например, так работает верификация коммитов на GitLab’е и GitHub’е. Закрытый ключ должен всегда оставаться внутри системы.</p><h2 id=3794201176-список-ключей-в-системе><a class=link-body-emphasis href=#3794201176-%d1%81%d0%bf%d0%b8%d1%81%d0%be%d0%ba-%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%b9-%d0%b2-%d1%81%d0%b8%d1%81%d1%82%d0%b5%d0%bc%d0%b5>Список ключей в системе</a></h2><p>Посмотреть установленные в системе ключи можно командой:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-717f997f7df8ae0fa43b136628a2d263><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --list-keys --keyid-format LONG --with-fingerprint</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-717f997f7df8ae0fa43b136628a2d263 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь:</p><ul><li><code>--list-keys</code> - показать список ключей.</li><li><code>--keyid-format LONG</code> - формат отображения каждого ключа в расширенном (<code>LONG</code>) формате.</li><li><code>--with-fingerprint</code> - вывести отпечаток. Для себя всегда добавляю эту опцию на всякий случай.</li></ul><p>Команда вернёт следующий результат:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0c5824da7d150bf3c470017856f5ea55 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-0c5824da7d150bf3c470017856f5ea55><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --list-keys --keyid-format LONG --with-fingerprint
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pub   ed25519/JTM4BAVLPI8F0XHR 2020-02-17 <span class=o>[</span>SC<span class=o>]</span>
</span></span><span class=line><span class=cl>      Key <span class=nv>fingerprint</span> <span class=o>=</span> XXXX XXXX XXXX XXXX XXXX  XXXX XXXX XXXX XXXX XXXX
</span></span><span class=line><span class=cl>uid                 <span class=o>[</span>ultimate<span class=o>]</span> John Doe &lt;john.doe@example.com&gt;
</span></span><span class=line><span class=cl>sub   cv25519/AI9NEDUOWRF016Y2 2020-02-17 <span class=o>[</span>E<span class=o>]</span></span></span></code></pre></div></div></div></div><p>Здесь:</p><ul><li><code>JTM4BAVLPI8F0XHR</code> - идентификатор ключа. Он потребуется для каких-либо действий с ключом (редактирование / удаление / и т.п.).</li><li><code>[ultimate]</code> - уровень доверия к ключу.</li><li><code>John Doe</code> - имя хозяина ключа.</li><li><code>&lt;john.doe@example.com></code> - почта хозяина ключа.</li><li><code>ed25519</code> & <code>cv25519</code> - алгоритмы шифрования.</li></ul><h2 id=3794201176-экспорт-и-импорт-ключа><a class=link-body-emphasis href=#3794201176-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%b8-%d0%b8%d0%bc%d0%bf%d0%be%d1%80%d1%82-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0>Экспорт и импорт ключа</a></h2><p>При создании открытого и закрытого ключей, необходимо экспортировать их для того, чтобы они хранились где-то независимо от системы, например, на какой-нибудь карте памяти или USB-флешке. Следующие две команды выполняют необходимые действия:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-8 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-b7832a24ffa8194ceb5c664044ab79c4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Export: PUBLIC.</span>
</span></span><span class=line><span class=cl>gpg --armor --output JohnDoe.public.asc --export JTM4BAVLPI8F0XHR
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Export: PRIVATE.</span>
</span></span><span class=line><span class=cl>gpg --armor --output JohnDoe.private.asc --export-secret-keys JTM4BAVLPI8F0XHR</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-b7832a24ffa8194ceb5c664044ab79c4 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь:</p><ul><li><code>--armor</code> - экспорт ключа в формате <strong>ASCII</strong> (текстовый формат).</li><li><code>--output</code> - имя файлы, в который будет экспортирован ключ.</li><li><code>--export JTM4BAVLPI8F0XHR</code> - экспорт открытого ключа с идентификатором <code>JTM4BAVLPI8F0XHR</code>.</li><li><code>--export-secret-keys JTM4BAVLPI8F0XHR</code> - экспорт закрытого ключа с идентификатором <code>JTM4BAVLPI8F0XHR</code>.</li></ul><p>С экспортом разобрались. Теперь по поводу импорта&mldr; Импортировать также необходимо открытый и закрытый ключи. Следующие две команды выполняют необходимые действия:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-9 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-7eeab24df20b85af85ffc486e51c45ca><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Import: PUBLIC.</span>
</span></span><span class=line><span class=cl>gpg --import JohnDoe.public.asc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Import: PRIVATE.</span>
</span></span><span class=line><span class=cl>gpg --import JohnDoe.private.asc</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-7eeab24df20b85af85ffc486e51c45ca role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>После импорта ключ приобретает <strong>стандартный уровень доверия</strong>. Для повышения или понижения уровня доверия, ключ необходимо отредактировать.</p><h2 id=3794201176-редактирование-ключа><a class=link-body-emphasis href=#3794201176-%d1%80%d0%b5%d0%b4%d0%b0%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0>Редактирование ключа</a></h2><p>Следующая команда позволяет отредактировать ключ:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-10 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0c000796bc9b53bf72f527d699d20802><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --edit-key JTM4BAVLPI8F0XHR</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0c000796bc9b53bf72f527d699d20802 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь:</p><ul><li><code>--edit-key JTM4BAVLPI8F0XHR</code> - редактирование ключа с идентификатором <code>JTM4BAVLPI8F0XHR</code>.</li></ul><p>Режим редактирования ключа представляет собой текстовый интерфейс, в который вручную вбиваются команды. Например, повысим уровень доверия к ключу до максимального (ultimate).</p><ol><li>Вводим <code>trust</code>.</li><li>Выбираем <code>5 (I trust ultimately)</code>.</li><li>Вводим <code>quit</code> (выход).</li></ol></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/gpg/>#gpg</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/gnupg/>#gnupg</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-07-16T06:55:17Z data-fn=date-local>2020/07/16 06:55:17 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="MikroTik и CloudFlare: Динамический IP для домена" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6><picture><source srcset='https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="MikroTik и CloudFlare: Динамический IP для домена" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6>MikroTik и CloudFlare: Динамический IP для домена</a></h2></div></header><div class=node-body><p>Нашёл скрипт реализации динамической смены IP адреса из RouterOS напрямую в панели управления CloudFlare при помощи API. Где нашёл скрипт уже не помню, вроде бы на страницах официального форума …</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="MikroTik и CloudFlare: Динамический IP для домена" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6><img class=img-fluid src="https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=bottom&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="MikroTik и CloudFlare: Динамический IP для домена" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6>MikroTik и CloudFlare: Динамический IP для домена</a></h2></div></header><div class=node-body><p>Нашёл скрипт реализации динамической смены IP адреса из RouterOS напрямую в панели управления CloudFlare при помощи API. Где нашёл скрипт уже не помню, вроде бы на страницах официального форума …</p></div></div></article></div><div class="modal fade" id=modal-418a73a9f8f7ce239bf092d8d5cd3fe6 tabindex=-1 aria-labelledby=modal-418a73a9f8f7ce239bf092d8d5cd3fe6-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-418a73a9f8f7ce239bf092d8d5cd3fe6-label><a href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/>MikroTik и CloudFlare: Динамический IP для домена</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Нашёл скрипт реализации динамической смены IP адреса из RouterOS напрямую в панели управления CloudFlare при помощи API. Где нашёл скрипт уже не помню, вроде бы на страницах официального форума MikroTik.</p><p>Скрипт я немного переделал, удалил лишние переменные, некоторые переопределил, подправил области видимости переменных, обновил метод авторизации скрипта на серверах CloudFlare. Вроде работает.</p><p>Сам скрипт нужно настроить под себя, прописав в нём значения переменных. Некоторые значений можно узнать из панели управления доменом в CloudFlare, но для получения значения переменной <code>cfDnsID</code> необходимо выполнит немного телодвижений. Об этом ниже.</p><h2 id=916590014-работа-cloudflare-api><a class=link-body-emphasis href=#916590014-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-cloudflare-api>Работа CloudFlare API</a></h2><p>Без токена - никак.</p><h3 id=916590014-создание-токена><a class=link-body-emphasis href=#916590014-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%82%d0%be%d0%ba%d0%b5%d0%bd%d0%b0>Создание токена</a></h3><p>Для того, чтобы начать работать с CloudFlare API, нам нужно создать специальный токен:</p><ol><li>Зайти в <a title href=https://dash.cloudflare.com/profile/api-tokens target=_blank rel="noopener noreferrer nofollow">панель управления токенами</a>.</li><li>Нажать кнопку <span class="shortcode shortcode-key d-inline-block"><kbd>Create Token</kbd></span>.</li><li>На странице выбора шаблонов - выбрать шаблон <strong>Edit zone DNS</strong>.</li><li>В разделе <strong>Zone Resources</strong> можно выбрать область доступа токена к зонам (доменам). Можно указать конкретную зону (<em>Specific zone</em>) или выбрать все зоны (<em>All zones</em>).</li><li>Всё, нажимаем кнопку <span class="shortcode shortcode-key d-inline-block"><kbd>Continue to summary</kbd></span> и перемещаемся на следующую станицу&mldr;</li></ol><h3 id=916590014-проверка-токена><a class=link-body-emphasis href=#916590014-%d0%bf%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0-%d1%82%d0%be%d0%ba%d0%b5%d0%bd%d0%b0>Проверка токена</a></h3><p>По окончании создания токена, CloudFlare переместит нас на страницу проверки токена. На этой странице будут наш созданный токен (его необходимо сохранить) и команда, которой при помощи утилиты <code>curl</code> можно проверить корректность токена:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a17873f93e22bb5164b48f5844e7ec85><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/user/tokens/verify&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Authorization: Bearer TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Content-Type:application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a17873f93e22bb5164b48f5844e7ec85 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>При выполнении, команда вернёт следующий результат:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-b5057abbf5c685c8bd918ba27b997859 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-b5057abbf5c685c8bd918ba27b997859><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/user/tokens/verify&#34;</span> -H <span class=s2>&#34;Authorization: Bearer &lt;...&gt;&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;result&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;&lt;...&gt;&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;status&#34;</span>: <span class=s2>&#34;active&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;success&#34;</span>: true,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errors&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;messages&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>        <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;code&#34;</span>: 10000,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;This API Token is valid and active&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span>: null
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div><p>По сообщению &ldquo;This API Token is valid and active&rdquo; понятно, что токен корректный и работает.</p><h3 id=916590014-получение-id-ресурсной-записи-домена><a class=link-body-emphasis href=#916590014-%d0%bf%d0%be%d0%bb%d1%83%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-id-%d1%80%d0%b5%d1%81%d1%83%d1%80%d1%81%d0%bd%d0%be%d0%b9-%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d0%b8-%d0%b4%d0%be%d0%bc%d0%b5%d0%bd%d0%b0>Получение ID ресурсной записи домена</a></h3><p>Когда у нас есть токен, можно полноценно работать с CloudFlare API. Нам нужно получить ID ресурсной записи домена. Получать будем следующей командой:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-bf51bcbdefb23a3390e2f8d32709c3c7><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/ZONE_ID/dns_records&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Authorization: Bearer TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-bf51bcbdefb23a3390e2f8d32709c3c7 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Обратите внимание на следующие заглушки в команде:</p><ul><li><code>ZONE_ID</code> - ID домена. Находится в панели оправления доменом на главной странице в поле <strong>Zone ID</strong>.</li><li><code>TOKEN</code> - токен для доступа к CloudFlare API.</li></ul><div class="shortcode shortcode-alert"><div class="alert alert-warning d-flex overflow-hidden" role=alert><div class="flex-shrink-0 align-self-center"><i class="fas fa-exclamation-triangle fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Вместо этих заглушек необходимо подставить свои значения.</p></div></div></div><p>Сформировав правильную команду с корректными данными и выполнив её, команда вернёт результат в формате <strong>JSON</strong>. Результат будет содержать набор всех ресурсных записей конкретного домена. У меня это выглядит так:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a79ef3e12e8ffbd263236eccf0084572 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-a79ef3e12e8ffbd263236eccf0084572><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;...&gt;/dns_records&#34;</span> -H <span class=s2>&#34;Authorization: Bearer &lt;...&gt;&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;result&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>        <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;gJDSG5la4IWNOEVn6K2PHyope8Q9YhzC&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;zone_id&#34;</span>: <span class=s2>&#34;&lt;...&gt;&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;zone_name&#34;</span>: <span class=s2>&#34;example.com&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;example.com&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span>: <span class=s2>&#34;A&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;content&#34;</span>: <span class=s2>&#34;192.168.10.232&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;proxiable&#34;</span>: true,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;proxied&#34;</span>: true,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;ttl&#34;</span>: 1,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;locked&#34;</span>: false,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;meta&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;auto_added&#34;</span>: false,
</span></span><span class=line><span class=cl>                <span class=s2>&#34;managed_by_apps&#34;</span>: false,
</span></span><span class=line><span class=cl>                <span class=s2>&#34;managed_by_argo_tunnel&#34;</span>: false,
</span></span><span class=line><span class=cl>                <span class=s2>&#34;source&#34;</span>: <span class=s2>&#34;primary&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;created_on&#34;</span>: <span class=s2>&#34;2020-02-23T21:26:27.56227Z&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;modified_on&#34;</span>: <span class=s2>&#34;2020-02-23T21:26:27.56227Z&#34;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;success&#34;</span>: true,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errors&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;messages&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;result_info&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;page&#34;</span>: 1,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;per_page&#34;</span>: 20,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span>: 7,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;total_count&#34;</span>: 7,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;total_pages&#34;</span>: <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div><p>Как видим, команда вернула нам результат с массивом <code>result</code>. В этом массиве находятся все ресурсные записи нашего домена. Каждая ресурсная запись содержит поля <code>id</code> и <code>content</code>:</p><ul><li><code>id</code> - ID ресурсной записи. Очень важное поле, как раз его значение необходимо записать в переменную <code>cfDnsID</code> скрипта.</li><li><code>content</code> - содержимое ресурсной записи.</li></ul><p>Нам необходимы только записи с типом <code>A</code>. Обычно в записях с типом <code>A</code> хранятся IP адреса серверов, к которым привязан домен. У записей с типом <code>A</code> в поле <code>content</code> находится IP адрес, который должен изменить наш MikroTik при обращении к CloudFlare API.</p><h2 id=916590014-скрипт><a class=link-body-emphasis href=#916590014-%d1%81%d0%ba%d1%80%d0%b8%d0%bf%d1%82>Скрипт</a></h2><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>cf.ddns.rsc</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a21bc1e6464e437e6a174e01927ad896 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=cf.ddns.rsc download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=cf.ddns.rsc target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-a21bc1e6464e437e6a174e01927ad896><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Mikrotik RouterOS script for CloudFlare DDNS</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># @package    RouterOS</span>
</span></span><span class=line><span class=cl><span class=c1># @author     Kitsune Solar &lt;mail@kitsune.solar&gt;</span>
</span></span><span class=line><span class=cl><span class=c1># @copyright  2023 iHub TO</span>
</span></span><span class=line><span class=cl><span class=c1># @license    MIT</span>
</span></span><span class=line><span class=cl><span class=c1># @version    0.0.1</span>
</span></span><span class=line><span class=cl><span class=c1># @link       https://lib.onl</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RouterOS: WAN interface name.</span>
</span></span><span class=line><span class=cl>:local rosWanInterface <span class=s2>&#34;ether1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RouterOS: Enables trust chain validation from local certificate store.</span>
</span></span><span class=line><span class=cl><span class=c1># &#39;no&#39;  | Disable certificate check.</span>
</span></span><span class=line><span class=cl><span class=c1># &#39;yes&#39; | Enable certificate check.</span>
</span></span><span class=line><span class=cl>:local rosCheckCert <span class=s2>&#34;no&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: API token.</span>
</span></span><span class=line><span class=cl>:local cfToken <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Domain.</span>
</span></span><span class=line><span class=cl>:local cfDomain <span class=s2>&#34;example.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Zone ID.</span>
</span></span><span class=line><span class=cl>:local cfZoneID <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: DNS ID.</span>
</span></span><span class=line><span class=cl>:local cfDnsID <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Domain record type.</span>
</span></span><span class=line><span class=cl>:local cfRecordType <span class=s2>&#34;A&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Debug mode.</span>
</span></span><span class=line><span class=cl><span class=c1># 0 | Disable debug mode.</span>
</span></span><span class=line><span class=cl><span class=c1># 1 | Enable debug mode.</span>
</span></span><span class=line><span class=cl>:local cfDebug <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IP on WAN interface.</span>
</span></span><span class=line><span class=cl>:local srcIP <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IP on CloudFlare domain.</span>
</span></span><span class=line><span class=cl>:local dstIP <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get RouterOS WAN IP.</span>
</span></span><span class=line><span class=cl>:set srcIP <span class=o>[</span>/ip address get <span class=o>[</span>/ip address find <span class=nv>interface</span><span class=o>=</span><span class=nv>$rosWanInterface</span> <span class=o>]</span> address<span class=o>]</span>
</span></span><span class=line><span class=cl>:set srcIP <span class=o>[</span>:pick <span class=nv>$srcIP</span> <span class=m>0</span> <span class=o>[</span>:find <span class=nv>$srcIP</span> <span class=s2>&#34;/&#34;</span><span class=o>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get CloudFlare domain IP.</span>
</span></span><span class=line><span class=cl>:set dstIP <span class=o>[</span>:resolve <span class=nv>$cfDomain</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Build CloudFlare API (v4).</span>
</span></span><span class=line><span class=cl>:local cfAPI <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&#34;</span>
</span></span><span class=line><span class=cl>:set cfAPI <span class=o>(</span><span class=nv>$cfAPI</span> . <span class=s2>&#34;</span><span class=nv>$cfZoneID</span><span class=s2>/dns_records/</span><span class=nv>$cfDnsID</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>:local cfAPIHeader <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$cfToken</span><span class=s2>, Content-Type: application/json&#34;</span>
</span></span><span class=line><span class=cl>:local cfAPIData <span class=s2>&#34;{\&#34;type\&#34;:\&#34;</span><span class=nv>$cfRecordType</span><span class=s2>\&#34;,\&#34;name\&#34;:\&#34;</span><span class=nv>$cfDomain</span><span class=s2>\&#34;,\&#34;content\&#34;:\&#34;</span><span class=nv>$srcIP</span><span class=s2>\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Write debug info to log.</span>
</span></span><span class=line><span class=cl>:if <span class=o>(</span><span class=nv>$cfDebug</span><span class=o>)</span> <span class=k>do</span><span class=o>={</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: Domain = </span><span class=nv>$cfDomain</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: Domain IP (dstIP) = </span><span class=nv>$dstIP</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: WAN IP (srcIP) = </span><span class=nv>$srcIP</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: CloudFlare API (cfAPI) = </span><span class=nv>$cfAPI</span><span class=s2>&amp;content=</span><span class=nv>$srcIP</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Compare and update CF if necessary.</span>
</span></span><span class=line><span class=cl>:if <span class=o>(</span><span class=nv>$dstIP</span> !<span class=o>=</span> <span class=nv>$srcIP</span><span class=o>)</span> <span class=k>do</span><span class=o>={</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: Updating </span><span class=nv>$cfDomain</span><span class=s2>, setting </span><span class=nv>$srcIP</span><span class=s2> = </span><span class=nv>$cfDomain</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  /tool fetch <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    <span class=nv>mode</span><span class=o>=</span>https <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    http-method<span class=o>=</span>put <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    http-header-field<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$cfAPIHeader</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    http-data<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$cfAPIData</span><span class=s2>&#34;</span> <span class=nv>url</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$cfAPI</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    check-certificate<span class=o>=</span><span class=nv>$rosCheckCert</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    <span class=nv>output</span><span class=o>=</span>user as-value
</span></span><span class=line><span class=cl>  /ip dns cache flush
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>else</span><span class=o>={</span>
</span></span><span class=line><span class=cl>  :log info <span class=s2>&#34;CloudFlare: No Update Needed!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div><h3 id=916590014-настройка><a class=link-body-emphasis href=#916590014-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0>Настройка</a></h3><p>Алгоритм настройки довольно прост:</p><ol><li>Получаем токен для работы с CloudFlare API.</li><li>При помощи специальной команды узнаём значение поля <code>id</code> ресурсной записи с типом <code>A</code>.</li><li>Это значение вписываем в переменную <code>cfDnsID</code> скрипта.</li><li>Остальные требуемые значения для переменных уже доступны без каких-либо телодвижений.</li></ol><h3 id=916590014-переменные><a class=link-body-emphasis href=#916590014-%d0%bf%d0%b5%d1%80%d0%b5%d0%bc%d0%b5%d0%bd%d0%bd%d1%8b%d0%b5>Переменные</a></h3><p>Опишу переменные и что они из себя представляют:</p><ul><li><code>rosWanInterface</code> - имя интерфейса <strong>WAN</strong> в RouterOS.</li><li><code>rosCheckCert</code> - включение / отключение проверки цепочки сертификации при запросе к CloudFlare API. Для корректной работы этой функции необходимо, чтобы в репозитории сертификатов RouterOS присутствовали корневые сертификаты центров сертификации. Про импортирование сертификатов написано в заметке <span class="shortcode shortcode-uuid"><a href=/ru/articles/2023/10/cc13623b-970c-5950-867e-168f9ba9025a/>Добавление корневых сертификатов в RouterOS</a></span>.</li><li><code>cfToken</code> - токен, полученный в <a title href=https://dash.cloudflare.com/profile/api-tokens target=_blank rel="noopener noreferrer nofollow">панели управления токенами</a>.</li><li><code>cfDomain</code> - название домена, для которого необходимо динамически менять IP адрес.</li><li><code>cfZoneID</code> - ID домена. Находится в панели управления доменом на главной странице в поле <strong>Zone ID</strong>.</li><li><code>cfDnsID</code> - ID ресурсной записи домена. Для получения значения переменной, необходимо выполнить запрос к CloudFlare API.</li><li><code>cfRecordType</code> - тип ресурсной записи домена. Обычно это <code>A</code>. Менять нет необходимости.</li><li><code>cfDebug</code> - включение / отключение отображения технической информации в логе RouterOS.</li></ul><p>Рекомендую настраивать скрипт в редакторе с подсветкой синтаксиса, чтобы не ошибиться и не задеть какую-либо кавычку.</p><h3 id=916590014-установка><a class=link-body-emphasis href=#916590014-%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0>Установка</a></h3><p>После настройки скрипта, его нужно добавить в репозиторий скриптов RouterOS. Находится репозиторий в <strong>System / Scripts</strong>. При добавлении скрипта, необходимо выбрать политики <code>read</code>, <code>write</code>, <code>test</code>, <code>policy</code>.</p><h3 id=916590014-планировщик><a class=link-body-emphasis href=#916590014-%d0%bf%d0%bb%d0%b0%d0%bd%d0%b8%d1%80%d0%be%d0%b2%d1%89%d0%b8%d0%ba>Планировщик</a></h3><p>Скрипт должен переодически запускаться для проверки и синхронизации IP адресов сервера и домена. В этом поможет планировщик RouterOS. Заходим в <strong>System / Scheduler</strong> и создаём задачу с политиками <code>read</code>, <code>write</code>, <code>test</code>, <code>policy</code>. В поле <strong>On Event</strong> вписываем точное название скрипта, ранее добавленного в репозиторий RouterOS.</p><h3 id=916590014-проверка><a class=link-body-emphasis href=#916590014-%d0%bf%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0>Проверка</a></h3><p>Проверить работу скрипта можно в репозитории по адресу <strong>System / Scripts</strong>. Выделив скрипт и нажав на кнопку <span class="shortcode shortcode-key d-inline-block"><kbd>Run</kbd></span>, смотрим изменился ли IP адрес у домена в панели управления CloudFlare.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/router/>#router</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/mikrotik/>#mikrotik</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/routeros/>#routeros</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cloudflare/>#cloudflare</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-07-12T15:09:48Z data-fn=date-local>2020/07/12 15:09:48 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Первичная настройка UAIK" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3><picture><source srcset='https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Первичная настройка UAIK" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3>Первичная настройка UAIK</a></h2></div></header><div class=node-body><p>После автоматической установки (Kickstart) при помощи <a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Первичная настройка UAIK" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3><img class=img-fluid src="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Первичная настройка UAIK" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3>Первичная настройка UAIK</a></h2></div></header><div class=node-body><p>После автоматической установки (Kickstart) при помощи <a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p></div></div></article></div><div class="modal fade" id=modal-f3895b710b130cb24aafa39295e79ee3 tabindex=-1 aria-labelledby=modal-f3895b710b130cb24aafa39295e79ee3-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-f3895b710b130cb24aafa39295e79ee3-label><a href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/>Первичная настройка UAIK</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>После автоматической установки (Kickstart) при помощи <a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p><h2 id=250885631-включение-графического-режима><a class=link-body-emphasis href=#250885631-%d0%b2%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b3%d1%80%d0%b0%d1%84%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%be%d0%b3%d0%be-%d1%80%d0%b5%d0%b6%d0%b8%d0%bc%d0%b0>Включение графического режима</a></h2><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1f13caf3605ae166769473b4a200e62c><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>systemctl set-default graphical.target</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1f13caf3605ae166769473b4a200e62c role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2 id=250885631-создание-пользователя><a class=link-body-emphasis href=#250885631-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f>Создание пользователя</a></h2><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-80a5e06572c674833bed5d8b568ebfba><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Добавить пользователя.</span>
</span></span><span class=line><span class=cl>useradd -mc <span class=s2>&#34;User 0001&#34;</span> user-0001
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Установить пароль для пользователя.</span>
</span></span><span class=line><span class=cl>passwd user-0001</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-80a5e06572c674833bed5d8b568ebfba role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2 id=250885631-отключение-пользователя><a class=link-body-emphasis href=#250885631-%d0%be%d1%82%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f>Отключение пользователя</a></h2><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-01af2035d431d3fbcb0cc895b7480a2a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Отключить пользователя.</span>
</span></span><span class=line><span class=cl>usermod -L user-0000</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-01af2035d431d3fbcb0cc895b7480a2a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2 id=250885631-перемещение-пользователя><a class=link-body-emphasis href=#250885631-%d0%bf%d0%b5%d1%80%d0%b5%d0%bc%d0%b5%d1%89%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f>Перемещение пользователя</a></h2><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-818dcdde94bcb7443325b0b4054a6c47><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>usermod -md /new_home/user-0001 user-0001</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-818dcdde94bcb7443325b0b4054a6c47 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2 id=250885631-работа-с-диском><a class=link-body-emphasis href=#250885631-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-%d1%81-%d0%b4%d0%b8%d1%81%d0%ba%d0%be%d0%bc>Работа с диском</a></h2><p>Чтобы создать на новом диске раздел, необходимо войти в программу <code>parted</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-4822255c0f47222a17f81cb957b9c4e9><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>parted -a optimal /dev/sdb</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-4822255c0f47222a17f81cb957b9c4e9 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Выполнить следующие команды:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-e6ad26024533156930ce173359310b86><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>(parted) mklabel gpt
</span></span><span class=line><span class=cl>(parted) mkpart primary 0% 100%
</span></span><span class=line><span class=cl>(parted) quit</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e6ad26024533156930ce173359310b86 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Создать файловую систему:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-f52977d9cc14166a6d9a6715d8485cea><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>mkfs.xfs /dev/sdb1</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-f52977d9cc14166a6d9a6715d8485cea role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Настроить автоматическое монтирование раздела в <code>/etc/fstab</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-383a27508c80cf525e5f47d437d9af75><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/dev/sdb1 /home/storage xfs defaults 0 0</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-383a27508c80cf525e5f47d437d9af75 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/fedora/>#fedora</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-06-02T06:20:27Z data-fn=date-local>2020/06/02 06:20:27 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Запись ISO на USB Flash Drive" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/ data-bs-toggle=modal data-bs-target=#modal-49e4a9bedcc5914dc90af40399513113><picture><source srcset='https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Запись ISO на USB Flash Drive" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/ data-bs-toggle=modal data-bs-target=#modal-49e4a9bedcc5914dc90af40399513113>Запись ISO на USB Flash Drive</a></h2></div></header><div class=node-body><p>Команды для &ldquo;правильной&rdquo; записи ISO на USB Flash Drive.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Запись ISO на USB Flash Drive" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/ data-bs-toggle=modal data-bs-target=#modal-49e4a9bedcc5914dc90af40399513113><img class=img-fluid src="https://images.unsplash.com/photo-1587145820098-23e484e69816?crop=bottom&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Запись ISO на USB Flash Drive" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/ data-bs-toggle=modal data-bs-target=#modal-49e4a9bedcc5914dc90af40399513113>Запись ISO на USB Flash Drive</a></h2></div></header><div class=node-body><p>Команды для &ldquo;правильной&rdquo; записи ISO на USB Flash Drive.</p></div></div></article></div><div class="modal fade" id=modal-49e4a9bedcc5914dc90af40399513113 tabindex=-1 aria-labelledby=modal-49e4a9bedcc5914dc90af40399513113-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-49e4a9bedcc5914dc90af40399513113-label><a href=/ru/articles/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/>Запись ISO на USB Flash Drive</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Команды для &ldquo;правильной&rdquo; записи ISO на USB Flash Drive.</p><ol><li>Определить USB-накопитель при помощи команды <code>fdisk -l</code>.</li><li>Отмонтировать ВСЕ разделы с USB-накопителя командой <code>umount /dev/sdX*</code>, где <code>X</code> - буква накопителя (например, <code>umount /dev/sdc*</code>).</li><li>Загрузить ISO на USB-накопитель:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-6a49614e8a73426cea4afac944ce847b><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Отмонтировать и очистить USB-накопитель.</span>
</span></span><span class=line><span class=cl>umount /dev/sdX* <span class=o>&amp;&amp;</span> sgdisk -Z /dev/sdX
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Записать образ на USB-накопитель.</span>
</span></span><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>image.iso <span class=nv>of</span><span class=o>=</span>/dev/sdX <span class=nv>bs</span><span class=o>=</span>4M <span class=nv>oflag</span><span class=o>=</span>direct <span class=nv>status</span><span class=o>=</span>progress<span class=p>;</span> sync
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Извлечь USB-накопитель.</span>
</span></span><span class=line><span class=cl>eject /dev/sdX</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-6a49614e8a73426cea4afac944ce847b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/usb/>#usb</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-06-02T06:20:24Z data-fn=date-local>2020/06/02 06:20:24 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Первая запись" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/06/6a305138-a151-5439-91d8-e2feeed39991/ data-bs-toggle=modal data-bs-target=#modal-154d570eecc9e8666e1e5c9b7ae7efce><picture><source srcset='https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class=img-fluid src="https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Первая запись" loading=lazy></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/6a305138-a151-5439-91d8-e2feeed39991/ data-bs-toggle=modal data-bs-target=#modal-154d570eecc9e8666e1e5c9b7ae7efce>Первая запись</a></h2></div></header><div class=node-body><p>Привет!</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Первая запись" class="d-flex align-items-center rounded overflow-hidden" href=/ru/articles/2020/06/6a305138-a151-5439-91d8-e2feeed39991/ data-bs-toggle=modal data-bs-target=#modal-154d570eecc9e8666e1e5c9b7ae7efce><img class=img-fluid src="https://images.unsplash.com/photo-1581043144435-ebcd25885809?crop=edges&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Первая запись" loading=lazy></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/6a305138-a151-5439-91d8-e2feeed39991/ data-bs-toggle=modal data-bs-target=#modal-154d570eecc9e8666e1e5c9b7ae7efce>Первая запись</a></h2></div></header><div class=node-body><p>Привет!</p></div></div></article></div><div class="modal fade" id=modal-154d570eecc9e8666e1e5c9b7ae7efce tabindex=-1 aria-labelledby=modal-154d570eecc9e8666e1e5c9b7ae7efce-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-154d570eecc9e8666e1e5c9b7ae7efce-label><a href=/ru/articles/2020/06/6a305138-a151-5439-91d8-e2feeed39991/>Первая запись</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Привет!</p><p>Это первая запись для тестирования конфигурации и возможностей данного блога. Запись для тестирования функциональности и корректности шаблонов.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/misc/>#misc</a></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-06-02T06:20:21Z data-fn=date-local>2020/06/02 06:20:21 UTC</time></li></ul></div></div></div></div></div></div><nav class=mt-5><ul class="pagination justify-content-center"><li class=page-item><a class=page-link href=/ru/authors/kitsunesolar/><i class="fas fa-angle-double-left fa-fw"></i></a></li><li class=page-item><a class=page-link href=/ru/authors/kitsunesolar/page/3/><i class="fas fa-angle-left fa-fw"></i></a></li><li class="page-item disabled"><span class=page-link><i class="fas fa-ellipsis fa-fw"></i></span></li><li class=page-item><a href=/ru/authors/kitsunesolar/page/2/ class=page-link>2</a></li><li class=page-item><a href=/ru/authors/kitsunesolar/page/3/ class=page-link>3</a></li><li class="page-item active" aria-current=page><a href=/ru/authors/kitsunesolar/page/4/ class=page-link>4</a></li><li class="page-item disabled"><span class=page-link><i class="fas fa-angle-right fa-fw"></i></span></li><li class="page-item disabled"><span class=page-link><i class="fas fa-angle-double-right fa-fw"></i></span></li></ul></nav></div></div></main><footer class="mt-auto border-top bg-light" id=site-footer><div class="section py-5 border-bottom"><div class=container><div class="row g-3"><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">О проекте</h2><div class=node-body><p>Заметки по системному администрированию и веб-разработкам.</p></div></article></div><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">Ресурсы</h2><div class=node-body><ul><li><a title href=https://kitsune.solar/ target=_blank rel="noopener noreferrer nofollow">Kitsune Solar</a></li><li><a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UNIX AIK</a></li></ul></div></article></div><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">Контакты</h2><div class=node-body><ul><li><a title href=mailto:mail@lib.onl target=_self rel>Email</a></li></ul></div></article></div></div></div></div><div class="section py-3"><div class=container><div class="row row-cols-1 row-cols-lg-2 small text-body-secondary align-items-center"><div class="col text-center text-lg-start"><ul class="list-inline mb-0"><li class=list-inline-item><div>Library Online &copy; 2023</div><div>Заметки на тему администрирования и разработки различных систем, приложений и серверов.</div></li></ul></div><div class="col text-center text-lg-end"><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=RSS><a class="btn btn-light btn-sm" href=/ru/authors/kitsunesolar/index.xml target=_blank aria-label=RSS><i class="fas fa-rss fa-fw"></i></a></li><li class="list-inline-item dropup" data-bs-tooltip data-bs-title=Языки><a class="dropdown-toggle btn btn-light btn-sm" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false aria-label=Языки><i class="fas fa-language fa-fw"></i></a><div class="dropdown-menu dropdown-menu-end shadow"><a class=dropdown-item href=/ru/ hreflang=ru>Русский
</a><a class=dropdown-item href=/en/ hreflang=en>English</a></div></li></ul></div></div></div></div></footer><div class="modal fade" id=search-modal tabindex=-1 aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-xl"><div class=modal-content><div class=modal-header><h5 class=modal-title id=searchModalLabel>Поиск</h5><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class="modal-body node-body"><div class="row row-cols-1 g-3"><div class=col><div class="row g-3"><div class=col-lg><form action=https://google.com/search method=get class=d-flex target=_blank><input type=hidden name=domains value=lib.onl>
<input type=hidden name=sitesearch value=lib.onl><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input type=search class=form-control name=q placeholder='Поиск Google' aria-label='Поиск Google'>
<span class=input-group-text><i class="fab fa-google fa-fw"></i></span></div></form></div><div class=col-lg><form action=https://ya.ru/search method=get class=d-flex target=_blank><input type=hidden name=site value=lib.onl><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input type=search class=form-control name=text placeholder='Поиск Яндекс' aria-label='Поиск Яндекс'>
<span class=input-group-text><i class="fab fa-yandex fa-fw"></i></span></div></form></div></div></div><div class=col><form id=search-form method=get class=d-flex autocomplete=off><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input id=search-input type=search class=form-control name=q placeholder='Внутренний поиск' aria-label='Внутренний поиск'>
<span class=input-group-text><i class="fas fa-brain fa-fw"></i></span></div></form></div><div class=col><div class="list-group list-group-flush d-none overflow-auto" id=search-results></div><div id=search-help><div class="alert alert-info d-flex align-items-center overflow-hidden node-body" id=alert-7ac06ce906e643d0f598f317503814be role=alert><div class=flex-shrink-0><i class="fas fa-search fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Используется нечёткий поиск (приблизительное сопоставление строк).
Это метод поиска строк, которые приблизительно соответствуют поисковому шаблону.</p><p>Результаты поиска сортируются по точности совпадения с поисковым шаблоном.
Результаты поиска, наиболее точно соответствующие запросу, находятся сверху, приблизительные результаты - снизу.</p></div></div></div></div></div></div></div></div></div><script src=/js/vendor.bundle.min.js defer></script><script src=/ru/js/system.bundle.min.js defer></script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Person","address":{"@type":"PostalAddress","addressCountry":"Russia","addressLocality":"Reutov","addressRegion":"Moscow Region"},"alternateName":"Kitsune Solar","award":["Грамота АО Институт ЭНЕРГОСЕТЬПРОЕКТ"],"birthDate":"1987-03-13","birthPlace":{"@type":"Place","address":{"@type":"PostalAddress","addressCountry":"Russia","addressLocality":"Reutov","addressRegion":"Moscow Region"}},"email":"kitsune.solar@gmail.com","gender":"Male","image":"https://gravatar.com/avatar/4e0b4877c1d23e5164e54d8367e3e3cd?s=512","jobTitle":"System administrator","mainEntityOfPage":"https://lib.onl/ru/authors/kitsunesolar/","name":"Kitsune Solar","sameAs":["https://github.com/KitsuneSolar","https://gitlab.com/KitsuneSolar","https://instagram.com/KitsuneSolar","https://twitter.com/KitsuneSolar","https://vk.com/KitsuneSolar","https://youtube.com/KitsuneSolar"],"telephone":"+7 (000) 000-0000","url":"https://kitsune.solar/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@id":"https://lib.onl/#website","@type":"WebSite","description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","hasPart":[{"@context":"https://schema.org","@type":"WPHeader","cssSelector":"#site-header","headline":"headline-string"},{"@context":"https://schema.org","@type":"WPFooter","copyrightHolder":"https://lib.onl/#organization","copyrightYear":"2023","cssSelector":"#site-footer","publisher":"https://lib.onl/#organization"}],"inLanguage":[{"@type":"Language","alternateName":"ru-RU","name":"Русский"},{"@type":"Language","alternateName":"en-US","name":"English"}],"keywords":["powershell","forum","ipb","ips","debian","linux","cmd","cmf","cms","vbulletin","bash","cloudflare","fedora","git","php","systemd","terminal","dhcp","find","gdm"],"mainEntityOfPage":"https://lib.onl/","name":"Library Online","publisher":"https://lib.onl/#organization","url":"https://lib.onl/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@id":"https://lib.onl/#organization","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"Russia","addressLocality":"Moscow","addressRegion":"Moscow Region"},"contactPoint":{"@type":"ContactPoint","contactType":"customer service","email":"mail@lib.onl","telephone":"+7 (000) 000-0000"},"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","foundingDate":"2020","legalName":"Library Online","logo":{"@type":"ImageObject","url":"https://lib.onl/img/logo.min.svg"},"mainEntityOfPage":"https://lib.onl/","name":"Library Online","sameAs":[""],"url":"https://lib.onl/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"SiteNavigationElement","name":"Статьи","position":10,"url":"https://lib.onl/ru/articles/"},{"@type":"SiteNavigationElement","name":"Q\u0026A","position":20,"url":"https://lib.onl/ru/faq/"},{"@type":"SiteNavigationElement","name":"Архив","position":100,"url":"https://lib.onl/ru/archive/"},{"@type":"SiteNavigationElement","name":"О проекте","position":999,"url":"https://lib.onl/ru/about/"},{"@type":"SiteNavigationElement","name":"META","position":9999,"url":"https://lib.onl/ru/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":{"@id":"https://lib.onl/ru/","name":"Главная"},"position":1},{"@type":"ListItem","item":{"@id":"https://lib.onl/ru/authors/","name":"Авторы"},"position":2},{"@type":"ListItem","item":{"@id":"https://lib.onl/ru/authors/kitsunesolar/","name":"Kitsune Solar"},"position":3}]}</script></body></html>