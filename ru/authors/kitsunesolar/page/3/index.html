<!doctype html><html class=h-100 dir=ltr lang=ru-RU prefix="og: http://ogp.me/ns#
      article: http://ogp.me/ns/article#
      profile: http://ogp.me/ns/profile#
      fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Kitsune Solar / Library Online</title>
<meta name=title content="Kitsune Solar / Library Online"><meta name=description content="Системный администратор и веб-разработчик. Я пишу статьи по системному администрированию и разработке различных систем, приложений и серверов."><meta name=keywords content="forum,powershell,ipb,ips,debian,linux,cmd,cmf,cms,vbulletin,bash,fedora,git,php,systemd,terminal,cloudflare,find,gdm,github"><link rel=preconnect href=https://fonts.googleapis.com crossorigin=anonymous><link rel=preconnect href=https://fonts.gstatic.com crossorigin=anonymous><link rel=preconnect href=https://gravatar.com crossorigin=anonymous><link rel=preconnect href=https://images.unsplash.com crossorigin=anonymous><link rel=preload href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous as=style onload='this.rel="stylesheet"'><noscript><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" crossorigin=anonymous></noscript><link rel=preload href=/css/vendor.bundle.css as=style><link rel=stylesheet href=/css/vendor.bundle.css><link rel=preload href=/ru/css/system.bundle.min.css as=style><link rel=stylesheet href=/ru/css/system.bundle.min.css><link rel=icon type=image/png sizes=16x16 href=https://lib.onl/favicon-16.png><link rel="shortcut icon" type=image/png sizes=16x16 href=https://lib.onl/favicon-16.png><link rel=apple-touch-icon sizes=16x16 href=https://lib.onl/favicon-16.png><link rel=icon type=image/png sizes=24x24 href=https://lib.onl/favicon-24.png><link rel="shortcut icon" type=image/png sizes=24x24 href=https://lib.onl/favicon-24.png><link rel=apple-touch-icon sizes=24x24 href=https://lib.onl/favicon-24.png><link rel=icon type=image/png sizes=32x32 href=https://lib.onl/favicon-32.png><link rel="shortcut icon" type=image/png sizes=32x32 href=https://lib.onl/favicon-32.png><link rel=apple-touch-icon sizes=32x32 href=https://lib.onl/favicon-32.png><link rel=icon type=image/png sizes=48x48 href=https://lib.onl/favicon-48.png><link rel="shortcut icon" type=image/png sizes=48x48 href=https://lib.onl/favicon-48.png><link rel=apple-touch-icon sizes=48x48 href=https://lib.onl/favicon-48.png><link rel=icon type=image/png sizes=64x64 href=https://lib.onl/favicon-64.png><link rel="shortcut icon" type=image/png sizes=64x64 href=https://lib.onl/favicon-64.png><link rel=apple-touch-icon sizes=64x64 href=https://lib.onl/favicon-64.png><link rel=icon type=image/png sizes=72x72 href=https://lib.onl/favicon-72.png><link rel="shortcut icon" type=image/png sizes=72x72 href=https://lib.onl/favicon-72.png><link rel=apple-touch-icon sizes=72x72 href=https://lib.onl/favicon-72.png><link rel=icon type=image/png sizes=80x80 href=https://lib.onl/favicon-80.png><link rel="shortcut icon" type=image/png sizes=80x80 href=https://lib.onl/favicon-80.png><link rel=apple-touch-icon sizes=80x80 href=https://lib.onl/favicon-80.png><link rel=icon type=image/png sizes=96x96 href=https://lib.onl/favicon-96.png><link rel="shortcut icon" type=image/png sizes=96x96 href=https://lib.onl/favicon-96.png><link rel=apple-touch-icon sizes=96x96 href=https://lib.onl/favicon-96.png><link rel=icon type=image/png sizes=128x128 href=https://lib.onl/favicon-128.png><link rel="shortcut icon" type=image/png sizes=128x128 href=https://lib.onl/favicon-128.png><link rel=apple-touch-icon sizes=128x128 href=https://lib.onl/favicon-128.png><link rel=icon type=image/png sizes=144x144 href=https://lib.onl/favicon-144.png><link rel="shortcut icon" type=image/png sizes=144x144 href=https://lib.onl/favicon-144.png><link rel=apple-touch-icon sizes=144x144 href=https://lib.onl/favicon-144.png><link rel=icon type=image/png sizes=152x152 href=https://lib.onl/favicon-152.png><link rel="shortcut icon" type=image/png sizes=152x152 href=https://lib.onl/favicon-152.png><link rel=apple-touch-icon sizes=152x152 href=https://lib.onl/favicon-152.png><link rel=icon type=image/png sizes=167x167 href=https://lib.onl/favicon-167.png><link rel="shortcut icon" type=image/png sizes=167x167 href=https://lib.onl/favicon-167.png><link rel=apple-touch-icon sizes=167x167 href=https://lib.onl/favicon-167.png><link rel=icon type=image/png sizes=180x180 href=https://lib.onl/favicon-180.png><link rel="shortcut icon" type=image/png sizes=180x180 href=https://lib.onl/favicon-180.png><link rel=apple-touch-icon sizes=180x180 href=https://lib.onl/favicon-180.png><link rel=icon type=image/png sizes=192x192 href=https://lib.onl/favicon-192.png><link rel="shortcut icon" type=image/png sizes=192x192 href=https://lib.onl/favicon-192.png><link rel=apple-touch-icon sizes=192x192 href=https://lib.onl/favicon-192.png><link rel=icon type=image/png sizes=196x196 href=https://lib.onl/favicon-196.png><link rel="shortcut icon" type=image/png sizes=196x196 href=https://lib.onl/favicon-196.png><link rel=apple-touch-icon sizes=196x196 href=https://lib.onl/favicon-196.png><link rel=icon type=image/png sizes=256x256 href=https://lib.onl/favicon-256.png><link rel="shortcut icon" type=image/png sizes=256x256 href=https://lib.onl/favicon-256.png><link rel=apple-touch-icon sizes=256x256 href=https://lib.onl/favicon-256.png><link rel=icon type=image/png sizes=300x300 href=https://lib.onl/favicon-300.png><link rel="shortcut icon" type=image/png sizes=300x300 href=https://lib.onl/favicon-300.png><link rel=apple-touch-icon sizes=300x300 href=https://lib.onl/favicon-300.png><link rel=icon type=image/png sizes=512x512 href=https://lib.onl/favicon-512.png><link rel="shortcut icon" type=image/png sizes=512x512 href=https://lib.onl/favicon-512.png><link rel=apple-touch-icon sizes=512x512 href=https://lib.onl/favicon-512.png><link rel=icon type=image/svg+xml sizes=any href=https://lib.onl/favicon.svg><link rel="shortcut icon" type=image/x-icon href=https://lib.onl/favicon.ico><link rel="shortcut icon" type=image/vnd.microsoft.icon href=https://lib.onl/favicon.ico><link rel=first href=https://lib.onl/ru/authors/kitsunesolar/><link rel=last href=https://lib.onl/ru/authors/kitsunesolar/page/4/><link rel=prev href=https://lib.onl/ru/authors/kitsunesolar/page/2/><link rel=next href=https://lib.onl/ru/authors/kitsunesolar/page/4/><link rel=canonical href=https://lib.onl/ru/authors/kitsunesolar/page/3/><link rel=alternate href=https://lib.onl/ hreflang=x-default><link rel=alternate href=https://lib.onl/ru/authors/kitsunesolar/ hreflang=ru><link rel=alternate href=https://lib.onl/en/authors/kitsunesolar/ hreflang=en><link rel=manifest type=application/manifest+json href=https://lib.onl/ru/manifest.json title="Library Online"><link rel=search type=application/opensearchdescription+xml href=https://lib.onl/ru/opensearch.xml title="Library Online"><link rel=alternate type=application/rss+xml href=https://lib.onl/ru/authors/kitsunesolar/index.xml title="Library Online"><meta name=application-name content="Library Online"><meta name=theme-color content="#f8f9fa" media="(prefers-color-scheme: light)"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lib.onl/favicon-512.png"><meta name=twitter:title content="Kitsune Solar"><meta name=twitter:description content="Заметки на тему администрирования и разработки различных систем, приложений и серверов."><meta property="og:title" content="Kitsune Solar"><meta property="og:description" content="Заметки на тему администрирования и разработки различных систем, приложений и серверов."><meta property="og:type" content="website"><meta property="og:url" content="https://lib.onl/ru/authors/kitsunesolar/"><meta property="og:image" content="https://lib.onl/favicon-512.png"><meta property="twitter:domain" content="lib.onl"><meta property="twitter:url" content="https://lib.onl/ru/authors/kitsunesolar/"><meta property="og:locale" content="ru_RU"><meta property="og:site_name" content="Library Online"><meta name=DC.Title content="Kitsune Solar"><meta name=DC.Subject content="Системный администратор и веб-разработчик. Я пишу статьи по системному администрированию и разработке различных систем, приложений и серверов."><meta name=DC.Description content="Системный администратор и веб-разработчик. Я пишу статьи по системному администрированию и разработке различных систем, приложений и серверов."><meta name=DC.Type content="Text"><meta name=DC.Source content="https://lib.onl/ru/authors/kitsunesolar/"><meta name=DC.Relation content="https://lib.onl/ru/authors/kitsunesolar/"><meta name=DC.Coverage content="World"><meta name=DC.Creator content="Library Online"><meta name=DC.Publisher content="Library Online"><meta name=DC.Contributor content="Library Online"><meta name=DC.Rights content="Library Online"><meta name=DC.Format content="Digital"><meta name=DC.Identifier content="https://lib.onl/ru/authors/kitsunesolar/"><meta name=DC.Language content="ru-RU"><meta name=DC.Provenance content="Library Online"><meta name=DC.RightsHolder content="Library Online"><meta name=DC.AccrualPeriodicity content="Weekly"><meta name=DC.AccrualPolicy content="Active"><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","name":"Library Online","url":"https://lib.onl/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","address":{"@type":"PostalAddress","addressCountry":"","addressLocality":"","addressRegion":"","postalCode":"","streetAddress":""},"contactPoint":{"@type":"ContactPoint","contactType":"","email":"","telephone":""},"description":"Заметки на тему администрирования и разработки различных систем, приложений и серверов.","foundingDate":"","legalName":"Library Online","logo":"https://lib.onl/","name":"Library Online","sameAs":[],"url":"https://lib.onl/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"ItemList","itemListElement":[{"@type":"SiteNavigationElement","name":"Статьи","position":10,"url":"https://lib.onl/ru/articles/"},{"@type":"SiteNavigationElement","name":"Q\u0026A","position":20,"url":"https://lib.onl/ru/qna/"},{"@type":"SiteNavigationElement","name":"Архив","position":100,"url":"https://lib.onl/ru/archive/"},{"@type":"SiteNavigationElement","name":"О проекте","position":999,"url":"https://lib.onl/ru/about/"},{"@type":"SiteNavigationElement","name":"META","position":9999,"url":"https://lib.onl/ru/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://lib.onl/ru/","name":"Главная","position":1},{"@type":"ListItem","item":"https://lib.onl/ru/authors/","name":"Авторы","position":2},{"@type":"ListItem","item":"https://lib.onl/ru/authors/kitsunesolar/","name":"Kitsune Solar","position":3}]}</script></head><body class="d-flex flex-column h-100 is-node type-authors"><header><nav class="navbar navbar-expand-lg navbar-light fixed-top border-bottom shadow-sm text-lg-center bg-light"><div class=container-fluid><a class=navbar-brand href=/ru/><img src=https://lib.onl/img/logo.min.svg alt=Логотип width=30 height=24 class="d-inline-block align-text-top"><h1 class="d-inline-block h5 m-0 ms-1">Library Online</h1></a><button type=button class=navbar-toggler data-bs-toggle=collapse data-bs-target=#navTopBar aria-controls=navTopBar aria-expanded=false aria-label='Переключить навигацию'>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navTopBar><ul class="navbar-nav me-auto"><li class=nav-item><a class=nav-link href=/ru/articles/><i class="fas fa-book fa-fw"></i>
<span>Статьи</span></a></li><li class=nav-item><a class=nav-link href=/ru/qna/><i class="fas fa-circle-question fa-fw"></i>
<span>Q&amp;A</span></a></li><li class=nav-item><a class=nav-link href=/ru/archive/><i class="fas fa-archive fa-fw"></i>
<span>Архив</span></a></li><li class=nav-item><a class=nav-link href=/ru/about/><i class="fas fa-info-circle fa-fw"></i>
<span>О проекте</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false><i class="fas fa-list fa-fw"></i>
<span>META</span></a><div class="dropdown-menu shadow"><a class="dropdown-item active" href=/ru/authors/><i class="fas fa-user-circle fa-fw"></i>
<span>Авторы</span>
</a><a class=dropdown-item href=/ru/categories/><i class="fas fa-folder-open fa-fw"></i>
<span>Категории</span>
</a><a class=dropdown-item href=/ru/tags/><i class="fas fa-tags fa-fw"></i>
<span>Теги</span></a></div></li></ul><ul class=navbar-nav><li class=nav-item><a class="nav-link d-lg-none" href=# data-bs-toggle=modal data-bs-target=#search-modal aria-label=Поиск><i class="fas fa-search fa-fw"></i>
<span>Поиск</span>
</a><a class="nav-link d-none d-lg-block" href=# data-bs-toggle=modal data-bs-target=#search-modal data-bs-tooltip data-bs-title=Поиск aria-label=Поиск><i class="fas fa-search fa-fw"></i></a></li></ul></div></div></nav></header><main class="wrapper flex-shrink-0"><div class="section py-3"><div class=container><nav style="--bs-breadcrumb-divider:'\2f '" class=small aria-label=breadcrumb><ol class="breadcrumb bg-light p-2 rounded"><li class=breadcrumb-item><a href=/ru/ aria-label=Главная><i class="fas fa-home fa-fw"></i></a></li><li class=breadcrumb-item><a href=/ru/authors/ aria-label=Авторы>Авторы</a></li><li class="breadcrumb-item active">Kitsune Solar</li></ol></nav><div class="row row-cols-1 row-cols-lg-2 g-3"><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Скрипт автоматического удаления устаревших файлов" class=d-block href=/ru/articles/2021/08/ca744dce-e607-52e6-9952-8ae04e052a5b/ data-bs-toggle=modal data-bs-target=#modal-069944bd560caa3b4ba3d7e8b5745498><picture><source srcset='https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Скрипт автоматического удаления устаревших файлов"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/ca744dce-e607-52e6-9952-8ae04e052a5b/ data-bs-toggle=modal data-bs-target=#modal-069944bd560caa3b4ba3d7e8b5745498>Скрипт автоматического удаления устаревших файлов</a></h2></div></header><div class=node-body><p>В одной компании стояла задача сделать файловый архив-помойку для хранения и пересылки документации в сторонние организации. Я накидал на PHP самописный интерфейс для загрузки файлов, а на bash&rsquo;е сделал скрипт автоматического удаления устаревших файлов. Небольшая заметка об этом скрипте.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Скрипт автоматического удаления устаревших файлов" class=d-block href=/ru/articles/2021/08/ca744dce-e607-52e6-9952-8ae04e052a5b/ data-bs-toggle=modal data-bs-target=#modal-069944bd560caa3b4ba3d7e8b5745498><img class="d-block rounded" src="https://images.unsplash.com/flagged/photo-1578728890856-8bbf3883aa6d?crop=center&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Скрипт автоматического удаления устаревших файлов"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/ca744dce-e607-52e6-9952-8ae04e052a5b/ data-bs-toggle=modal data-bs-target=#modal-069944bd560caa3b4ba3d7e8b5745498>Скрипт автоматического удаления устаревших файлов</a></h2></div></header><div class=node-body><p>В одной компании стояла задача сделать файловый архив-помойку для хранения и пересылки документации в сторонние организации. Я накидал на PHP самописный интерфейс для загрузки файлов, а на bash&rsquo;е сделал скрипт автоматического удаления устаревших файлов. Небольшая заметка об этом скрипте.</p></div></div></article></div><div class="modal fade" id=modal-069944bd560caa3b4ba3d7e8b5745498 tabindex=-1 aria-labelledby=modal-069944bd560caa3b4ba3d7e8b5745498-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-069944bd560caa3b4ba3d7e8b5745498-label><a href=/ru/articles/2021/08/ca744dce-e607-52e6-9952-8ae04e052a5b/>Скрипт автоматического удаления устаревших файлов</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>В одной компании стояла задача сделать файловый архив-помойку для хранения и пересылки документации в сторонние организации. Я накидал на PHP самописный интерфейс для загрузки файлов, а на bash&rsquo;е сделал скрипт автоматического удаления устаревших файлов. Небольшая заметка об этом скрипте.</p><p>Скрипт для удаления устаревших файлов очень прост, написан на bash&rsquo;е и основывается на утилите <code>find</code>. Утилита <code>find</code> имеет опцию <code>-mtime</code>, при помощи которого можно сделать выборку файлов по времени изменения:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-f58fbb1f023244f23b5245f77981c632><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find <span class=s2>&#34;/home/user&#34;</span> -type f -mtime +3</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-f58fbb1f023244f23b5245f77981c632 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь мы говорим утилите <code>find</code>, что необходимо найти и показать файлы, у которых с даты последнего изменения прошло более 3 дней. Если необходимо вывести файлы, дата изменения которых будет менее <code>3</code> дней, то ставим отрицательное значение <code>-3</code>.</p><p>Далее, конструируем конвейер, и при помощи <code>xargs</code> указываем команду удаления <code>rm -f</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0f464e612e72d0e90de2f2b27fdab6ad><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find <span class=s2>&#34;/home/user&#34;</span> -type f -mtime +3 -print0 <span class=p>|</span> xargs -0 rm -f</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0f464e612e72d0e90de2f2b27fdab6ad role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Сам скрипт провожу ниже.</p><h2>Скрипт</h2><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>delete-files.sh</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a96c677cd8f222b6c37d27e1f41890f9 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=delete-files.sh download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=delete-files.sh target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-a96c677cd8f222b6c37d27e1f41890f9><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/usr/bin/bash -e
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Script for automatically deleting outdated files.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># @package    Bash</span>
</span></span><span class=line><span class=cl><span class=c1># @author     Kitsune Solar &lt;mail@kitsune.solar&gt;</span>
</span></span><span class=line><span class=cl><span class=c1># @copyright  2023 iHub TO</span>
</span></span><span class=line><span class=cl><span class=c1># @license    MIT</span>
</span></span><span class=line><span class=cl><span class=c1># @version    0.1.0</span>
</span></span><span class=line><span class=cl><span class=c1># @link       https://lib.onl/ru/posts/2021/08/ca744dce-e607-52e6-9952-8ae04e052a5b/</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>days</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>1</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>dir</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>2</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>find <span class=s2>&#34;</span><span class=si>${</span><span class=nv>dir</span><span class=si>}</span><span class=s2>&#34;</span> -type f -mtime +<span class=si>${</span><span class=nv>days</span><span class=si>}</span> -print0 <span class=p>|</span> xargs -0 rm -f
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>exit</span> <span class=m>0</span></span></span></code></pre></div></div></div></div><p>В скрипте я вынес некоторые значения в переменные для удобной перенастройки. Вызывается скрипт следующем образом:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ea9293e8f69d350ba9c06af3fe902c63 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ea9293e8f69d350ba9c06af3fe902c63><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>delete-files.sh <span class=s2>&#34;3&#34;</span> <span class=s2>&#34;/path/to/storage&#34;</span></span></span></code></pre></div></div></div></div><p>Где:</p><ul><li><code>3</code> - количество дней, прошедших с момента последнего изменения файла.</li><li><code>/path/to/storage</code> - путь к файловому хранилищу, в котором необходимо удалять устаревшие файлы.</li></ul><h2>Автоматический запуск по расписанию</h2><p>Осталось добавить выполнение скрипта по cron&rsquo;у. Я указал время <code>23:59</code>, когда нагрузка на файловое хранилище минимальна:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a3e26c66c3fd752d5ca3b2e3fc0de09c><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Check &amp; remove old files in 23:59 every day.</span>
</span></span><span class=line><span class=cl><span class=m>59</span> <span class=m>23</span> * * * <span class=o>[</span>username<span class=o>]</span> /usr/bin/bash /path/to/delete-files.sh <span class=s2>&#34;3&#34;</span> <span class=s2>&#34;/path/to/storage&#34;</span> &gt; /dev/null 2&gt;<span class=p>&amp;</span><span class=m>1</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a3e26c66c3fd752d5ca3b2e3fc0de09c role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/bash/>#bash</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/find/>#find</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-08-19T15:03:46Z data-fn=date-local>2021/08/19 15:03:46 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Интересные модули Drupal" class=d-block href=/ru/articles/2021/08/28fa2886-aea6-5abc-9da8-43be56283cdb/ data-bs-toggle=modal data-bs-target=#modal-17d2ea086b31e7c1cf9be6e0c60b0eb3><picture><source srcset='https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Интересные модули Drupal"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/28fa2886-aea6-5abc-9da8-43be56283cdb/ data-bs-toggle=modal data-bs-target=#modal-17d2ea086b31e7c1cf9be6e0c60b0eb3>Интересные модули Drupal</a></h2></div></header><div class=node-body><p>Здесь собраны ссылки на интересные и необходимые для меня в работе модули.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Интересные модули Drupal" class=d-block href=/ru/articles/2021/08/28fa2886-aea6-5abc-9da8-43be56283cdb/ data-bs-toggle=modal data-bs-target=#modal-17d2ea086b31e7c1cf9be6e0c60b0eb3><img class="d-block rounded" src="https://images.unsplash.com/photo-1532622785990-d2c36a76f5a6?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Интересные модули Drupal"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/28fa2886-aea6-5abc-9da8-43be56283cdb/ data-bs-toggle=modal data-bs-target=#modal-17d2ea086b31e7c1cf9be6e0c60b0eb3>Интересные модули Drupal</a></h2></div></header><div class=node-body><p>Здесь собраны ссылки на интересные и необходимые для меня в работе модули.</p></div></div></article></div><div class="modal fade" id=modal-17d2ea086b31e7c1cf9be6e0c60b0eb3 tabindex=-1 aria-labelledby=modal-17d2ea086b31e7c1cf9be6e0c60b0eb3-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-17d2ea086b31e7c1cf9be6e0c60b0eb3-label><a href=/ru/articles/2021/08/28fa2886-aea6-5abc-9da8-43be56283cdb/>Интересные модули Drupal</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Здесь собраны ссылки на интересные и необходимые для меня в работе модули.</p><h2>Permissions by Term</h2><p><a title href=https://www.drupal.org/project/permissions_by_term target=_blank rel="noopener noreferrer nofollow">Модуль</a> позволяет применять права доступа к материалу путём добавления термина таксономии.</p><h2>Node View Permissions</h2><p><a title href=https://www.drupal.org/project/node_view_permissions target=_blank rel="noopener noreferrer nofollow">Модуль</a> разрешает или запрещает просматривать материал определённым ролям пользователей. Подобная функция была в Drupal 6, но в последующих версиях её убрали.</p><h2>Poll</h2><p><a title href=https://www.drupal.org/project/poll target=_blank rel="noopener noreferrer nofollow">Модуль</a> опросов. Позволяет создавать опросы в различной конфигурации.</p><h2>Scheduler</h2><p>Очень полезный <a title href=https://www.drupal.org/project/scheduler target=_blank rel="noopener noreferrer nofollow">модуль</a>, особенно редакторам. Модуль позволяет создавать отложенные материалы, которые необходимо опубликовать через определённое время.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/cms/>#cms</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cmf/>#cmf</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/drupal/>#drupal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/php/>#php</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-08-18T06:58:21Z data-fn=date-local>2021/08/18 06:58:21 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="XenForo: Первичные настройки движка и параметры системы" class=d-block href=/ru/articles/2021/08/8ddf3622-5dd8-5101-9c40-2f3e08f4a579/ data-bs-toggle=modal data-bs-target=#modal-ed82a298f279da922a8d7e913b1c002e><picture><source srcset='https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="XenForo: Первичные настройки движка и параметры системы"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/8ddf3622-5dd8-5101-9c40-2f3e08f4a579/ data-bs-toggle=modal data-bs-target=#modal-ed82a298f279da922a8d7e913b1c002e>XenForo: Первичные настройки движка и параметры системы</a></h2></div></header><div class=node-body><p>У меня в проекте находятся несколько форумов на движке XenForo. Здесь я собрал для себя первичные параметры и настройки движка XenForo.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="XenForo: Первичные настройки движка и параметры системы" class=d-block href=/ru/articles/2021/08/8ddf3622-5dd8-5101-9c40-2f3e08f4a579/ data-bs-toggle=modal data-bs-target=#modal-ed82a298f279da922a8d7e913b1c002e><img class="d-block rounded" src="https://images.unsplash.com/photo-1429772011165-0c2e054367b8?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="XenForo: Первичные настройки движка и параметры системы"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/8ddf3622-5dd8-5101-9c40-2f3e08f4a579/ data-bs-toggle=modal data-bs-target=#modal-ed82a298f279da922a8d7e913b1c002e>XenForo: Первичные настройки движка и параметры системы</a></h2></div></header><div class=node-body><p>У меня в проекте находятся несколько форумов на движке XenForo. Здесь я собрал для себя первичные параметры и настройки движка XenForo.</p></div></div></article></div><div class="modal fade" id=modal-ed82a298f279da922a8d7e913b1c002e tabindex=-1 aria-labelledby=modal-ed82a298f279da922a8d7e913b1c002e-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-ed82a298f279da922a8d7e913b1c002e-label><a href=/ru/articles/2021/08/8ddf3622-5dd8-5101-9c40-2f3e08f4a579/>XenForo: Первичные настройки движка и параметры системы</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>У меня в проекте находятся несколько форумов на движке XenForo. Здесь я собрал для себя первичные параметры и настройки движка XenForo.</p><h2>Файл конфигурации</h2><p>Примеры параметров в файле config.php для первоначальной установки и запуска системы.</p><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>config.php</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e78cfc88dd5028849c7df425f659c606 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=config.php download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=config.php target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-e78cfc88dd5028849c7df425f659c606><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Database.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;db&#39;</span><span class=p>][</span><span class=s1>&#39;host&#39;</span><span class=p>]</span>                             <span class=o>=</span> <span class=s1>&#39;127.0.0.1&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;db&#39;</span><span class=p>][</span><span class=s1>&#39;port&#39;</span><span class=p>]</span>                             <span class=o>=</span> <span class=mi>3306</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;db&#39;</span><span class=p>][</span><span class=s1>&#39;username&#39;</span><span class=p>]</span>                         <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;db&#39;</span><span class=p>][</span><span class=s1>&#39;password&#39;</span><span class=p>]</span>                         <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;db&#39;</span><span class=p>][</span><span class=s1>&#39;dbname&#39;</span><span class=p>]</span>                           <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;db&#39;</span><span class=p>][</span><span class=s1>&#39;socket&#39;</span><span class=p>]</span>                           <span class=o>=</span> <span class=k>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Unicode support.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;fullUnicode&#39;</span><span class=p>]</span>                            <span class=o>=</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Site-wide feature.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;enableTfa&#39;</span><span class=p>]</span>                              <span class=o>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;enableApi&#39;</span><span class=p>]</span>                              <span class=o>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;enableOneClickUpgrade&#39;</span><span class=p>]</span>                  <span class=o>=</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cookie.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;cookie&#39;</span><span class=p>][</span><span class=s1>&#39;prefix&#39;</span><span class=p>]</span>                       <span class=o>=</span> <span class=s1>&#39;xf_&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Data and script locations.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;externalDataPath&#39;</span><span class=p>]</span>                       <span class=o>=</span> <span class=s1>&#39;storage/data&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;externalDataUrl&#39;</span><span class=p>]</span>                        <span class=o>=</span> <span class=s1>&#39;storage/data&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;internalDataPath&#39;</span><span class=p>]</span>                       <span class=o>=</span> <span class=s1>&#39;storage/data.int&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;codeCachePath&#39;</span><span class=p>]</span>                          <span class=o>=</span> <span class=s1>&#39;%s/cache/code&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;tempDataPath&#39;</span><span class=p>]</span>                           <span class=o>=</span> <span class=s1>&#39;%s/temp&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;javaScriptUrl&#39;</span><span class=p>]</span>                          <span class=o>=</span> <span class=s1>&#39;js&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Auth.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nv>$config</span><span class=p>[</span><span class=s1>&#39;auth&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;algo&#39;</span> <span class=o>=&gt;</span> <span class=nx>PASSWORD_ARGON2ID</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Cache.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>$config[&#39;cache&#39;][&#39;enabled&#39;]                       = true;
</span></span></span><span class=line><span class=cl><span class=cm>$config[&#39;cache&#39;][&#39;provider&#39;]                      = &#39;Redis&#39;;
</span></span></span><span class=line><span class=cl><span class=cm>$config[&#39;cache&#39;][&#39;config&#39;]                        = [
</span></span></span><span class=line><span class=cl><span class=cm>  &#39;host&#39; =&gt; &#39;127.0.0.1&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  &#39;password&#39; =&gt; &#39;&#39;,
</span></span></span><span class=line><span class=cl><span class=cm>  &#39;database&#39; =&gt; 1
</span></span></span><span class=line><span class=cl><span class=cm>];
</span></span></span><span class=line><span class=cl><span class=cm>*/</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Guest page caching.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>$config[&#39;pageCache&#39;][&#39;enabled&#39;]                   = true;
</span></span></span><span class=line><span class=cl><span class=cm>$config[&#39;cache&#39;][&#39;context&#39;][&#39;page&#39;][&#39;provider&#39;]   = &#39;Filesystem&#39;;
</span></span></span><span class=line><span class=cl><span class=cm>$config[&#39;cache&#39;][&#39;context&#39;][&#39;page&#39;][&#39;config&#39;]     = [
</span></span></span><span class=line><span class=cl><span class=cm>  &#39;directory&#39; =&gt; &#39;&#39;
</span></span></span><span class=line><span class=cl><span class=cm>];
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></div></div></div></div><h2>Регистрация пользователей</h2><p>Параметры для регистрации пользователей.</p><p><strong>Регулярное выражение:</strong></p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-bbbeb671fed9aa6c5610fce019002eb2><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#(?!^[\d\-\_\s]+$)^(([a-zA-Z0-9\-\_\s]+)|(((\xD0[\x80-\xBF])|(\xD1[\x80-\xBF])|([0-9\-\_\s]))+))$#</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-bbbeb671fed9aa6c5610fce019002eb2 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Теги</h2><p>Параметры для ввода тегов.</p><p><strong>Регулярное выражение:</strong></p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-7eae021f3b6f163c9894535d9d667d3f><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>#(?!^[\d\-\_\s]+$)^(([a-zA-Z0-9\-\_\s]+)|(((\xD0[\x80-\xBF])|(\xD1[\x80-\xBF])|([0-9\-\_\s]))+))$#</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-7eae021f3b6f163c9894535d9d667d3f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Группы пользователей</h2><p>Настройки групп пользователей.</p><p><strong>Стандартные группы:</strong></p><ul><li>Unregistered / Unconfirmed <code>ID(1)</code></li><li>Registered <code>ID(2)</code></li><li>Administrative <code>ID(3)</code></li><li>Moderating <code>ID(4)</code></li></ul></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/cms/>#cms</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cmf/>#cmf</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/php/>#php</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/xenforo/>#xenforo</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-08-18T06:55:19Z data-fn=date-local>2021/08/18 06:55:19 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Условия в шаблонах XenForo 2" class=d-block href=/ru/articles/2021/08/f9a39e37-8816-5f80-8133-893f3dc8f352/ data-bs-toggle=modal data-bs-target=#modal-ca4ac77307b677ce8dab19860caf6f35><picture><source srcset='https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Условия в шаблонах XenForo 2"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/f9a39e37-8816-5f80-8133-893f3dc8f352/ data-bs-toggle=modal data-bs-target=#modal-ca4ac77307b677ce8dab19860caf6f35>Условия в шаблонах XenForo 2</a></h2></div></header><div class=node-body><p>Представляю список условий, которые можно использовать в шаблонах <strong>XenForo</strong>. Все возможные условия перечислить затруднительно, потому что существует множество различных вариантов фильтрации и выборки информации. Здесь представлены наиболее популярные варианты.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Условия в шаблонах XenForo 2" class=d-block href=/ru/articles/2021/08/f9a39e37-8816-5f80-8133-893f3dc8f352/ data-bs-toggle=modal data-bs-target=#modal-ca4ac77307b677ce8dab19860caf6f35><img class="d-block rounded" src="https://images.unsplash.com/photo-1488590528505-98d2b5aba04b?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Условия в шаблонах XenForo 2"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/f9a39e37-8816-5f80-8133-893f3dc8f352/ data-bs-toggle=modal data-bs-target=#modal-ca4ac77307b677ce8dab19860caf6f35>Условия в шаблонах XenForo 2</a></h2></div></header><div class=node-body><p>Представляю список условий, которые можно использовать в шаблонах <strong>XenForo</strong>. Все возможные условия перечислить затруднительно, потому что существует множество различных вариантов фильтрации и выборки информации. Здесь представлены наиболее популярные варианты.</p></div></div></article></div><div class="modal fade" id=modal-ca4ac77307b677ce8dab19860caf6f35 tabindex=-1 aria-labelledby=modal-ca4ac77307b677ce8dab19860caf6f35-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-ca4ac77307b677ce8dab19860caf6f35-label><a href=/ru/articles/2021/08/f9a39e37-8816-5f80-8133-893f3dc8f352/>Условия в шаблонах XenForo 2</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Представляю список условий, которые можно использовать в шаблонах <strong>XenForo</strong>. Все возможные условия перечислить затруднительно, потому что существует множество различных вариантов фильтрации и выборки информации. Здесь представлены наиболее популярные варианты.</p><p>С этой статьи я начинаю попытку восстановления накопленных данных за период моей деятельности в качестве исследователя и разработчика веб-приложений.</p><h2>Условия в шаблонах</h2><ol><li>Отображение информации только администраторам.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-2c4e96b5ee8bc33427373fcba14834ad><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$xf.visitor.is_admin&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-2c4e96b5ee8bc33427373fcba14834ad role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=2><li>Отображение информации только модераторам.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-36aac9b2e44e5bf22fabd0a76c220e15><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$xf.visitor.is_moderator&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-36aac9b2e44e5bf22fabd0a76c220e15 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=3><li>Отображение информации только администраторам и модераторам.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ea1f36da573ddb7e708d18f2151062df><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$xf.visitor.is_admin OR $xf.visitor.is_moderator&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ea1f36da573ddb7e708d18f2151062df role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=4><li>Отображение информации только зарегистрированному пользователю</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-07b9e3c95d763daf3d4b828f260122ec><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$xf.visitor.user_id&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-07b9e3c95d763daf3d4b828f260122ec role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=5><li>Отображение информации гостю.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-5aac051d7a449d098aea17434edb4cde><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;!$xf.visitor.user_id&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-5aac051d7a449d098aea17434edb4cde role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=6><li>Отображение разной информации зарегистрированному пользователю и гостю.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-03d4c7f4520eb8641a6306ea92e084d5><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;!$xf.visitor.user_id&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content for members --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:else</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content for guests --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-03d4c7f4520eb8641a6306ea92e084d5 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=7><li>Отображение информации только заблокированным пользователям.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-721a6f9a6671ad3ee7435aaf7de6ce0e><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$user.is_banned&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-721a6f9a6671ad3ee7435aaf7de6ce0e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=8><li>Отображение информации только если у пользователя симпатий больше определённого количества.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c0900d5d34261169ef10b15dee4d1ca6><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$user.like_count|number &gt; X&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c0900d5d34261169ef10b15dee4d1ca6 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=9><li>Отображение информации только если у пользователя сообщений больше определённого количества.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-8 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-db605c2f81e2464929e7cb01c990ac12><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.message_count|number} &gt; X&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-db605c2f81e2464929e7cb01c990ac12 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=10><li>Отображение информации только если у пользователя очков больше определённого количества.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-9 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-87d329c6c2f59c836414960ba6512b8e><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$user.trophy_points|number &gt; X&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-87d329c6c2f59c836414960ba6512b8e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=11><li>Отображение информации определённому пользователю.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-10 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-30e2ebf956891ac603028d84e16e34ed><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$xf.visitor.user_id == X&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-30e2ebf956891ac603028d84e16e34ed role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=12><li>Отображение информации определённым пользователям.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-11 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-04d24fe92aa7ec1f6f89da8c16691ffe><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;in_array($xf.visitor.user_id, [X, Y, Z])&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-04d24fe92aa7ec1f6f89da8c16691ffe role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=13><li>(1) Отображение информации определённым группам пользователей.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-12 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a31721101111a645680248bec2628c6b><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{{$xf.visitor.isMemberOf([X, Y])}}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a31721101111a645680248bec2628c6b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=13><li>(2) Отображение информации определённой группе пользователей.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-13 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0c29f973ee5da2fbab82cb7a5a2353ad><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{{$xf.visitor.isMemberOf(X)}}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0c29f973ee5da2fbab82cb7a5a2353ad role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=14><li>(1) Скрытие информации от определённых групп пользователей.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-14 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-e6f95ab7efd4bac37f5d528797e4ae82><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{{!$xf.visitor.isMemberOf([X, Y])}}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e6f95ab7efd4bac37f5d528797e4ae82 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=14><li>(2) Скрытие информации от определённой группы пользователей.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-15 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-831d941250e1386ce376d115ef04f85b><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{{!$xf.visitor.isMemberOf(X)}}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-831d941250e1386ce376d115ef04f85b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=15><li>(1) Отображение информации после первого сообщения в теме.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-16 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-33874c226c8654d481d3524f1542638f><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$post.position % $xf.options.messagesPerPage == 0&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-33874c226c8654d481d3524f1542638f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=15><li>(2) Отображение информации через определённое количества сообщений.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-17 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-41ffad1ac506104666701df168d68fae><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$post.position % $xf.options.messagesPerPage == X&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-41ffad1ac506104666701df168d68fae role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=16><li>Отображение информации на странице, на которой присутствует боковая панель.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-18 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-8ee0119b967bf7629cb3a915fddbe7f3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$sidebar&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-8ee0119b967bf7629cb3a915fddbe7f3 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=17><li>Отображение информации на главной (домашней) странице форума.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-19 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-17d5b249f3cfe8224514bc7ff241ace4><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;forum_list&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-17d5b249f3cfe8224514bc7ff241ace4 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=18><li>Скрытие информации только с главной (домашней) странице форума.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-20 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-20eea2309e983e7de3450ca3a06cb9b2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template !== &#39;forum_list&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-20eea2309e983e7de3450ca3a06cb9b2 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=19><li>Отображение информации на странице создания новой темы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-21 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-89a320c97f05afbe3ae5bbaabccc8369><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;forum_post_thread&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-89a320c97f05afbe3ae5bbaabccc8369 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=20><li>Скрытие информации на странице создания новой темы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-22 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a5c7bd3afebccc5a684913a320d3fab3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;forum_post_thread&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a5c7bd3afebccc5a684913a320d3fab3 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=21><li>Отображение информации на странице создания нового ресурса.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-23 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-7f2d7c5dec5a1e35abd0984ae9f7e8f0><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;xfrm_category_add_resource&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-7f2d7c5dec5a1e35abd0984ae9f7e8f0 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=22><li>Скрытие информации на странице создания нового ресурса.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-24 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-6a5799c127ba7dd5fdf3991498d39688><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;xfrm_category_add_resource&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-6a5799c127ba7dd5fdf3991498d39688 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=23><li>Отображение информации на странице поисковой формы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-25 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-5343bdbb9a4b999b1ff455ee2a4fb616><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;search_form&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-5343bdbb9a4b999b1ff455ee2a4fb616 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=24><li>Скрытие информации на странице поисковой формы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-26 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-4090fc9a87bdf55a17b218e5e5579eae><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;search_form&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-4090fc9a87bdf55a17b218e5e5579eae role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=25><li>Отображение информации на странице &ldquo;Что нового?&rdquo;.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-27 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1a2d2467cf21e3be8b372fbc2bb3dfe6><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;whats_new&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1a2d2467cf21e3be8b372fbc2bb3dfe6 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=26><li>Скрытие информации на странице &ldquo;Что нового?&rdquo;.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-28 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a9d7dc054030a7724f40851674defba3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;whats_new&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a9d7dc054030a7724f40851674defba3 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=27><li>Отображение информации на странице просмотра личной переписки.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-29 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-751da7fb814c2639b10fe7c8c821a531><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;conversation_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-751da7fb814c2639b10fe7c8c821a531 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=28><li>Скрытие информации на странице просмотра личной переписки.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-30 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-734038600ad1153603e37ccee58b348e><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;conversation_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-734038600ad1153603e37ccee58b348e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=29><li>Отображение информации на странице просмотра списка личных переписок.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-31 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a09731e4cfa8c9c6acec468aaf25a477><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;conversation_list&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a09731e4cfa8c9c6acec468aaf25a477 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=30><li>Скрытие информации на странице просмотра списка личных переписок.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-32 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-d0da692cede1892374cc1ca1e5a22c8d><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;conversation_list&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-d0da692cede1892374cc1ca1e5a22c8d role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=31><li>Отображение информации на главной странице ресурсов.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-33 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-8f4dbd01cc3aba2a06e0c7a74adfab50><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;xfrm_overview&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-8f4dbd01cc3aba2a06e0c7a74adfab50 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=32><li>Скрытие информации на главной странице ресурсов.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-34 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ef055ab8297cf048ce3f77a6fd20b552><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;xfrm_overview&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ef055ab8297cf048ce3f77a6fd20b552 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=33><li>Отображение информации на странице просмотра ресурса.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-35 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1fd37b5c9246eec923ecad80842fbfff><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;xfrm_resource_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1fd37b5c9246eec923ecad80842fbfff role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=34><li>Скрытие информации на странице просмотра ресурса.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-36 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-9de250bd6bb5033773fbf2ffeea33cfd><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;xfrm_resource_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-9de250bd6bb5033773fbf2ffeea33cfd role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=35><li>Отображение информации на странице просмотра темы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-37 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-8f06e95faedfaa4b6b4789ad2239c828><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template == &#39;thread_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-8f06e95faedfaa4b6b4789ad2239c828 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=36><li>Скрытие информации на странице просмотра темы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-38 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ea6be31d43bc63659eabea245f2184ab><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template !=&#39;thread_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ea6be31d43bc63659eabea245f2184ab role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=37><li>Отображение информации на странице просмотра форума (раздела).</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-39 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-f0a453fc5cd9a5810f741da635d703ce><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template ==&#39;forum_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-f0a453fc5cd9a5810f741da635d703ce role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=38><li>Скрытие информации на странице просмотра форума (раздела).</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-40 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0760edd6061b4b1208c2f3d77e097b90><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$template != &#39;forum_view&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0760edd6061b4b1208c2f3d77e097b90 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=39><li>Отображение информации &ldquo;наказанным&rdquo; пользователям.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-41 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-7edafd37e6bba9a1c1bf2cf95cdce50a><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.Option.is_discouraged}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-7edafd37e6bba9a1c1bf2cf95cdce50a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=40><li>Отображение информации пользователям, которые имеют Gravatar.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-42 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-48fb114400c2f06e69bbc41cebe0f418><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.gravatar}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-48fb114400c2f06e69bbc41cebe0f418 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=41><li>Отображение информации пользователям поддержки форума.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-43 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fc5458be10bbdca4aec85b98dc21118e><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.is_staff}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fc5458be10bbdca4aec85b98dc21118e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=42><li>Отображение информации пользователям без подтверждённого адреса e-mail.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-44 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-50105f8c8298991463dc5355811b2efc><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.isAwaitingEmailConfirmation()}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-50105f8c8298991463dc5355811b2efc role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=43><li>Отображение информации в нескольких форумах (разделах).</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-45 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fa975cbb75c5779403ee114219f2db28><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;in_array({$forum.node_id}, [X, Y, Z])&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fa975cbb75c5779403ee114219f2db28 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=44><li>Скрытие информации в нескольких форумах (разделах).</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-46 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-683ee5145e8cb5da1d363d98124c4cf9><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;in_array($forum.node_id, [X, Y, Z])&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-683ee5145e8cb5da1d363d98124c4cf9 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=45><li>Отображение информации в определённом форуме (разделе).</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-47 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-aed8adcecaf48522cf082e143cc445a2><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$forum.node_id == X&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-aed8adcecaf48522cf082e143cc445a2 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=46><li>Скрытие информации в определённом форуме (разделе).</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-48 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c11f5e4160cdea6f72f1fcf525c146d3><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;$forum.node_id != 3&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c11f5e4160cdea6f72f1fcf525c146d3 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=47><li>Отображение информации только после первого сообщения в каждой теме.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-49 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-14d948122ba03db637a2dc43ff7d4462><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$post.position} % {$xf.options.messagesPerPage} == 1&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-14d948122ba03db637a2dc43ff7d4462 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=48><li>Отображение информации только внутри первого сообщения в каждой теме.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-50 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-17235a500f53160c19a83c8e00e29e08><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$post.position} % {$xf.options.messagesPerPage} == 0&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-17235a500f53160c19a83c8e00e29e08 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=49><li>Отображение информации только при заполненном поле местоположения.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-51 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c158a324dbea182a7dac23e70c0559ff><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.location}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c158a324dbea182a7dac23e70c0559ff role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=50><li>Отображение информации только при заполненном поле веб-сайта.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-52 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a9aa0fda2edd269a9a7ff2e15ee7a7cf><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.website}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a9aa0fda2edd269a9a7ff2e15ee7a7cf role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=51><li>Отображение информации при указанной подписи.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-53 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fcee751232384532ca820b6b16fc890e><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.signature}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fcee751232384532ca820b6b16fc890e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=52><li>Отображение информации только активированным пользователям.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-54 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-baf3f4ccb3d11c7561e9ef83772ffef8><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.user_state} == &#39;valid&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-baf3f4ccb3d11c7561e9ef83772ffef8 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=53><li>Отображение информации только пользователям, ожидающим подтверждения адреса e-mail.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-55 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-aea5ae52002931cb7ba7a591f1d00f34><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.user_state} == &#39;email_confirm_edit&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-aea5ae52002931cb7ba7a591f1d00f34 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=54><li>Отображение информации только пользователям с проблемным адресом e-mail.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-56 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-24ba0cd00803524eab538de8f754b38b><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$xf.visitor.user_state} == &#39;email_bounce&#39;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-24ba0cd00803524eab538de8f754b38b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=55><li>Отображение информации, если ID пользователя = ID автора темы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-57 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-37c711aa833f80eccf24bed4cd058130><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$__globals.thread} AND {$__globals.thread.user_id} == {$user.user_id}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-37c711aa833f80eccf24bed4cd058130 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=56><li>Отображение информации пользователю, который является автором темы.</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-58 shortcode-codeblock-html"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-b58080213244bc2958aba49dee87072d><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>xf:if</span> <span class=na>is</span><span class=o>=</span><span class=s>&#34;{$thread.user_id} == {$xf.visitor.user_id}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- content --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>xf:if</span><span class=p>&gt;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-b58080213244bc2958aba49dee87072d role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/html/>#html</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/xenforo/>#xenforo</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cms/>#cms</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cmf/>#cmf</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-08-17T12:21:10Z data-fn=date-local>2021/08/17 12:21:10 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Настройка и использование Git" class=d-block href=/ru/articles/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/ data-bs-toggle=modal data-bs-target=#modal-0110dd716708232031f205e093b615ce><picture><source srcset='https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Настройка и использование Git"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/ data-bs-toggle=modal data-bs-target=#modal-0110dd716708232031f205e093b615ce>Настройка и использование Git</a></h2></div></header><div class=node-body><p>В этой заметке я приведу параметры Git, которые сам использую при работе с репозиториями.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Настройка и использование Git" class=d-block href=/ru/articles/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/ data-bs-toggle=modal data-bs-target=#modal-0110dd716708232031f205e093b615ce><img class="d-block rounded" src="https://images.unsplash.com/photo-1556075798-4825dfaaf498?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Настройка и использование Git"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/ data-bs-toggle=modal data-bs-target=#modal-0110dd716708232031f205e093b615ce>Настройка и использование Git</a></h2></div></header><div class=node-body><p>В этой заметке я приведу параметры Git, которые сам использую при работе с репозиториями.</p></div></div></article></div><div class="modal fade" id=modal-0110dd716708232031f205e093b615ce tabindex=-1 aria-labelledby=modal-0110dd716708232031f205e093b615ce-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-0110dd716708232031f205e093b615ce-label><a href=/ru/articles/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/>Настройка и использование Git</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>В этой заметке я приведу параметры Git, которые сам использую при работе с репозиториями.</p><h2>Первичная настройка</h2><p>Для начала работы с Git&rsquo;ом, его необходимо хотя бы минимально настроить.</p><ol><li>Указать своё имя:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-52c0b3e252dfd4b26c5823f984ab7ab3><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --global user.name <span class=s2>&#34;John Doe&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-52c0b3e252dfd4b26c5823f984ab7ab3 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=2><li>Указать свой адрес e-mail:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1b5dabbd8d935405251333a1d573ed5e><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --global user.email <span class=s2>&#34;johndoe@example.com&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1b5dabbd8d935405251333a1d573ed5e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Настройка подписи</h2><p>Хорошим тоном будет считаться подпись каждого своего коммита.</p><ol><li>Выяснить какие ключи установлены в системе (о создании ключей я публиковал заметку <span class="shortcode shortcode-uuid"><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/>GnuPG: Создание и работа с ключами шифрования</a></span>):</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fa6ea3699eefd1dec365a0b5190edb50><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --list-secret-keys --keyid-format<span class=o>=</span>long</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fa6ea3699eefd1dec365a0b5190edb50 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=2><li>Указать Git&rsquo;у всегда подписывать каждый коммит:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-37150bd10edd6821e569dfbb25f1a553><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --global commit.gpgsign true</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-37150bd10edd6821e569dfbb25f1a553 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ol start=3><li>Указать Git&rsquo;у идентификатор ключа для подписи коммита:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-cf15317476073f2fb067703764ceddbb><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --global user.signingkey 3AA5C34371567BD2</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-cf15317476073f2fb067703764ceddbb role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Хранилище паролей</h2><p>Git по умолчанию не сохраняет регистрационные данные для репозиториев. Эта настройка позволяет указать Git&rsquo;у использовать для хранения регистрационных данных текстовый файл <code>~/.git-credentials</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-d836a2c3d5ff3dc3c86720bbcae33876><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --global credential.helper store</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-d836a2c3d5ff3dc3c86720bbcae33876 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Отмена изменений</h2><p>Отмена конкретного коммита:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-e10ea22442d197fcd251bf501723092f><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git revert <span class=o>[</span>commit<span class=o>]</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e10ea22442d197fcd251bf501723092f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Отмена 2-х коммитов подряд:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ee972f4e4f9594f673a50577e47b4c52><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git revert HEAD~2</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ee972f4e4f9594f673a50577e47b4c52 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Модули</h2><p>Добавление модуля:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-8 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ef21a00f0ee99fa3c3d7b41451e644a2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git submodule add https://github.com/<span class=o>[</span>MODULE<span class=o>]</span> <span class=o>[</span>MODULE<span class=o>]</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ef21a00f0ee99fa3c3d7b41451e644a2 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Рекурсивное обновление всех модулей:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-9 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-84d1d691398704fd4135675db8904d4a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git submodule update --recursive --remote --merge</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-84d1d691398704fd4135675db8904d4a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Удаление модуля:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-10 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c9deb3ce2545b5b2ff255738da1dd25d><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git submodule deinit -f <span class=o>[</span>MODULE<span class=o>]</span>  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=o>&amp;&amp;</span> git rm -r --cached <span class=o>[</span>MODULE<span class=o>]</span>  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=o>&amp;&amp;</span> rm -rf .git/modules/<span class=o>[</span>MODULE<span class=o>]</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=o>&amp;&amp;</span> rm -rf <span class=o>[</span>MODULE<span class=o>]</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c9deb3ce2545b5b2ff255738da1dd25d role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Изменение адреса репозитория</h2><p>Показать текущий адрес:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-11 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-2196d6372f8eec0afcd5339d72f2e0c9><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git remote -v</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-2196d6372f8eec0afcd5339d72f2e0c9 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Установить новый адрес:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-12 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-f94bfe376be55f735c6228420e572712><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git remote set-url origin <span class=s1>&#39;[URL]&#39;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-f94bfe376be55f735c6228420e572712 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Изменение описания последнего commit&rsquo;а</h2><p>Если закралась ошибка в описании изменений кода при последнем commit&rsquo;е, это описание можно изменить при помощи команды:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-13 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-344720e813907a99747381c90f5f1122><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git commit --amend -m <span class=s1>&#39;New commit message.&#39;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-344720e813907a99747381c90f5f1122 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Далее, изменённый коммит принудительно отправить на сервер:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-14 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-9cc0a42f3df1659acd31ffe5d01f4f81><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git push --force <span class=s1>&#39;[remoteName]&#39;</span> <span class=s1>&#39;[branchName]&#39;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-9cc0a42f3df1659acd31ffe5d01f4f81 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-15 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-41bfe1d50c498d3271104b7dbf8b3e1b><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git push --force <span class=s1>&#39;origin&#39;</span> <span class=s1>&#39;main&#39;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-41bfe1d50c498d3271104b7dbf8b3e1b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/git/>#git</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-08-14T15:52:38Z data-fn=date-local>2021/08/14 15:52:38 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Зеркалирование репозитория между хостингами" class=d-block href=/ru/articles/2021/07/3834fbed-71c8-5979-b6c2-236269f5ecea/ data-bs-toggle=modal data-bs-target=#modal-17e667c51f71676b36e78ff1fc2e847e><picture><source srcset='https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Зеркалирование репозитория между хостингами"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/07/3834fbed-71c8-5979-b6c2-236269f5ecea/ data-bs-toggle=modal data-bs-target=#modal-17e667c51f71676b36e78ff1fc2e847e>Зеркалирование репозитория между хостингами</a></h2></div></header><div class=node-body><p>В предыдущей статье <span class="shortcode shortcode-uuid"><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/>Синхронизация репозитория от GitHub к GitLab</a></span> я рассказал о том, как организовать синхронизацию между репозиториями GIT на разных хостингах, в частности, между GitHub и GitLab. В итоге, я решил сделать <a title href=https://github.com/ghastore/github-mirror target=_blank rel="noopener noreferrer nofollow">собственный GitHub Action</a>, который позволяет полностью зеркалировать репозитории.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Зеркалирование репозитория между хостингами" class=d-block href=/ru/articles/2021/07/3834fbed-71c8-5979-b6c2-236269f5ecea/ data-bs-toggle=modal data-bs-target=#modal-17e667c51f71676b36e78ff1fc2e847e><img class="d-block rounded" src="https://images.unsplash.com/photo-1611854571485-982a1f4ba294?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Зеркалирование репозитория между хостингами"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/07/3834fbed-71c8-5979-b6c2-236269f5ecea/ data-bs-toggle=modal data-bs-target=#modal-17e667c51f71676b36e78ff1fc2e847e>Зеркалирование репозитория между хостингами</a></h2></div></header><div class=node-body><p>В предыдущей статье <span class="shortcode shortcode-uuid"><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/>Синхронизация репозитория от GitHub к GitLab</a></span> я рассказал о том, как организовать синхронизацию между репозиториями GIT на разных хостингах, в частности, между GitHub и GitLab. В итоге, я решил сделать <a title href=https://github.com/ghastore/github-mirror target=_blank rel="noopener noreferrer nofollow">собственный GitHub Action</a>, который позволяет полностью зеркалировать репозитории.</p></div></div></article></div><div class="modal fade" id=modal-17e667c51f71676b36e78ff1fc2e847e tabindex=-1 aria-labelledby=modal-17e667c51f71676b36e78ff1fc2e847e-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-17e667c51f71676b36e78ff1fc2e847e-label><a href=/ru/articles/2021/07/3834fbed-71c8-5979-b6c2-236269f5ecea/>Зеркалирование репозитория между хостингами</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>В предыдущей статье <span class="shortcode shortcode-uuid"><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/>Синхронизация репозитория от GitHub к GitLab</a></span> я рассказал о том, как организовать синхронизацию между репозиториями GIT на разных хостингах, в частности, между GitHub и GitLab. В итоге, я решил сделать <a title href=https://github.com/ghastore/github-mirror target=_blank rel="noopener noreferrer nofollow">собственный GitHub Action</a>, который позволяет полностью зеркалировать репозитории.</p><h2>Использование</h2><p>Для подключения зеркалирования, к примеру, с GitHub на GitLab, необходимо в исходном репозитории создать файл <code>.github/workflows/mirror.yml</code>, в котором указать следующее содержимое:</p><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>mirror.yml</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-d72d887504640e418ce52df0ca628964 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=mirror.yml download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=mirror.yml target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-d72d887504640e418ce52df0ca628964><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Repository Mirror&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mirror</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Mirror&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>pkgstore/github-action-mirror@main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>src_repo</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://github.com/${{ github.repository }}.git&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>src_user</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;${{ secrets.MIRROR_SOURCE_USER_GITHUB }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>src_token</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;${{ secrets.MIRROR_SOURCE_TOKEN_GITHUB }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>dsc_repo</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;https://gitlab.com/${{ github.repository }}.git&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>dsc_user</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;${{ secrets.MIRROR_TARGET_USER_GITLAB }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>dsc_token</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;${{ secrets.MIRROR_TARGET_TOKEN_GITLAB }}&#34;</span></span></span></code></pre></div></div></div></div><ul><li><code>src_repo</code> - <strong>URL</strong> исходного репозитория.</li><li><code>src_user</code> - <strong>пользователь</strong> исходного репозитория.</li><li><code>src_token</code> - <strong>токен пользователя</strong> исходного репозитория.</li><li><code>dsc_repo</code> - <strong>URL</strong> зеркального репозитория.</li><li><code>dsc_user</code> - <strong>пользователь</strong> зеркального репозитория.</li><li><code>dsc_token</code> - <strong>токен пользователя</strong> зеркального репозитория.</li></ul><p>В этом коде стоит обратить внимание на параметр <code>target_repo</code>. GitLab позволяет автоматически создавать репозиторий при зеркалировании, а так как у меня адреса репозиториев совпадают между GitHub и GitLab, мне гораздо проще выстроить конструкцию <code>https://gitlab.com/${{ github.repository }}.git</code>. Переменная <code>${{ github.repository }}</code> содержит имя пользователя / организации и название репозитория, и, при настройке зеркалирования репозитория на GitHub&rsquo;е, зеркало репозитория автоматически создаётся на GitLab&rsquo;е.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/git/>#git</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/github/>#github</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/gitlab/>#gitlab</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/mirror/>#mirror</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/sync/>#sync</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/action/>#action</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-07-06T17:40:43Z data-fn=date-local>2021/07/06 17:40:43 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Генератор иконок для сайта" class=d-block href=/ru/articles/2021/05/841ba281-a22b-55ee-b97d-251a5dc111d8/ data-bs-toggle=modal data-bs-target=#modal-88a4d8a2b89716a048c9580637349a93><picture><source srcset='https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Генератор иконок для сайта"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/841ba281-a22b-55ee-b97d-251a5dc111d8/ data-bs-toggle=modal data-bs-target=#modal-88a4d8a2b89716a048c9580637349a93>Генератор иконок для сайта</a></h2></div></header><div class=node-body><p>Сделал для сайта автоматизированное создание иконок типа <code>favicon</code>, которыми пользуются браузеры и устройства для своих нужд.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Генератор иконок для сайта" class=d-block href=/ru/articles/2021/05/841ba281-a22b-55ee-b97d-251a5dc111d8/ data-bs-toggle=modal data-bs-target=#modal-88a4d8a2b89716a048c9580637349a93><img class="d-block rounded" src="https://images.unsplash.com/photo-1554061523-c90d630a7ac9?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Генератор иконок для сайта"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/841ba281-a22b-55ee-b97d-251a5dc111d8/ data-bs-toggle=modal data-bs-target=#modal-88a4d8a2b89716a048c9580637349a93>Генератор иконок для сайта</a></h2></div></header><div class=node-body><p>Сделал для сайта автоматизированное создание иконок типа <code>favicon</code>, которыми пользуются браузеры и устройства для своих нужд.</p></div></div></article></div><div class="modal fade" id=modal-88a4d8a2b89716a048c9580637349a93 tabindex=-1 aria-labelledby=modal-88a4d8a2b89716a048c9580637349a93-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-88a4d8a2b89716a048c9580637349a93-label><a href=/ru/articles/2021/05/841ba281-a22b-55ee-b97d-251a5dc111d8/>Генератор иконок для сайта</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Сделал для сайта автоматизированное создание иконок типа <code>favicon</code>, которыми пользуются браузеры и устройства для своих нужд.</p><p>Я накидал небольшой скрипт, состоящий из двух функций <code>png()</code> и <code>ico()</code>. Функция <code>png()</code> берёт файл <code>favicon.svg</code> и преобразует его в PNG, указанных в массиве <code>size</code>, размеров. Функция <code>ico()</code> также берёт файл <code>favicon.svg</code> и преобразует его в формат ICO, который содержит в себе несколько размеров изображения.</p><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>favicon.sh</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-4ffa91e08320307b106e0d64aa6b819e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=favicon.sh download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=favicon.sh target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-4ffa91e08320307b106e0d64aa6b819e><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=cp>#!/usr/bin/bash -e
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># Generating &#39;favicon.ico&#39; file.</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># @package    Bash</span>
</span></span><span class=line><span class=cl><span class=c1># @author     Kitsune Solar &lt;mail@kitsune.solar&gt;</span>
</span></span><span class=line><span class=cl><span class=c1># @copyright  2023 iHub TO</span>
</span></span><span class=line><span class=cl><span class=c1># @license    MIT</span>
</span></span><span class=line><span class=cl><span class=c1># @version    0.1.0</span>
</span></span><span class=line><span class=cl><span class=c1># @link       https://lib.onl/ru/posts/2021/05/841ba281-a22b-55ee-b97d-251a5dc111d8/</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>size</span><span class=o>=(</span> <span class=m>16</span> <span class=m>24</span> <span class=m>32</span> <span class=m>48</span> <span class=m>64</span> <span class=m>72</span> <span class=m>80</span> <span class=m>96</span> <span class=m>128</span> <span class=m>144</span> <span class=m>152</span> <span class=m>167</span> <span class=m>180</span> <span class=m>192</span> <span class=m>196</span> <span class=m>256</span> <span class=m>300</span> <span class=m>512</span> <span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>file_svg</span><span class=o>=</span><span class=s1>&#39;favicon.svg&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>file_ico</span><span class=o>=</span><span class=s1>&#39;favicon.ico&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>rsvg</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span> <span class=nb>command</span> -v rsvg-convert <span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>convert</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span> <span class=nb>command</span> -v convert <span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>identify</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span> <span class=nb>command</span> -v identify <span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>png<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  _check_file
</span></span><span class=line><span class=cl>  <span class=k>for</span> i in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>size</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=si>${</span><span class=nv>rsvg</span><span class=si>}</span> -w <span class=s2>&#34;</span><span class=si>${</span><span class=nv>i</span><span class=si>}</span><span class=s2>&#34;</span> -h <span class=s2>&#34;</span><span class=si>${</span><span class=nv>i</span><span class=si>}</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file_svg</span><span class=si>}</span><span class=s2>&#34;</span> -o <span class=s2>&#34;favicon-</span><span class=si>${</span><span class=nv>i</span><span class=si>}</span><span class=s2>.png&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>done</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ico<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  _check_file
</span></span><span class=line><span class=cl>  <span class=si>${</span><span class=nv>convert</span><span class=si>}</span> -density <span class=s1>&#39;256x256&#39;</span> -background <span class=s1>&#39;transparent&#39;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file_svg</span><span class=si>}</span><span class=s2>&#34;</span> -define <span class=s1>&#39;icon:auto-resize&#39;</span> -colors <span class=s1>&#39;256&#39;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file_ico</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  <span class=si>${</span><span class=nv>identify</span><span class=si>}</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file_ico</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>_check_file<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=o>[[</span> -f <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file_svg</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>]]</span> <span class=o>||</span> <span class=o>{</span> <span class=nb>printf</span> <span class=s1>&#39;%s does not exist!\n&#39;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>file_svg</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=nb>exit</span> 1<span class=p>;</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span></span></span></code></pre></div></div></div></div><h2>Использование</h2><p>Для работы скрипта необходимо, чтобы в системе были установлены <strong>RSVG</strong> и <strong>ImageMagick</strong>. Скрипт можно сохранить с произвольным именем, например, <code>favicon.sh</code> в директорию, где находится изображение <code>favicon.svg</code>. Далее, вызывать функции следующим образом:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ea579290ed364f21f22fcede46f98eed role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ea579290ed364f21f22fcede46f98eed><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bash favicon.sh png</span></span></code></pre></div></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-83f1221ca6817e70be7d37835bcaaa4b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-83f1221ca6817e70be7d37835bcaaa4b><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bash favicon.sh ico</span></span></code></pre></div></div></div></div><p>Скрипт ищет файл <code>favicon.svg</code> и преобразует его в необходимые изображения.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/imagemagick/>#imagemagick</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/inkscape/>#inkscape</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/convert/>#convert</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-18T07:41:46Z data-fn=date-local>2021/05/18 07:41:46 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Обновление Fedora Linux до актуальной версии" class=d-block href=/ru/articles/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/ data-bs-toggle=modal data-bs-target=#modal-c5d1e2429ba2760751f8d96aa231bc4d><picture><source srcset='https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Обновление Fedora Linux до актуальной версии"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/ data-bs-toggle=modal data-bs-target=#modal-c5d1e2429ba2760751f8d96aa231bc4d>Обновление Fedora Linux до актуальной версии</a></h2></div></header><div class=node-body><p>Новые версии Fedora публикуются каждые 6-8 месяцев. В этой статье я опишу шаги по обновлению дистрибутива между версиями.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Обновление Fedora Linux до актуальной версии" class=d-block href=/ru/articles/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/ data-bs-toggle=modal data-bs-target=#modal-c5d1e2429ba2760751f8d96aa231bc4d><img class="d-block rounded" src="https://images.unsplash.com/photo-1585406666850-82f7532fdae3?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Обновление Fedora Linux до актуальной версии"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/ data-bs-toggle=modal data-bs-target=#modal-c5d1e2429ba2760751f8d96aa231bc4d>Обновление Fedora Linux до актуальной версии</a></h2></div></header><div class=node-body><p>Новые версии Fedora публикуются каждые 6-8 месяцев. В этой статье я опишу шаги по обновлению дистрибутива между версиями.</p></div></div></article></div><div class="modal fade" id=modal-c5d1e2429ba2760751f8d96aa231bc4d tabindex=-1 aria-labelledby=modal-c5d1e2429ba2760751f8d96aa231bc4d-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-c5d1e2429ba2760751f8d96aa231bc4d-label><a href=/ru/articles/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/>Обновление Fedora Linux до актуальной версии</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Новые версии Fedora публикуются каждые 6-8 месяцев. В этой статье я опишу шаги по обновлению дистрибутива между версиями.</p><ol><li>Устанавливаем плагин обновления системы:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-5f0a332a52e03c5b942da7e82cc7901e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-5f0a332a52e03c5b942da7e82cc7901e><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dnf install dnf-plugin-system-upgrade</span></span></code></pre></div></div></div></div><ol start=2><li>Скачивание актуальной версии системы:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-da2a7e52fd93cc93ccd22d569a17ae2e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-da2a7e52fd93cc93ccd22d569a17ae2e><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dnf system-upgrade download --releasever<span class=o>=</span><span class=m>34</span></span></span></code></pre></div></div></div></div><ul><li><code>releasever</code> - номер актуальной версии системы.</li></ul><ol start=3><li>Запуск обновления системы на актуальную версию:</li></ol><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-da77841519de98d69db4d4cbdb4d8399 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-da77841519de98d69db4d4cbdb4d8399><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dnf system-upgrade reboot</span></span></code></pre></div></div></div></div><p>Вот и всё. Система обновит пакетную базу и перезагрузится.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/fedora/>#fedora</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/dnf/>#dnf</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/upgrade/>#upgrade</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-15T20:29:16Z data-fn=date-local>2021/05/15 20:29:16 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Настройка статического IP адреса" class=d-block href=/ru/articles/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/ data-bs-toggle=modal data-bs-target=#modal-3bbda3955098d2ca8c2a925f4969e8f1><picture><source srcset='https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Настройка статического IP адреса"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/ data-bs-toggle=modal data-bs-target=#modal-3bbda3955098d2ca8c2a925f4969e8f1>Настройка статического IP адреса</a></h2></div></header><div class=node-body><p>Рассмотрим различные способы настройки статического IP адреса в дистрибутивах Linux. Способы различаются в зависимости от пакетной базы дистрибутивов. Например, настройка статического IP в RHEL-based дистрибутиве будет отличаться от настройки в DEB-based дистрибутиве.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Настройка статического IP адреса" class=d-block href=/ru/articles/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/ data-bs-toggle=modal data-bs-target=#modal-3bbda3955098d2ca8c2a925f4969e8f1><img class="d-block rounded" src="https://images.unsplash.com/photo-1544197150-b99a580bb7a8?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Настройка статического IP адреса"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/ data-bs-toggle=modal data-bs-target=#modal-3bbda3955098d2ca8c2a925f4969e8f1>Настройка статического IP адреса</a></h2></div></header><div class=node-body><p>Рассмотрим различные способы настройки статического IP адреса в дистрибутивах Linux. Способы различаются в зависимости от пакетной базы дистрибутивов. Например, настройка статического IP в RHEL-based дистрибутиве будет отличаться от настройки в DEB-based дистрибутиве.</p></div></div></article></div><div class="modal fade" id=modal-3bbda3955098d2ca8c2a925f4969e8f1 tabindex=-1 aria-labelledby=modal-3bbda3955098d2ca8c2a925f4969e8f1-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-3bbda3955098d2ca8c2a925f4969e8f1-label><a href=/ru/articles/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/>Настройка статического IP адреса</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Рассмотрим различные способы настройки статического IP адреса в дистрибутивах Linux. Способы различаются в зависимости от пакетной базы дистрибутивов. Например, настройка статического IP в RHEL-based дистрибутиве будет отличаться от настройки в DEB-based дистрибутиве.</p><h2>Подготовка</h2><p>Смотрим текущие сетевые устройства и соединения:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e9b9608dc0b75177d3a50ee05e249bac role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-e9b9608dc0b75177d3a50ee05e249bac><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ip a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>1: lo: &lt;loopback,up,lower_up&gt; mtu <span class=m>65536</span> qdisc noqueue state UNKNOWN group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>  link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span></span><span class=line><span class=cl>  inet 127.0.0.1/8 scope host lo
</span></span><span class=line><span class=cl>2: enp1s0: &lt;broadcast,multicast,up,lower_up&gt; mtu <span class=m>1500</span> qdisc fq_codel state UP group default qlen <span class=m>1000</span>
</span></span><span class=line><span class=cl>  link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
</span></span><span class=line><span class=cl>  inet 192.168.10.123/24 brd 192.168.10.255 scope global dynamic noprefixroute enp1s0</span></span></code></pre></div></div></div></div><h2>Настройка IP в RHEL-based дистрибутивах</h2><p>В директории <code>/etc/sysconfig/network-scripts</code> находятся конфигурационные файлы для сетевых интерфейсов. Имя файла состоит из префикса <code>ifcfg</code> и имени интерфейса. Например, содержимое файла для интерфейса <code>enp1s0</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ae8cf99b3f95b505f554518701d8af07 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ae8cf99b3f95b505f554518701d8af07><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat /etc/sysconfig/network-scripts/ifcfg-enp1s0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>TYPE</span><span class=o>=</span><span class=s2>&#34;Ethernet&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>PROXY_METHOD</span><span class=o>=</span><span class=s2>&#34;none&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>BROWSER_ONLY</span><span class=o>=</span><span class=s2>&#34;no&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>BOOTPROTO</span><span class=o>=</span><span class=s2>&#34;dhcp&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>DEFROUTE</span><span class=o>=</span><span class=s2>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>IPV4_FAILURE_FATAL</span><span class=o>=</span><span class=s2>&#34;no&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>IPV6INIT</span><span class=o>=</span><span class=s2>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>IPV6_AUTOCONF</span><span class=o>=</span><span class=s2>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>IPV6_DEFROUTE</span><span class=o>=</span><span class=s2>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>IPV6_FAILURE_FATAL</span><span class=o>=</span><span class=s2>&#34;no&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>IPV6_ADDR_GEN_MODE</span><span class=o>=</span><span class=s2>&#34;stable-privacy&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>NAME</span><span class=o>=</span><span class=s2>&#34;enp1s0&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>UUID</span><span class=o>=</span><span class=s2>&#34;&lt;DEVICE_ID&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>DEVICE</span><span class=o>=</span><span class=s2>&#34;enp1s0&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>ONBOOT</span><span class=o>=</span><span class=s2>&#34;yes&#34;</span></span></span></code></pre></div></div></div></div><p>Обратим внимание на опцию <strong>BOOTPROTO</strong>. По умолчанию, в опции <strong>BOOTPROTO</strong> прописано <code>dhcp</code>. Это означает, что сетевой интерфейс получает информацию о сети автоматически от DHCP. Сама опция <strong>BOOTPROTO</strong> может принимать следующие значения:</p><ul><li><code>none</code> – не использовать протокол.</li><li><code>bootp</code> – использование протокола <strong>bootp</strong>.</li><li><code>dhcp</code> – использование протокола <strong>dhcp</strong> (по умолчанию).</li></ul><p>Для настройки статического IP необходимо установит <strong>BOOTPROTO</strong> в <code>none</code> и дописать в конец файла опции:</p><ul><li><code>IPADDR</code> - IP адрес.</li><li><code>PREFIX</code> - маска сети.</li><li><code>GATEWAY</code> - шлюз сети.</li><li><code>DNS</code> - серверы DNS.</li></ul><p>Например:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-ini"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-eeff859f42209ebc7f929c795dae7967><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>TYPE</span><span class=o>=</span><span class=s>&#34;Ethernet&#34;</span>
</span></span><span class=line><span class=cl><span class=na>PROXY_METHOD</span><span class=o>=</span><span class=s>&#34;none&#34;</span>
</span></span><span class=line><span class=cl><span class=na>BROWSER_ONLY</span><span class=o>=</span><span class=s>&#34;no&#34;</span>
</span></span><span class=line><span class=cl><span class=na>BOOTPROTO</span><span class=o>=</span><span class=s>&#34;none&#34;</span>
</span></span><span class=line><span class=cl><span class=na>DEFROUTE</span><span class=o>=</span><span class=s>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPV4_FAILURE_FATAL</span><span class=o>=</span><span class=s>&#34;no&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPV6INIT</span><span class=o>=</span><span class=s>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPV6_AUTOCONF</span><span class=o>=</span><span class=s>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPV6_DEFROUTE</span><span class=o>=</span><span class=s>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPV6_FAILURE_FATAL</span><span class=o>=</span><span class=s>&#34;no&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPV6_ADDR_GEN_MODE</span><span class=o>=</span><span class=s>&#34;stable-privacy&#34;</span>
</span></span><span class=line><span class=cl><span class=na>NAME</span><span class=o>=</span><span class=s>&#34;enp1s0&#34;</span>
</span></span><span class=line><span class=cl><span class=na>UUID</span><span class=o>=</span><span class=s>&#34;&lt;DEVICE_ID&gt;&#34;</span>
</span></span><span class=line><span class=cl><span class=na>DEVICE</span><span class=o>=</span><span class=s>&#34;enp1s0&#34;</span>
</span></span><span class=line><span class=cl><span class=na>ONBOOT</span><span class=o>=</span><span class=s>&#34;yes&#34;</span>
</span></span><span class=line><span class=cl><span class=na>IPADDR</span><span class=o>=</span><span class=s>&#34;192.168.10.55&#34;</span>
</span></span><span class=line><span class=cl><span class=na>PREFIX</span><span class=o>=</span><span class=s>&#34;24&#34;</span>
</span></span><span class=line><span class=cl><span class=na>GATEWAY</span><span class=o>=</span><span class=s>&#34;192.168.10.1&#34;</span>
</span></span><span class=line><span class=cl><span class=na>DNS1</span><span class=o>=</span><span class=s>&#34;192.168.11.1&#34;</span>
</span></span><span class=line><span class=cl><span class=na>DNS1</span><span class=o>=</span><span class=s>&#34;192.168.12.1&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-eeff859f42209ebc7f929c795dae7967 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>После указания всех параметров, необходимо перезапустить интерфейс:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-d1b7ba62065a9f60c92b981a453c1f17 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-d1b7ba62065a9f60c92b981a453c1f17><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmcli con down enp1s0 <span class=o>&amp;&amp;</span> nmcli con up enp1s0</span></span></code></pre></div></div></div></div><h2>Настройка IP при помощи Network Manager CLI (nmcli)</h2><p>Установка IP адреса:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ca72ee812f98060878ad31d1aafd9c5a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ca72ee812f98060878ad31d1aafd9c5a><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmcli con mod enp1s0 ipv4.addresses <span class=s1>&#39;192.168.10.55/24&#39;</span></span></span></code></pre></div></div></div></div><p>Установка шлюза:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ea3f6db5dfc7605e9e4fbd6925dd637a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ea3f6db5dfc7605e9e4fbd6925dd637a><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmcli con mod enp1s0 ipv4.gateway <span class=s1>&#39;192.168.10.1&#39;</span></span></span></code></pre></div></div></div></div><p>Установка DNS:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-e34ad6c4871bcd39fcbf4824505053cb role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-e34ad6c4871bcd39fcbf4824505053cb><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmcli con mod enp1s0 ipv4.dns <span class=s1>&#39;192.168.11.1&#39;</span></span></span></code></pre></div></div></div></div><p>Установка <strong>BOOTPROTO</strong> в <code>none</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-52af25a802fa2da43af0834059ff6623 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-52af25a802fa2da43af0834059ff6623><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmcli con mod enp1s0 ipv4.method <span class=s1>&#39;manual&#39;</span></span></span></code></pre></div></div></div></div><p>Перезапуск интерфейса:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-8 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-896ac3613b3608071871b51784cdcf72 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-896ac3613b3608071871b51784cdcf72><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>nmcli con down enp1s0 <span class=o>&amp;&amp;</span> nmcli con up enp1s0</span></span></code></pre></div></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/ip/>#ip</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-15T17:08:30Z data-fn=date-local>2021/05/15 17:08:30 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Перезагрузка и выключение Linux" class=d-block href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886><picture><source srcset='https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Перезагрузка и выключение Linux"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886>Перезагрузка и выключение Linux</a></h2></div></header><div class=node-body><p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Перезагрузка и выключение Linux" class=d-block href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886><img class="d-block rounded" src="https://images.unsplash.com/photo-1611780427130-996d9882dc41?crop=top&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Перезагрузка и выключение Linux"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/ data-bs-toggle=modal data-bs-target=#modal-983478b7bdda568986722e518392c886>Перезагрузка и выключение Linux</a></h2></div></header><div class=node-body><p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</p></div></div></article></div><div class="modal fade" id=modal-983478b7bdda568986722e518392c886 tabindex=-1 aria-labelledby=modal-983478b7bdda568986722e518392c886-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-983478b7bdda568986722e518392c886-label><a href=/ru/articles/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/>Перезагрузка и выключение Linux</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</p><h2>halt / poweroff / reboot</h2><p>Старые команды по управлению питанием системы. Опции у этих команд одинаковые. Отдаются команды из под пользователя <strong>root</strong>. Команда <code>halt</code> приостанавливает все функции CPU, но сам ПК остаётся включённым. Команда <code>poweroff</code> отключает питание ПК, посылая сигнал по ACPI. Команда <code>reboot</code> даёт команду системе на перезагрузку.</p><div class="shortcode shortcode-alert"><div class="alert alert-success d-flex overflow-hidden" role=alert><div class="flex-shrink-0 align-self-center"><i class="fas fa-lightbulb fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Команда <code>halt</code> в современных ОС полностью прекращает работу системы. На системах с <strong>systemd</strong> команда <code>halt</code> является устаревшей и представляет собой символьную ссылку на утилиту <code>systemctl</code>.</p></div></div></div><p>Предпочтительнее использовать команду <code>shutdown</code>, о которой я расскажу ниже.</p><h3>Синтаксис</h3><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-974fe7122e9862eab3a9c246f26c8965><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>halt [OPTION]
</span></span><span class=line><span class=cl>poweroff [OPTION]
</span></span><span class=line><span class=cl>reboot [OPTION]</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-974fe7122e9862eab3a9c246f26c8965 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h4>Некоторые опции</h4><ul><li><code>-f</code> - принудительное выполнение команды.</li><li><code>-p</code> - сообщает команде <code>halt</code> действовать как <code>poweroff</code>.</li><li><code>-w</code> - не выполнять никакие действия, только записать в журнал <code>/var/log/wtmp</code> сообщение о завершении работы.</li></ul><h2>shutdown</h2><p>За остановку работы ПК отвечает команда <code>shutdown</code>. Она поддерживает несколько опций, через которые задаётся определённое действие. К примеру:</p><ul><li><code>-r</code> - перезагрузка.</li><li><code>-h</code> - выключение.</li><li><code>-c</code> - отмена запланированных действий на перезагрузку или выключение.</li></ul><p>Для запланированной перезагрузки ПК через 1 минуту используется опция <code>-r</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-6f9814d438fe4db6a0febc2a2b5188f4 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-6f9814d438fe4db6a0febc2a2b5188f4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r</span></span></code></pre></div></div></div></div><p>Команда <code>shutdown</code> поддерживает указание времени, когда ПК должен быть перезагружен или выключен. К примеру, перезагрузить через 5 минут:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a32613b1b5436aeca0b6cfaa53eb5719 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-a32613b1b5436aeca0b6cfaa53eb5719><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r +5</span></span></code></pre></div></div></div></div><p>Также можно указать конкретное время для перезагрузки. Например, перезагрузить ПК в 18:30:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-67f84b1ae988b6dc9947fb57110db8c1 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-67f84b1ae988b6dc9947fb57110db8c1><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r 18:30</span></span></code></pre></div></div></div></div><p>Если перезагрузка или выключение уже запланированы, их можно отменить опцией <code>-c</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-86441d3bbd4e1469ae708abad59f0c7a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-86441d3bbd4e1469ae708abad59f0c7a><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -c</span></span></code></pre></div></div></div></div><p>Для немедленной перезагрузки ПК, вместо времени можно ввести <code>now</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-8a16f39481a59d7a9ffcc4f1e4b99407 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-8a16f39481a59d7a9ffcc4f1e4b99407><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -r now</span></span></code></pre></div></div></div></div><p>Чтобы выключить ПК через 1 минуту, используется опция <code>-h</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-abdac227e59052990daba9e03ae910b1 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-abdac227e59052990daba9e03ae910b1><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>shutdown -h</span></span></code></pre></div></div></div></div><p>На этом всё, ничего сложного нет. <span class="shortcode shortcode-emoji">😄</span></p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/terminal/>#terminal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/halt/>#halt</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/poweroff/>#poweroff</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/reboot/>#reboot</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/shutdown/>#shutdown</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-12T14:20:47Z data-fn=date-local>2021/05/12 14:20:47 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Рекурсивное изменение прав доступа на файлы и директории" class=d-block href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f><picture><source srcset='https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Рекурсивное изменение прав доступа на файлы и директории"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f>Рекурсивное изменение прав доступа на файлы и директории</a></h2></div></header><div class=node-body><p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Рекурсивное изменение прав доступа на файлы и директории" class=d-block href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f><img class="d-block rounded" src="https://images.unsplash.com/photo-1569235186275-626cb53b83ce?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Рекурсивное изменение прав доступа на файлы и директории"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/ data-bs-toggle=modal data-bs-target=#modal-3df1b1b7de5b463a5859f297c951103f>Рекурсивное изменение прав доступа на файлы и директории</a></h2></div></header><div class=node-body><p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p></div></div></article></div><div class="modal fade" id=modal-3df1b1b7de5b463a5859f297c951103f tabindex=-1 aria-labelledby=modal-3df1b1b7de5b463a5859f297c951103f-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-3df1b1b7de5b463a5859f297c951103f-label><a href=/ru/articles/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/>Рекурсивное изменение прав доступа на файлы и директории</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p><p>Изменение прав доступа осуществляется при помощи команды <code>chmod</code>, рекурсивное при добавлении опции <code>-R</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0f683c7abdc33e4e45e8730b5efab495><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>chmod -R MODE DIR</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0f683c7abdc33e4e45e8730b5efab495 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ul><li><code>-R</code> - рекурсивный обход директорий и файлов.</li><li><code>MODE</code> - набор прав доступа для их установки.</li><li><code>DIR</code> - файл или директория, у которых необходимо установить определённые права доступа.</li></ul><p>В итоге, команда должна выглядеть так:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ef35fdac287be3a6a20a0802e81efa24><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>chmod -R <span class=m>755</span> /var/www/html</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ef35fdac287be3a6a20a0802e81efa24 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Но, стоит учитывать, что таким образом директории и файлы примут одинаковые права доступа. Чтобы избежать этого, можно воспользоваться командой <code>find</code>, которая отфильтрует директории и файлы друг от друга:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-248768763ce180e88b656bdf97a5c5fe><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type d -exec chmod <span class=m>755</span> <span class=o>{}</span> <span class=se>\;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-248768763ce180e88b656bdf97a5c5fe role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-2ad705ac724d1fcd4b9fcf22a4791182><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type f -exec chmod <span class=m>644</span> <span class=o>{}</span> <span class=se>\;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-2ad705ac724d1fcd4b9fcf22a4791182 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Команда <code>find</code> ищет директории (<code>-type d</code>) и файлы (<code>-type f</code>) и скармливает их команде <code>chmod</code>, а та, в свою очередь, уже расставляет права доступа. При использовании <code>-exec</code>, <code>chmod</code> выполняется для каждого найденного элемента поочерёдно. Можно оптимизировать и записать с использованием <code>xargs</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-320929401b7e6c97ff2508731a1c0064><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type d -print0 <span class=p>|</span> xargs -0 chmod <span class=m>755</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-320929401b7e6c97ff2508731a1c0064 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fc90754b45d90f0e680f7d5599b259cd><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find /var/www/html -type f -print0 <span class=p>|</span> xargs -0 chmod <span class=m>644</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fc90754b45d90f0e680f7d5599b259cd role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>При <code>xargs</code>, <code>chmod</code> выполняется сразу для нескольких записей одновременно, как сообщает <strong>Daniel Miessler</strong>:</p><div class="shortcode shortcode-quote"><figure><blockquote class=blockquote><p>This is where -exec breaks down and xargs shows its superiority. When you use -exec to do the work you run a separate instance of the called program for each element of input. So if find comes up with 10,000 results, you run exec 10,000 times. With xargs, you build up the input into bundles and run them through the command as few times as possible, which is often just once. When dealing with hundreds or thousands of elements this is a big win for xargs.</p></blockquote><figcaption class=blockquote-footer><cite><a href=https://danielmiessler.com/blog/linux-xargs-vs-exec/ target=_blank rel="noopener nofollow">Daniel Miessler</a></cite></figcaption></figure></div><p>Если необходимо запустить рекурсивное изменение прав доступа начиная с текущей директории, то <code>/var/www/html</code> необходимо поменять на точку:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ffef144ce7204eef2714ffa02439288b><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find . -type d -print0 <span class=p>|</span> xargs -0 chmod <span class=m>755</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ffef144ce7204eef2714ffa02439288b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-a01384aacab9ab75108714e5ff63f6f1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>find . -type f -print0 <span class=p>|</span> xargs -0 chmod <span class=m>644</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-a01384aacab9ab75108714e5ff63f6f1 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/terminal/>#terminal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/chmod/>#chmod</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/find/>#find</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-09T17:15:26Z data-fn=date-local>2021/05/09 17:15:26 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Разнообразие команд ls*" class=d-block href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715><picture><source srcset='https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Разнообразие команд ls*"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715>Разнообразие команд ls*</a></h2></div></header><div class=node-body><p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве дистрибутивов Linux.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Разнообразие команд ls*" class=d-block href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715><img class="d-block rounded" src="https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Разнообразие команд ls*"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/ data-bs-toggle=modal data-bs-target=#modal-bb7c3fe8a315f8b29387dd9ec5094715>Разнообразие команд ls*</a></h2></div></header><div class=node-body><p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве дистрибутивов Linux.</p></div></div></article></div><div class="modal fade" id=modal-bb7c3fe8a315f8b29387dd9ec5094715 tabindex=-1 aria-labelledby=modal-bb7c3fe8a315f8b29387dd9ec5094715-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-bb7c3fe8a315f8b29387dd9ec5094715-label><a href=/ru/articles/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/>Разнообразие команд ls*</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве дистрибутивов Linux.</p><p>Знаю, что есть <code>lsscsi</code>, <code>lsusb</code> и т.п., которые появляются в системе с установкой дополнительных пакетов, но я подобные команды рассматривать не стал. Хотя, по возможности, статью буду дополнять.</p><h2>ls</h2><p>Команда позволяет вывести список директорий и файлов в текущем каталоге.</p><h3>Некоторые опции</h3><ul><li><code>-l</code> - использовать длинный формат отображения.</li><li><code>-S</code> - сортировать по размеру файла.</li><li><code>-t</code> - сортировать по времени модификации.</li><li><code>-a</code> - показать ВСЕ файлы, в том числе скрытые.</li><li><code>-R</code> - рекурсивное отображение директорий и файлов в них.</li><li><code>-h</code> - отображение размеров файлов в человеко-читаемом формате.</li><li><code>--hide='*.txt' -l</code> - игнорировать файлы с форматом <code>.txt</code>.</li></ul><h2>lscpu</h2><p>Отображение доступной информации об установленном процессоре.</p><h3>Некоторые опции</h3><ul><li><code>-a</code> - показать ВСЕ CPU, как включённые, так и отключённые.</li></ul><h3>Пример использования</h3><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-53ab12df474c1e550e91e80557f0b42d role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-53ab12df474c1e550e91e80557f0b42d><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lscpu
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Architecture:                    x86_64
</span></span><span class=line><span class=cl>CPU op-mode<span class=o>(</span>s<span class=o>)</span>:                  32-bit, 64-bit
</span></span><span class=line><span class=cl>Byte Order:                      Little Endian
</span></span><span class=line><span class=cl>Address sizes:                   <span class=m>39</span> bits physical, <span class=m>48</span> bits virtual
</span></span><span class=line><span class=cl>CPU<span class=o>(</span>s<span class=o>)</span>:                          <span class=m>12</span>
</span></span><span class=line><span class=cl>On-line CPU<span class=o>(</span>s<span class=o>)</span> list:             0-11
</span></span><span class=line><span class=cl>Thread<span class=o>(</span>s<span class=o>)</span> per core:              <span class=m>2</span>
</span></span><span class=line><span class=cl>Core<span class=o>(</span>s<span class=o>)</span> per socket:              <span class=m>6</span>
</span></span><span class=line><span class=cl>Socket<span class=o>(</span>s<span class=o>)</span>:                       <span class=m>1</span>
</span></span><span class=line><span class=cl>NUMA node<span class=o>(</span>s<span class=o>)</span>:                    <span class=m>1</span>
</span></span><span class=line><span class=cl>Vendor ID:                       GenuineIntel
</span></span><span class=line><span class=cl>CPU family:                      <span class=m>6</span>
</span></span><span class=line><span class=cl>Model:                           <span class=m>165</span>
</span></span><span class=line><span class=cl>Model name:                      Intel<span class=o>(</span>R<span class=o>)</span> Core<span class=o>(</span>TM<span class=o>)</span> i5-10400 CPU @ 2.90GHz
</span></span><span class=line><span class=cl>Stepping:                        <span class=m>5</span>
</span></span><span class=line><span class=cl>CPU MHz:                         2900.000
</span></span><span class=line><span class=cl>CPU max MHz:                     4300.0000
</span></span><span class=line><span class=cl>CPU min MHz:                     800.0000
</span></span><span class=line><span class=cl>BogoMIPS:                        5799.77
</span></span><span class=line><span class=cl>L1d cache:                       <span class=m>192</span> KiB
</span></span><span class=line><span class=cl>L1i cache:                       <span class=m>192</span> KiB
</span></span><span class=line><span class=cl>L2 cache:                        1.5 MiB
</span></span><span class=line><span class=cl>L3 cache:                        <span class=m>12</span> MiB</span></span></code></pre></div></div></div></div><h2>lspci</h2><p>Отображение информации по шине PCI и подключённых к ней устройствах.</p><h3>Пример использования</h3><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-3dea4f5907c0c72fbccc7fe9ed1ff48b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-3dea4f5907c0c72fbccc7fe9ed1ff48b><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lspci
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>00:00.0 Host bridge: Intel Corporation Comet Lake-S 6c Host Bridge/DRAM Controller <span class=o>(</span>rev 05<span class=o>)</span>
</span></span><span class=line><span class=cl>00:01.0 PCI bridge: Intel Corporation 6th-10th Gen Core Processor PCIe Controller <span class=o>(</span>x16<span class=o>)</span> <span class=o>(</span>rev 05<span class=o>)</span>
</span></span><span class=line><span class=cl>00:14.0 USB controller: Intel Corporation Comet Lake USB 3.1 xHCI Host Controller
</span></span><span class=line><span class=cl>00:14.2 RAM memory: Intel Corporation Comet Lake PCH Shared SRAM
</span></span><span class=line><span class=cl>00:14.3 Network controller: Intel Corporation Comet Lake PCH CNVi WiFi
</span></span><span class=line><span class=cl>00:15.0 Serial bus controller <span class=o>[</span>0c80<span class=o>]</span>: Intel Corporation Comet Lake PCH Serial IO I2C Controller <span class=c1>#0</span>
</span></span><span class=line><span class=cl>00:15.1 Serial bus controller <span class=o>[</span>0c80<span class=o>]</span>: Intel Corporation Comet Lake PCH Serial IO I2C Controller <span class=c1>#1</span>
</span></span><span class=line><span class=cl>00:16.0 Communication controller: Intel Corporation Comet Lake HECI Controller
</span></span><span class=line><span class=cl>00:17.0 SATA controller: Intel Corporation Comet Lake SATA AHCI Controller
</span></span><span class=line><span class=cl>00:1d.0 PCI bridge: Intel Corporation Comet Lake PCI Express Root Port <span class=c1>#9 (rev f0)</span>
</span></span><span class=line><span class=cl>00:1f.0 ISA bridge: Intel Corporation Device <span class=m>0684</span>
</span></span><span class=line><span class=cl>00:1f.3 Audio device: Intel Corporation Comet Lake PCH cAVS
</span></span><span class=line><span class=cl>00:1f.4 SMBus: Intel Corporation Comet Lake PCH SMBus Controller
</span></span><span class=line><span class=cl>00:1f.5 Serial bus controller <span class=o>[</span>0c80<span class=o>]</span>: Intel Corporation Comet Lake PCH SPI Controller
</span></span><span class=line><span class=cl>00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection <span class=o>(</span>11<span class=o>)</span> I219-V
</span></span><span class=line><span class=cl>01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. <span class=o>[</span>AMD/ATI<span class=o>]</span> Baffin <span class=o>[</span>Radeon RX <span class=m>550</span> 640SP / RX 560/560X<span class=o>]</span> <span class=o>(</span>rev cf<span class=o>)</span>
</span></span><span class=line><span class=cl>01:00.1 Audio device: Advanced Micro Devices, Inc. <span class=o>[</span>AMD/ATI<span class=o>]</span> Baffin HDMI/DP Audio <span class=o>[</span>Radeon RX <span class=m>550</span> 640SP / RX 560/560X<span class=o>]</span></span></span></code></pre></div></div></div></div><h2>lsblk</h2><p>Отображение информации по блочным устройствам.</p><h3>Пример использования</h3><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ca6e4dd7fd46145403271f66caf0722d role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-ca6e4dd7fd46145403271f66caf0722d><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsblk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
</span></span><span class=line><span class=cl>sda      8:0    <span class=m>0</span> 232.9G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>├─sda1   8:1    <span class=m>0</span>   200M  <span class=m>0</span> part /boot/efi
</span></span><span class=line><span class=cl>├─sda2   8:2    <span class=m>0</span>     4G  <span class=m>0</span> part /boot
</span></span><span class=line><span class=cl>├─sda3   8:3    <span class=m>0</span>    64G  <span class=m>0</span> part /
</span></span><span class=line><span class=cl>├─sda4   8:4    <span class=m>0</span>    32G  <span class=m>0</span> part <span class=o>[</span>SWAP<span class=o>]</span>
</span></span><span class=line><span class=cl>├─sda5   8:5    <span class=m>0</span>    16G  <span class=m>0</span> part /tmp
</span></span><span class=line><span class=cl>└─sda6   8:6    <span class=m>0</span> 116.7G  <span class=m>0</span> part /home
</span></span><span class=line><span class=cl>sdb      8:16   <span class=m>0</span> 465.8G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─sdb1   8:17   <span class=m>0</span> 465.8G  <span class=m>0</span> part /home/storage.01
</span></span><span class=line><span class=cl>sdc      8:32   <span class=m>1</span> 119.5G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>└─sdc1   8:33   <span class=m>1</span> 119.5G  <span class=m>0</span> part /run/media/user-0001/USB01
</span></span><span class=line><span class=cl>sdd      8:48   <span class=m>1</span>  59.8G  <span class=m>0</span> disk
</span></span><span class=line><span class=cl>├─sdd1   8:49   <span class=m>1</span>  59.7G  <span class=m>0</span> part /run/media/user-0001/Ventoy
</span></span><span class=line><span class=cl>└─sdd2   8:50   <span class=m>1</span>    32M  <span class=m>0</span> part /run/media/user-0001/VTOYEFI
</span></span><span class=line><span class=cl>zram0  252:0    <span class=m>0</span>     4G  <span class=m>0</span> disk <span class=o>[</span>SWAP<span class=o>]</span></span></span></code></pre></div></div></div></div><h2>lsmod</h2><p>Отображение модулей ядра, загруженных в системе.</p><h3>Пример использования</h3><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-814ba76824b91104336bbaa10a680408 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-814ba76824b91104336bbaa10a680408><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>lsmod
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Module                  Size  Used by
</span></span><span class=line><span class=cl>exfat                  <span class=m>81920</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>f2fs                  <span class=m>700416</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>uas                    <span class=m>32768</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>usb_storage            <span class=m>81920</span>  <span class=m>4</span> uas
</span></span><span class=line><span class=cl>snd_seq_dummy          <span class=m>16384</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>rfcomm                 <span class=m>90112</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>snd_hrtimer            <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>xt_CHECKSUM            <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>xt_MASQUERADE          <span class=m>20480</span>  <span class=m>3</span>
</span></span><span class=line><span class=cl>xt_conntrack           <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>ipt_REJECT             <span class=m>16384</span>  <span class=m>2</span>
</span></span><span class=line><span class=cl>nft_compat             <span class=m>20480</span>  <span class=m>16</span>
</span></span><span class=line><span class=cl>nf_nat_tftp            <span class=m>16384</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>nft_objref             <span class=m>16384</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>nf_conntrack_tftp      <span class=m>20480</span>  <span class=m>3</span> nf_nat_tftp
</span></span><span class=line><span class=cl>nft_counter            <span class=m>16384</span>  <span class=m>33</span>
</span></span><span class=line><span class=cl>tun                    <span class=m>57344</span>  <span class=m>1</span>
</span></span><span class=line><span class=cl>bridge                <span class=m>294912</span>  <span class=m>0</span>
</span></span><span class=line><span class=cl>stp                    <span class=m>16384</span>  <span class=m>1</span> bridge
</span></span><span class=line><span class=cl>llc                    <span class=m>16384</span>  <span class=m>2</span> bridge,stp</span></span></code></pre></div></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/terminal/>#terminal</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/ls/>#ls</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-09T13:44:05Z data-fn=date-local>2021/05/09 13:44:05 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Синхронизация репозитория от GitHub к GitLab" class=d-block href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e><picture><source srcset='https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Синхронизация репозитория от GitHub к GitLab"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e>Синхронизация репозитория от GitHub к GitLab</a></h2></div></header><div class=node-body><p>Понадобилось мне на днях синхронизировать некоторые свои репозитории между GitHub и GitLab. Сам GitLab имеет встроенные средства зеркалирования репозиториев от себя к другому git-хранилищу. GitHub же не обладает такой функцией. Но эту функцию можно воссоздать при помощи GitHub Actions.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Синхронизация репозитория от GitHub к GitLab" class=d-block href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e><img class="d-block rounded" src="https://images.unsplash.com/photo-1531030874896-fdef6826f2f7?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Синхронизация репозитория от GitHub к GitLab"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/ data-bs-toggle=modal data-bs-target=#modal-4de6fb1edb7c9dabf530865208229b1e>Синхронизация репозитория от GitHub к GitLab</a></h2></div></header><div class=node-body><p>Понадобилось мне на днях синхронизировать некоторые свои репозитории между GitHub и GitLab. Сам GitLab имеет встроенные средства зеркалирования репозиториев от себя к другому git-хранилищу. GitHub же не обладает такой функцией. Но эту функцию можно воссоздать при помощи GitHub Actions.</p></div></div></article></div><div class="modal fade" id=modal-4de6fb1edb7c9dabf530865208229b1e tabindex=-1 aria-labelledby=modal-4de6fb1edb7c9dabf530865208229b1e-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-4de6fb1edb7c9dabf530865208229b1e-label><a href=/ru/articles/2021/05/8544b8ce-4586-578f-9633-e8ae43441a25/>Синхронизация репозитория от GitHub к GitLab</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Понадобилось мне на днях синхронизировать некоторые свои репозитории между GitHub и GitLab. Сам GitLab имеет встроенные средства зеркалирования репозиториев от себя к другому git-хранилищу. GitHub же не обладает такой функцией. Но эту функцию можно воссоздать при помощи GitHub Actions.</p><p>Для начала необходимо создать &ldquo;секреты&rdquo; с такими переменными:</p><ul><li><code>GITLAB_SYNC_REPO_URL</code> - ссылка на пустой репозиторий GitLab.</li><li><code>GITLAB_SYNC_USER_NAME</code> - имя пользователя GitLab.</li><li><code>GITLAB_SYNC_USER_TOKEN</code> - токен пользователя GitLab. Токен создаётся в настройках аккаунта GitLab.</li></ul><p>Далее, в корне репозитория нужно создать файл <code>.github/workflows/gitlab-sync.yml</code> со следующим содержанием:</p><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>gitlab-sync.yml</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-831fb595ca1dafb6301185c9ca119295 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=gitlab-sync.yml download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=gitlab-sync.yml target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-831fb595ca1dafb6301185c9ca119295><div class=highlight><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>GitLab Sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>push</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>delete</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>sync</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Git Repo Sync</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>fetch-depth</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>wangchucheng/git-repo-sync@v0.1.0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Such as https://github.com/wangchucheng/git-repo-sync.git</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target-url</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITLAB_SYNC_REPO_URL }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># Such as wangchucheng</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target-username</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITLAB_SYNC_USER_NAME }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=c># You can store token in your project&#39;s &#39;Setting &gt; Secrets&#39; and reference the name here. Such as ${{ secrets.ACCESS_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>target-token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITLAB_SYNC_USER_TOKEN }}</span></span></span></code></pre></div></div></div></div><p>На этом всё. Теперь при коммите в репозиторий, GutHub будет запускать Action и автоматически синхронизировать изменения с репозиторием на GitLab.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/git/>#git</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/github/>#github</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/gitlab/>#gitlab</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/sync/>#sync</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/actions/>#actions</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-05-08T21:06:18Z data-fn=date-local>2021/05/08 21:06:18 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Monero Unit" class=d-block href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636><picture><source srcset='https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Monero Unit"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636>Monero Unit</a></h2></div></header><div class=node-body><p>Бум майнинга. Скупают видеокарты, ноутбуки. Будут майнить на тостерах и стиральных машинах. Решил попробовать <strong>Monero</strong>. Задача была запустить майнер в фоне, желательно в отдельной сессии. И чтобы запускался он каждый раз при старте машины.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Monero Unit" class=d-block href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636><img class="d-block rounded" src="https://images.unsplash.com/photo-1552057426-9f23e61fa7b1?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Monero Unit"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/ data-bs-toggle=modal data-bs-target=#modal-b411400899711c8f5fb25e41c727c636>Monero Unit</a></h2></div></header><div class=node-body><p>Бум майнинга. Скупают видеокарты, ноутбуки. Будут майнить на тостерах и стиральных машинах. Решил попробовать <strong>Monero</strong>. Задача была запустить майнер в фоне, желательно в отдельной сессии. И чтобы запускался он каждый раз при старте машины.</p></div></div></article></div><div class="modal fade" id=modal-b411400899711c8f5fb25e41c727c636 tabindex=-1 aria-labelledby=modal-b411400899711c8f5fb25e41c727c636-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-b411400899711c8f5fb25e41c727c636-label><a href=/ru/articles/2021/03/0a815547-4f18-52a0-9a99-c463421872ca/>Monero Unit</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Бум майнинга. Скупают видеокарты, ноутбуки. Будут майнить на тостерах и стиральных машинах. Решил попробовать <strong>Monero</strong>. Задача была запустить майнер в фоне, желательно в отдельной сессии. И чтобы запускался он каждый раз при старте машины.</p><p>Написал небольшой <a title href=https://github.com/KitsuneSolar/xmrig-systemd target=_blank rel="noopener noreferrer nofollow">systemd unit</a> для майнера <a title href="https://github.com/search?q=xmrig" target=_blank rel="noopener noreferrer nofollow">xmrig</a>.</p><div class="shortcode shortcode-ghRepo mb-3"><div class="row row-cols-1 row-cols-lg-2 g-3"><div class=col><div class=card><div class="row g-0"><div class="col-md-4 p-1"><a class=d-inline-block href=https://github.com/KitsuneSolar/xmrig-systemd target=_blank rel="noopener nofollow"><img class=card-img src="https://avatars.githubusercontent.com/u/12877339?v=4" alt=xmrig-systemd loading=lazy></a></div><div class=col><div class="card-body h-100"><div class="d-flex flex-column h-100"><div class=flex-shrink-0><h5 class=card-title><a href=https://github.com/KitsuneSolar/xmrig-systemd target=_blank rel="noopener nofollow">xmrig-systemd</a></h5><h6 class="card-subtitle mb-2 text-body-secondary">Kitsune Solar</h6><p class=card-text>Systemd-unit for XMRig.</p></div><div class=mt-auto><div class="row row-cols-auto g-2 mt-3"><div class=col data-bs-tooltip data-bs-title=Подписки><a class="btn btn-light btn-sm text-body-secondary" href=https://github.com/KitsuneSolar/xmrig-systemd/watchers target=_blank rel="noopener nofollow" role=button aria-label=Подписки><i class="fas fa-eye fa-fw me-1"></i>
1</a></div><div class=col data-bs-tooltip data-bs-title=Звёзды><a class="btn btn-light btn-sm text-body-secondary" href=https://github.com/KitsuneSolar/xmrig-systemd/stargazers target=_blank rel="noopener nofollow" role=button aria-label=Звёзды><i class="fas fa-star fa-fw me-1"></i>
1</a></div><div class=col data-bs-tooltip data-bs-title=Вилки><a class="btn btn-light btn-sm text-body-secondary" href=https://github.com/KitsuneSolar/xmrig-systemd/network/members target=_blank rel="noopener nofollow" role=button aria-label=Вилки><i class="fas fa-code-branch fa-fw me-1"></i>
0</a></div><div class=col data-bs-tooltip data-bs-title=Лицензия><a class="btn btn-light btn-sm text-body-secondary" href=http://choosealicense.com/licenses/mit/ target=_blank rel="noopener nofollow" role=button aria-label=Лицензия><i class="fas fa-copyright fa-fw me-1"></i>
MIT</a></div></div></div></div></div></div></div></div></div></div></div><p>Запускается от имени <code>root</code> в отдельной сессии <strong>screen</strong>, но можно запускать от любого пользователя: в командах запуска и остановки необходимо вместо <code>root</code> прописывать имя другого пользователя.</p><h2>Установка</h2><ol><li>Установить <code>screen</code>.</li><li>Поместить в директорию <code>/etc/systemd/system</code> файл <code>xmrig@.service</code>.</li><li>В файле <code>xmrig@.service</code> задать в параметре <code>ExecStart</code> путь до <code>xmrig.run.sh</code>.</li></ol><h2>Использование</h2><ul><li>Запуск:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-694f70e8bf37217ae5fd3009f02eaec9 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-694f70e8bf37217ae5fd3009f02eaec9><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> --now xmrig@root</span></span></code></pre></div></div></div></div><ul><li>Остановка:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class="flex-shrink-0 text-danger"><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-d0262b3eb6c18766f1085f068706619c role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-d0262b3eb6c18766f1085f068706619c><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl disable --now xmrig@root</span></span></code></pre></div></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/monero/>#monero</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/systemd/>#systemd</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2021-03-05T11:03:20Z data-fn=date-local>2021/03/05 11:03:20 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Генератор идентификаторов расширений" class=d-block href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4><picture><source srcset='https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Генератор идентификаторов расширений"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4>Генератор идентификаторов расширений</a></h2></div></header><div class=node-body><p>В свободное от работы время я балуюсь разработкой небольших модулей и расширений для различных CMF, и некоторые CMF требуют использовать идентификаторы в расширениях.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Генератор идентификаторов расширений" class=d-block href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4><img class="d-block rounded" src="https://images.unsplash.com/photo-1575470522418-b88b692b8084?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Генератор идентификаторов расширений"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/ data-bs-toggle=modal data-bs-target=#modal-2e3d4d565b81908d0813d84ed4d8e6b4>Генератор идентификаторов расширений</a></h2></div></header><div class=node-body><p>В свободное от работы время я балуюсь разработкой небольших модулей и расширений для различных CMF, и некоторые CMF требуют использовать идентификаторы в расширениях.</p></div></div></article></div><div class="modal fade" id=modal-2e3d4d565b81908d0813d84ed4d8e6b4 tabindex=-1 aria-labelledby=modal-2e3d4d565b81908d0813d84ed4d8e6b4-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-2e3d4d565b81908d0813d84ed4d8e6b4-label><a href=/ru/articles/2020/08/5d35edd8-f0e3-5b39-afd3-2ac3b15b8c4f/>Генератор идентификаторов расширений</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>В свободное от работы время я балуюсь разработкой небольших модулей и расширений для различных CMF, и некоторые CMF требуют использовать идентификаторы в расширениях.</p><p>Я стараюсь как то &ldquo;обезличить&rdquo; и унифицировать идентификаторы. Поэтому, для генерации идентификаторов использую очень простой BASH-скрипт. В идентификатор кодируется текущее время в формате UNIX с наносекундами.</p><p>Пример кодирования:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c2fe27a2679cf72fa261735990b8494d><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;ext_</span><span class=k>$(</span>date +%s%N <span class=p>|</span> sha512sum <span class=p>|</span> fold -w <span class=m>8</span> <span class=p>|</span> head -n 1<span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c2fe27a2679cf72fa261735990b8494d role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Вывод: <code>ext_96824896</code></p><p>Если необходимо, можно конвертировать в верхний регистр:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-709e36fd5e47519a4826594f06a889fa><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;EXT_</span><span class=k>$(</span>date +%s%N <span class=p>|</span> sha512sum <span class=p>|</span> fold -w <span class=m>8</span> <span class=p>|</span> head -n <span class=m>1</span> <span class=p>|</span> tr <span class=s1>&#39;[:lower:]&#39;</span> <span class=s1>&#39;[:upper:]&#39;</span><span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-709e36fd5e47519a4826594f06a889fa role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Вывод: <code>EXT_950E60E1</code></p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/cms/>#cms</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cmf/>#cmf</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/php/>#php</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-08-02T21:01:49Z data-fn=date-local>2020/08/02 21:01:49 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Конструирование собственной системы ВКС" class=d-block href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8><picture><source srcset='https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Конструирование собственной системы ВКС"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8>Конструирование собственной системы ВКС</a></h2></div></header><div class=node-body><p>Крупные компании покупают дорогие наборы техники для создания систем ВКС (видео-конференц-связь), но для небольших организаций можно собрать такую систему &ldquo;на коленке&rdquo;.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Конструирование собственной системы ВКС" class=d-block href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8><img class="d-block rounded" src="https://images.unsplash.com/photo-1586980368323-8ce5db4c85ce?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Конструирование собственной системы ВКС"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/ data-bs-toggle=modal data-bs-target=#modal-fdd2141e7ff4850eb3b85b151183c4e8>Конструирование собственной системы ВКС</a></h2></div></header><div class=node-body><p>Крупные компании покупают дорогие наборы техники для создания систем ВКС (видео-конференц-связь), но для небольших организаций можно собрать такую систему &ldquo;на коленке&rdquo;.</p></div></div></article></div><div class="modal fade" id=modal-fdd2141e7ff4850eb3b85b151183c4e8 tabindex=-1 aria-labelledby=modal-fdd2141e7ff4850eb3b85b151183c4e8-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-fdd2141e7ff4850eb3b85b151183c4e8-label><a href=/ru/articles/2020/08/1cc2e43f-187b-55a1-97ed-a772bbdcf78a/>Конструирование собственной системы ВКС</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Крупные компании покупают дорогие наборы техники для создания систем ВКС (видео-конференц-связь), но для небольших организаций можно собрать такую систему &ldquo;на коленке&rdquo;.</p><h2>Оборудование</h2><p>Для конструирования понадобятся следующие компоненты:</p><ul><li>Веб-камера высокого разрешения.</li><li>Два и более микрофона (зависит от размера комнаты для переговоров) с <strong>круговой диаграммой направленности</strong>.</li><li>Стационарный компьютер или ноутбук, который будет использоваться как <strong>передатчик</strong> потока.</li><li>Программа создания виртуальных аудио-кабелей <a title href=https://vac.muzychenko.net/ target=_blank rel="noopener noreferrer nofollow">VAC</a>.</li></ul><p>На момент публикации статьи я выбрал следующие компоненты, доступные на рынке:</p><ul><li>Веб-камера <a title href=https://www.logitech.com/en-us/product/hd-webcam-c615 target=_blank rel="noopener noreferrer nofollow">Logitech WebCam C615</a>.</li><li>Два настольных микрофона <a title href=https://www.maono.com/products/usb-microphone-bm10/ target=_blank rel="noopener noreferrer nofollow">Maono AU-BM10</a>.</li></ul><div class="shortcode shortcode-imgur float- me-3"><figure class=figure><a class=d-inline-block href=https://i.imgur.com/Yhim15t.jpeg rel="noopener nofollow" data-fancybox=gallery data-caption><picture><img class="figure-img img-thumbnail" src=https://i.imgur.com/Yhim15tm.jpeg alt=Yhim15tm.jpeg loading=lazy></picture></a></figure></div><p>С выбором остальных компонентов, думаю, проблем возникнуть не должно. Единственное, что могу посоветовать не брать ПК со слишком слабым процессором, потому что виртуальные кабели будут так же забирать часть процессорного времени вместе с остальными программами. И, возможно, понадобится вести записи конференций - это тоже требует процессорного времени.</p><p>Надо быть внимательным с количеством доступных разъёмов USB, потому как выбранные компоненты подключаются при помощи коннекторов USB и количество портов может банально не хватить. Если видно, что разъёмов не хватает, необходимо докупить активный (желательно) <strong>USB-концентратор</strong>.</p><h2>Подключение и настройка</h2><p>При конференции используется два и более микрофонов. Микрофоны должны быть с круговой диаграммой направленности, то есть они должны улавливать все звуки в помещении, независимо от местоположения источника звука.</p><p>Сборка всех компонентов не должна составить труда. Технический персонал любой организации справится с этим без лишних проблем. Нетривиальной задачей является подключение двух независимых микрофонов к ПК, надо заставить работать их синхронно. Как раз в этом поможет проброс виртуальных кабелей <a title href=https://vac.muzychenko.net/ target=_blank rel="noopener noreferrer nofollow">VAC</a>.</p><p>После установки VAC необходимо указать двум физическим микрофонам передавать поток на один <em>виртуальный интерфейс</em>. Этот виртуальный интерфейс будет выходной точной для приложений. Делается это так:</p><ul><li>Пуск > Выполнить <code>mmsys.cpl sounds</code> > вкладка <strong>Запись</strong>.</li><li>Открыть физический микрофон, перейти на вкладку <strong>Прослушать</strong>.</li><li>Поставить галочку <strong>Прослушать с данного устройства</strong>.</li><li>В параметре <strong>Воспроизводить с данного устройства</strong> указать необходимый <em>виртуальный интерфейс</em>.</li></ul><h2>Проверка</h2><p>Проверка правильности настроек производится очень просто. Необходимо, чтобы индикаторы физических микрофонов и виртуального интерфейса на вкладке <strong>Запись</strong> работали синхронно. Таким образом, видно, что физические микрофоны принимают звук и передают на виртуальный интерфейс.</p><h2>Заключение</h2><p>Как видно, больших денежных вложений в организацию системы ВКС не требуется. Нужны только понимание логики работы аудио / видео потоков и смекалка. :smile:</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/video/>#video</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/conference/>#conference</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/polycom/>#polycom</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/%D0%B2%D0%BA%D1%81/>#вкс</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/skype/>#skype</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/discord/>#discord</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/zoom/>#zoom</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-08-01T22:44:46Z data-fn=date-local>2020/08/01 22:44:46 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Windows 10: Настройка через групповые политики" class=d-block href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225><picture><source srcset='https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Windows 10: Настройка через групповые политики"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225>Windows 10: Настройка через групповые политики</a></h2></div></header><div class=node-body><p>Windows 10 до сих пор вызывает противоречивые чувства: иногда её поведение предсказуемо, иногда какое-нибудь обновление ломает систему, удаляя данные пользователя. И чтобы как-то улучшить положение дел и усмирить некоторые функции, я использую групповые политики в настройке операционной системы (ОС).</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Windows 10: Настройка через групповые политики" class=d-block href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225><img class="d-block rounded" src="https://images.unsplash.com/photo-1530133532239-eda6f53fcf0f?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Windows 10: Настройка через групповые политики"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/ data-bs-toggle=modal data-bs-target=#modal-2b584755f3f9c38340233d15cabf0225>Windows 10: Настройка через групповые политики</a></h2></div></header><div class=node-body><p>Windows 10 до сих пор вызывает противоречивые чувства: иногда её поведение предсказуемо, иногда какое-нибудь обновление ломает систему, удаляя данные пользователя. И чтобы как-то улучшить положение дел и усмирить некоторые функции, я использую групповые политики в настройке операционной системы (ОС).</p></div></div></article></div><div class="modal fade" id=modal-2b584755f3f9c38340233d15cabf0225 tabindex=-1 aria-labelledby=modal-2b584755f3f9c38340233d15cabf0225-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-2b584755f3f9c38340233d15cabf0225-label><a href=/ru/articles/2020/07/94261403-060b-57b6-9bb0-7a0c07d09af9/>Windows 10: Настройка через групповые политики</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Windows 10 до сих пор вызывает противоречивые чувства: иногда её поведение предсказуемо, иногда какое-нибудь обновление ломает систему, удаляя данные пользователя. И чтобы как-то улучшить положение дел и усмирить некоторые функции, я использую групповые политики в настройке операционной системы (ОС).</p><p>Сразу скажу, что мне нравится английский текст в интерфейсах. Поэтому все ОС у меня с интерфейсом в английской локализации, но я постараюсь максимально подробно описывать приведённые здесь групповые политики. Я использую Windows 10 в версии Enterprise, и не стоит забывать, что политики могут отличаться между различными версиями ОС.</p><p>Как открыть редактор групповых политик? Очень просто: необходимо нажать сочетание клавиш <span class="shortcode shortcode-key d-inline-block"><kbd>WIN + R</kbd></span>, откроется окно команды &ldquo;Выполнить&rdquo; и в текстовом поле набрать gpedit.msc и нажать <span class="shortcode shortcode-key d-inline-block"><kbd>OK</kbd></span>.</p><ul><li><span class="shortcode shortcode-emoji">✅</span> - включить (разрешить).</li><li><span class="shortcode shortcode-emoji">⛔</span> - отключить (запретить).</li></ul><h2>Computer Details</h2><p>Секция отвечает за корректировку групповых политик компьютера в целом.</p><h3>System/Device Installation</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Prevent device metadata retrieval from the Internet</strong><br>Запретить использование мета-информации для подключённых устройств из Интернета. Политика отвечает за отображение индивидуальных значков принтеров, сканеров и такое прочее. Для отображения подобных значков, Windows лезет в Интернет и загружает мета-данные. Мне подобное не нужно, поэтому я включаю политику (включить = запретить).</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Specify search order for device driver source locations</strong><br>Специальный порядок источников для поиска драйверов в них. А вот эта политика отвечает за автоматическую установку драйверов на видеокарты, звуковые карты, различную периферию и прочее. Здесь можно указать ОС в каких источниках искать драйвера, приложения и прочее. Меня всегда раздражало, когда Windows при подключении к Интернету устанавливает устаревшие драйвера, например, на видеокарту. Зачем, когда я могу скачать свежие версии с сайта производителя? Включаю политику и выбираю опцию, указанную ниже.<ul><li><em>Do not search Windows Update</em><br>Не использовать Windows Update для поиска драйверов.</li></ul></li></ul><h3>Windows Components/AutoPlay Policies</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <em>Turn off Autoplay</em><br>Отключить автоматический запуск. Политика позволяет отключить запуск подходящего приложения при втыкании, например, флешки с музыкой или картинками. Ранее (да и сейчас, наверно) таким способом любили запускаться злые вирусы. Включаю политику и выбираю опцию, указанную ниже.<ul><li>All drives<br>У меня отключено на всех устройствах.</li></ul></li></ul><h3>Windows Components/Cloud Content</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not show Windows tips</strong><br>Не показывать подсказки Windows. Лично мне подсказки ОС не нужны. Я как нибудь без них обойдусь. Включаю политику.</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off Microsoft consumer experiences</strong><br>Выключить Microsoft Consumer Experience. Компания Microsoft своими рекомендациями навязывает установку таких приложений, как Candy Crush Soda Saga, FarmVille 2, Flipboard, Twitter, Photoshop Express, Minecraft и т.д. Мне они не нужны да и мне чуждо такое навязывание. Неприятно. Включаю политику, тем самым отключая подобную рекламу.</li></ul><h3>Windows Components/Data Collection and Preview Builds</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Allow Telemetry</strong><br>Разрешить телеметрию. Полностью телеметрию отключить всё равно не получится, что бы там не писали в Интернете. Поэтому, я включаю телеметрию и устанавливаю уровень сбора информации.<ul><li><em>0 - Security [Enterprise Only]</em><br>Ставлю нулевой уровень. Собирать данные, необходимые для осуществления безопасности. Но это только для операционной системы класса Enterprise.</li></ul></li></ul><h3>Windows Components/Desktop Gadgets</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off desktop gadgets</strong><br>Выключить гаджеты рабочего стола. Актуально для Windows Vista / 7. В Windows 10 гаджетов не видел. Может потому что не использовал их никогда. Но политику включаю.</li></ul><h3>Windows Components/Microsoft Defender Antivirus</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off Microsoft Defender Antivirus</strong><br>Отключить Microsoft Defender Antivirus. Я отключаю себе антивирус. Головы хватает, чтобы не подхватить вирусы. Использую только ограниченный проверенный набор программ. При этом, если необходимо запустить что-то экзотическое, у меня всегда развёрнута виртуальная машина в Hyper-V.</li></ul><h3>Windows Components/OneDrive</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Prevent the usage of OneDrive for file storage</strong><br>Запретить использование OneDrive как файловое хранилище. Мне не нужен OneDrive. Поэтому я запрещаю использование OneDrive в качестве хранилища файлов.</li></ul><h3>Windows Components/Search</h3><ul><li><span class="shortcode shortcode-emoji">⛔</span> <strong>Allow Cloud Search</strong><br>Разрешить использование облачного поиска. Мне не нужен в ОС поиск, который будет искать по различным сайтам. Только локальный поиск. Поэтому, я запрещаю политику.</li><li><span class="shortcode shortcode-emoji">⛔</span> <strong>Allow Cortana</strong><br>Разрешить Cortana. Cortana мне тоже не нужна. Мне не о чём с ней поговорить. Поэтому, я запрещаю Cortana.</li></ul><h3>Windows Components/Store</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Disable all apps from Microsoft Store</strong><br>Отключить все приложения из Microsoft Store. Для выпиливания приложений, установленных из Microsoft Store в Интернете гуляет скрипт на PowerShell. Но мне лень его использовать, да и мало ли что&mldr; Поэтому, я просто отключаю подобные приложения через групповые политики. Они остаются в меню Start, но не используются.</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off the Store application</strong><br>Подобно представленной выше политике, эта отключает магазин приложений. Согласно описанию и Интернету, эта политика важнее предыдущей, и включение её отключает не только сам магазин, но и приложения из него.</li></ul><h3>Windows Components/Sync your settings</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not sync</strong><br>Не синхронизировать настройки пользователя. Синхронизация настроек между устройствами мне не нужна. Я включаю политику, тем самым отключаю синхронизацию.</li></ul><h3>Windows Components/Windows Game Recording and Broadcasting</h3><ul><li><span class="shortcode shortcode-emoji">⛔</span> <strong>Enables or disables Windows Game Recording and Broadcasting</strong><br>Включение или отключение функций Windows Game Recording и Broadcasting. Так как я не играю в игры, для меня подобная функциональность ОС избыточна. Отключаю политику.</li></ul><h3>Windows Components/Windows Update</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Configure Automatic Updates</strong><br>Конфигурация автоматического обновления. Ох, сколько в Интернете страданий по поводу обновлений Windows 10. При включении этой политике, я указываю опции, которые помогут избавится от ряда проблем с автоматическим обновлением.<ul><li><strong>Configure automatic updating:</strong> <em>2 - Notify for download and auto install</em><br>Я выбираю опцию #2, которая гласит как &ldquo;Информировать о выпуске новых обновлений&rdquo;.</li><li><span class="shortcode shortcode-emoji">✅</span> <em>Install updates for other Microsoft products</em><br>Также отмечаю галочкой опцию &ldquo;Устанавливать обновления для других продуктов Microsoft&rdquo;. Таким образом, более-менее свежие версии, например, Microsoft Office будут обновляться через Windows Update вместе с ОС.</li></ul></li><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not include drivers with Windows Updates</strong><br>Не использовать драйвера в Windows Updates. Вот эта опция странная. Может я её не так понимаю, но при включении, Windows Updates всё равно ставит драйвера на устройства. А мне подобное обслуживание не надо.</li><li><span class="shortcode shortcode-emoji">✅</span> <strong>No auto-restart with logged on users for scheduled automatic updates installations</strong><br>Не использовать автоматическую перезагрузку при вошедшем в систему пользователе, когда обновления установились. Вот эта та самая автоматическая перезагрузка, которая попортила нервишки многим пользователям. Например, когда ты днём много работаешь, а на ночь ставишь компьютер считать различные данные, утром можно обнаружить окно готовности войти в систему. Да, установились обновления и компьютер перезагрузился. Включаем политику, тем самым отключая автоматическую перезагрузку.</li></ul><h2>User Details</h2><p>Секция отвечает за корректировку групповых политик под пользователей.</p><h3>Windows Components/Attachment Manager</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Do not preserve zone information in file attachments</strong><br>Не сохранять информацию о зоне в файлах. Суть этой политики такова, что если я скачаю из Интернета, например, какой-нибудь EXE-файл, то файловая система пометит его как небезопасный. Лично мне в этом нет необходимости. Включаю политику.</li></ul><h3>Windows Components/Cloud Content</h3><ul><li><span class="shortcode shortcode-emoji">✅</span> <strong>Turn off all Windows spotlight features</strong><br>Отключить все возможности Windows Spotlight. Windows Spotlight эта функция ОС, которая позволяет отображать на экране входа в систему различную интерактивную информацию, например, сменяющиеся фоновые изображения, различные предложения (рекламные / не рекламные - не знаю, не видел ни разу). Мне это не надо, поэтому я включаю политику, запрещая использование Windows Spotlight.</li></ul><p>На этом всё. Возможно, некоторые параметры групповых политик покажутся спорными, а некоторые вообще странными и ненужными, но мне так удобно работать. Список будет дорабатываться, если найду что-нибудь ещё интересное.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/gpo/>#gpo</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-07-21T21:15:37Z data-fn=date-local>2020/07/21 21:15:37 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="GnuPG: Создание и работа с ключами шифрования" class=d-block href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8><picture><source srcset='https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="GnuPG: Создание и работа с ключами шифрования"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8>GnuPG: Создание и работа с ключами шифрования</a></h2></div></header><div class=node-body><p><strong>GnuPG (GPG)</strong> это программа для шифрования информации и создания электронных цифровых подписей. Она создавалась в качестве свободной альтернативе несвободному <strong>PGP</strong>.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="GnuPG: Создание и работа с ключами шифрования" class=d-block href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8><img class="d-block rounded" src="https://images.unsplash.com/photo-1572435555646-7ad9a149ad91?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="GnuPG: Создание и работа с ключами шифрования"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/ data-bs-toggle=modal data-bs-target=#modal-76779e233edf4c0625c243072a5292c8>GnuPG: Создание и работа с ключами шифрования</a></h2></div></header><div class=node-body><p><strong>GnuPG (GPG)</strong> это программа для шифрования информации и создания электронных цифровых подписей. Она создавалась в качестве свободной альтернативе несвободному <strong>PGP</strong>.</p></div></div></article></div><div class="modal fade" id=modal-76779e233edf4c0625c243072a5292c8 tabindex=-1 aria-labelledby=modal-76779e233edf4c0625c243072a5292c8-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-76779e233edf4c0625c243072a5292c8-label><a href=/ru/articles/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/>GnuPG: Создание и работа с ключами шифрования</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p><strong>GnuPG (GPG)</strong> это программа для шифрования информации и создания электронных цифровых подписей. Она создавалась в качестве свободной альтернативе несвободному <strong>PGP</strong>.</p><h2>Создание ключа</h2><p>GPG предоставляет различные алгоритмы шифрования. Я предпочитаю алгоритм <strong>ECC</strong>, основанный на эллиптических кривых (Elliptic Curve Cryptography).</p><p>Для создания ключей шифрования, нужно чтобы в системе была установлена утилита GPG. Для систем <strong>Debian</strong> и <strong>CentOS / Fedora</strong> этим занимается пакет <code>gnupg</code>, устанавливается командами:</p><ul><li>CentOS 8 / Fedora:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-b33822b9754a6827b44da894279f12a1><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>dnf install gnupg</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-b33822b9754a6827b44da894279f12a1 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><ul><li>Debian:</li></ul><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-3107a53e04b72e3bb782579586153039><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>apt install gnupg</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-3107a53e04b72e3bb782579586153039 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>После того, как пакет установлен, можно начать создание ключа командой:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-5dd4c8dacd7873476d1c83dcfb3f6544><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --expert --full-gen-key</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-5dd4c8dacd7873476d1c83dcfb3f6544 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Команда вернёт следующий результат:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-63009867b5d483a18f13be80ffc9813c role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-63009867b5d483a18f13be80ffc9813c><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --expert --full-gen-key
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gpg <span class=o>(</span>GnuPG<span class=o>)</span> 2.2.20<span class=p>;</span> Copyright <span class=o>(</span>C<span class=o>)</span> <span class=m>2020</span> Free Software Foundation, Inc.
</span></span><span class=line><span class=cl>This is free software: you are free to change and redistribute it.
</span></span><span class=line><span class=cl>There is NO WARRANTY, to the extent permitted by law.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please <span class=k>select</span> what kind of key you want:
</span></span><span class=line><span class=cl>   <span class=o>(</span>1<span class=o>)</span> RSA and RSA <span class=o>(</span>default<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>2<span class=o>)</span> DSA and Elgamal
</span></span><span class=line><span class=cl>   <span class=o>(</span>3<span class=o>)</span> DSA <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>4<span class=o>)</span> RSA <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>7<span class=o>)</span> DSA <span class=o>(</span><span class=nb>set</span> your own capabilities<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>8<span class=o>)</span> RSA <span class=o>(</span><span class=nb>set</span> your own capabilities<span class=o>)</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>9<span class=o>)</span> ECC and ECC
</span></span><span class=line><span class=cl>  <span class=o>(</span>10<span class=o>)</span> ECC <span class=o>(</span>sign only<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span>11<span class=o>)</span> ECC <span class=o>(</span><span class=nb>set</span> your own capabilities<span class=o>)</span>
</span></span><span class=line><span class=cl>  <span class=o>(</span>13<span class=o>)</span> Existing key
</span></span><span class=line><span class=cl>  <span class=o>(</span>14<span class=o>)</span> Existing key from card
</span></span><span class=line><span class=cl>Your selection?</span></span></code></pre></div></div></div></div><p>Здесь спрашивается, какой конкретно ключ мы хотим получить. Вводим <code>9</code>. Получаем:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-4f8340e788ec4c7bdc53f613a0c5450b role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-4f8340e788ec4c7bdc53f613a0c5450b><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --expert --full-gen-key
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please <span class=k>select</span> which elliptic curve you want:
</span></span><span class=line><span class=cl>   <span class=o>(</span>1<span class=o>)</span> Curve <span class=m>25519</span>
</span></span><span class=line><span class=cl>   <span class=o>(</span>3<span class=o>)</span> NIST P-256
</span></span><span class=line><span class=cl>   <span class=o>(</span>4<span class=o>)</span> NIST P-384
</span></span><span class=line><span class=cl>   <span class=o>(</span>5<span class=o>)</span> NIST P-521
</span></span><span class=line><span class=cl>   <span class=o>(</span>9<span class=o>)</span> secp256k1
</span></span><span class=line><span class=cl>Your selection?</span></span></code></pre></div></div></div></div><p>А здесь уже предстоит выбрать алгоритм шифрования. Вводим <code>1</code>. Получаем:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-eb4964782c63924ddb2405082415488e role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-eb4964782c63924ddb2405082415488e><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --expert --full-gen-key
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Please specify how long the key should be valid.
</span></span><span class=line><span class=cl>         <span class=nv>0</span> <span class=o>=</span> key does not expire
</span></span><span class=line><span class=cl>      &lt;n&gt;  <span class=o>=</span> key expires in n days
</span></span><span class=line><span class=cl>      &lt;n&gt;w <span class=o>=</span> key expires in n weeks
</span></span><span class=line><span class=cl>      &lt;n&gt;m <span class=o>=</span> key expires in n months
</span></span><span class=line><span class=cl>      &lt;n&gt;y <span class=o>=</span> key expires in n years
</span></span><span class=line><span class=cl>Key is valid <span class=k>for</span>? <span class=o>(</span>0<span class=o>)</span></span></span></code></pre></div></div></div></div><p>На последнем шаге настройки ключа спрашивается время действия ключа. Обычно, личные ключи генерируются с безлимитным временем действия. Вводим <code>0</code> (этот пункт идёт по умолчанию).</p><p>Дальше будет пара-тройка вопросов по поводу имени владельца ключа, его адреса e-mail и с просьбой указать комментарий. Таким образом, создаётся пара ключей: закрытый и открытый. Открытый ключ можно публиковать на различных ресурсах с целью идентификации владельца и подтверждения его личности. Например, так работает верификация коммитов на GitLab’е и GitHub’е. Закрытый ключ должен всегда оставаться внутри системы.</p><h2>Список ключей в системе</h2><p>Посмотреть установленные в системе ключи можно командой:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-28dd16a86193ae5c0892bf5cc6950e12><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --list-keys --keyid-format LONG --with-fingerprint</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-28dd16a86193ae5c0892bf5cc6950e12 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь:</p><ul><li><code>--list-keys</code> - показать список ключей.</li><li><code>--keyid-format LONG</code> - формат отображения каждого ключа в расширенном (<code>LONG</code>) формате.</li><li><code>--with-fingerprint</code> - вывести отпечаток. Для себя всегда добавляю эту опцию на всякий случай.</li></ul><p>Команда вернёт следующий результат:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-234d8d69af2f84033ad6ac3e53f37e65 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-234d8d69af2f84033ad6ac3e53f37e65><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gpg --list-keys --keyid-format LONG --with-fingerprint
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pub   ed25519/JTM4BAVLPI8F0XHR 2020-02-17 <span class=o>[</span>SC<span class=o>]</span>
</span></span><span class=line><span class=cl>      Key <span class=nv>fingerprint</span> <span class=o>=</span> XXXX XXXX XXXX XXXX XXXX  XXXX XXXX XXXX XXXX XXXX
</span></span><span class=line><span class=cl>uid                 <span class=o>[</span>ultimate<span class=o>]</span> John Doe &lt;john.doe@example.com&gt;
</span></span><span class=line><span class=cl>sub   cv25519/AI9NEDUOWRF016Y2 2020-02-17 <span class=o>[</span>E<span class=o>]</span></span></span></code></pre></div></div></div></div><p>Здесь:</p><ul><li><code>JTM4BAVLPI8F0XHR</code> - идентификатор ключа. Он потребуется для каких-либо действий с ключом (редактирование / удаление / и т.п.).</li><li><code>[ultimate]</code> - уровень доверия к ключу.</li><li><code>John Doe</code> - имя хозяина ключа.</li><li><code>&lt;john.doe@example.com></code> - почта хозяина ключа.</li><li><code>ed25519</code> & <code>cv25519</code> - алгоритмы шифрования.</li></ul><h2>Экспорт и импорт ключа</h2><p>При создании открытого и закрытого ключей, необходимо экспортировать их для того, чтобы они хранились где-то независимо от системы, например, на какой-нибудь карте памяти или USB-флешке. Следующие две команды выполняют необходимые действия:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-8 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-edc22fb02822204a2bcf2d3ec18f6e9f><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Export: PUBLIC.</span>
</span></span><span class=line><span class=cl>gpg --armor --output JohnDoe.public.asc --export JTM4BAVLPI8F0XHR
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Export: PRIVATE.</span>
</span></span><span class=line><span class=cl>gpg --armor --output JohnDoe.private.asc --export-secret-keys JTM4BAVLPI8F0XHR</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-edc22fb02822204a2bcf2d3ec18f6e9f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь:</p><ul><li><code>--armor</code> - экспорт ключа в формате <strong>ASCII</strong> (текстовый формат).</li><li><code>--output</code> - имя файлы, в который будет экспортирован ключ.</li><li><code>--export JTM4BAVLPI8F0XHR</code> - экспорт открытого ключа с идентификатором <code>JTM4BAVLPI8F0XHR</code>.</li><li><code>--export-secret-keys JTM4BAVLPI8F0XHR</code> - экспорт закрытого ключа с идентификатором <code>JTM4BAVLPI8F0XHR</code>.</li></ul><p>С экспортом разобрались. Теперь по поводу импорта&mldr; Импортировать также необходимо открытый и закрытый ключи. Следующие две команды выполняют необходимые действия:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-9 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-15463dd582e33ede8a736f8389afd569><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Import: PUBLIC.</span>
</span></span><span class=line><span class=cl>gpg --import JohnDoe.public.asc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Import: PRIVATE.</span>
</span></span><span class=line><span class=cl>gpg --import JohnDoe.private.asc</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-15463dd582e33ede8a736f8389afd569 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>После импорта ключ приобретает <strong>стандартный уровень доверия</strong>. Для повышения или понижения уровня доверия, ключ необходимо отредактировать.</p><h2>Редактирование ключа</h2><p>Следующая команда позволяет отредактировать ключ:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-10 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0ab095bcb7d23c8799446c2dddb6d797><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>gpg --edit-key JTM4BAVLPI8F0XHR</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0ab095bcb7d23c8799446c2dddb6d797 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Здесь:</p><ul><li><code>--edit-key JTM4BAVLPI8F0XHR</code> - редактирование ключа с идентификатором <code>JTM4BAVLPI8F0XHR</code>.</li></ul><p>Режим редактирования ключа представляет собой текстовый интерфейс, в который вручную вбиваются команды. Например, повысим уровень доверия к ключу до максимального (ultimate).</p><ol><li>Вводим <code>trust</code>.</li><li>Выбираем <code>5 (I trust ultimately)</code>.</li><li>Вводим <code>quit</code> (выход).</li></ol></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/gpg/>#gpg</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/gnupg/>#gnupg</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-07-16T06:55:17Z data-fn=date-local>2020/07/16 06:55:17 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="MikroTik и CloudFlare: Динамический IP для домена" class=d-block href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6><picture><source srcset='https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="MikroTik и CloudFlare: Динамический IP для домена"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6>MikroTik и CloudFlare: Динамический IP для домена</a></h2></div></header><div class=node-body><p>Нашёл скрипт реализации динамической смены IP адреса из RouterOS напрямую в панели управления CloudFlare при помощи API. Где нашёл скрипт уже не помню, вроде бы на страницах официального форума MikroTik.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="MikroTik и CloudFlare: Динамический IP для домена" class=d-block href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6><img class="d-block rounded" src="https://images.unsplash.com/photo-1521542464131-cb30f7398bc6?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="MikroTik и CloudFlare: Динамический IP для домена"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/ data-bs-toggle=modal data-bs-target=#modal-418a73a9f8f7ce239bf092d8d5cd3fe6>MikroTik и CloudFlare: Динамический IP для домена</a></h2></div></header><div class=node-body><p>Нашёл скрипт реализации динамической смены IP адреса из RouterOS напрямую в панели управления CloudFlare при помощи API. Где нашёл скрипт уже не помню, вроде бы на страницах официального форума MikroTik.</p></div></div></article></div><div class="modal fade" id=modal-418a73a9f8f7ce239bf092d8d5cd3fe6 tabindex=-1 aria-labelledby=modal-418a73a9f8f7ce239bf092d8d5cd3fe6-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-418a73a9f8f7ce239bf092d8d5cd3fe6-label><a href=/ru/articles/2020/07/ff2ae66e-8e14-5c4a-baa6-0cd2e59f6517/>MikroTik и CloudFlare: Динамический IP для домена</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>Нашёл скрипт реализации динамической смены IP адреса из RouterOS напрямую в панели управления CloudFlare при помощи API. Где нашёл скрипт уже не помню, вроде бы на страницах официального форума MikroTik.</p><p>Скрипт я немного переделал, удалил лишние переменные, некоторые переопределил, подправил области видимости переменных, обновил метод авторизации скрипта на серверах CloudFlare. Вроде работает.</p><p>Сам скрипт нужно настроить под себя, прописав в нём значения переменных. Некоторые значений можно узнать из панели управления доменом в CloudFlare, но для получения значения переменной <code>cfDnsID</code> необходимо выполнит немного телодвижений. Об этом ниже.</p><h2>Работа CloudFlare API</h2><p>Без токена - никак.</p><h3>Создание токена</h3><p>Для того, чтобы начать работать с CloudFlare API, нам нужно создать специальный токен:</p><ol><li>Зайти в <a title href=https://dash.cloudflare.com/profile/api-tokens target=_blank rel="noopener noreferrer nofollow">панель управления токенами</a>.</li><li>Нажать кнопку <span class="shortcode shortcode-key d-inline-block"><kbd>Create Token</kbd></span>.</li><li>На странице выбора шаблонов - выбрать шаблон <strong>Edit zone DNS</strong>.</li><li>В разделе <strong>Zone Resources</strong> можно выбрать область доступа токена к зонам (доменам). Можно указать конкретную зону (<em>Specific zone</em>) или выбрать все зоны (<em>All zones</em>).</li><li>Всё, нажимаем кнопку <span class="shortcode shortcode-key d-inline-block"><kbd>Continue to summary</kbd></span> и перемещаемся на следующую станицу&mldr;</li></ol><h3>Проверка токена</h3><p>По окончании создания токена, CloudFlare переместит нас на страницу проверки токена. На этой странице будут наш созданный токен (его необходимо сохранить) и команда, которой при помощи утилиты <code>curl</code> можно проверить корректность токена:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0b57ae64eb141164dc448e3bdecdb47a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/user/tokens/verify&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Authorization: Bearer TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Content-Type:application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0b57ae64eb141164dc448e3bdecdb47a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>При выполнении, команда вернёт следующий результат:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-53f9ab08465590e2f76be09baf9298a5 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-53f9ab08465590e2f76be09baf9298a5><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/user/tokens/verify&#34;</span> -H <span class=s2>&#34;Authorization: Bearer &lt;...&gt;&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;result&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;&lt;...&gt;&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;status&#34;</span>: <span class=s2>&#34;active&#34;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;success&#34;</span>: true,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errors&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;messages&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>        <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;code&#34;</span>: 10000,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span>: <span class=s2>&#34;This API Token is valid and active&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span>: null
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>]</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div><p>По сообщению &ldquo;This API Token is valid and active&rdquo; понятно, что токен корректный и работает.</p><h3>Получение ID ресурсной записи домена</h3><p>Когда у нас есть токен, можно полноценно работать с CloudFlare API. Нам нужно получить ID ресурсной записи домена. Получать будем следующей командой:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-45827a67980036a7f935e97a5aecfb7a><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/ZONE_ID/dns_records&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Authorization: Bearer TOKEN&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>-H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-45827a67980036a7f935e97a5aecfb7a role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Обратите внимание на следующие заглушки в команде:</p><ul><li><code>ZONE_ID</code> - ID домена. Находится в панели оправления доменом на главной странице в поле <strong>Zone ID</strong>.</li><li><code>TOKEN</code> - токен для доступа к CloudFlare API.</li></ul><div class="shortcode shortcode-alert"><div class="alert alert-warning d-flex overflow-hidden" role=alert><div class="flex-shrink-0 align-self-center"><i class="fas fa-exclamation-triangle fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Вместо этих заглушек необходимо подставить свои значения.</p></div></div></div><p>Сформировав правильную команду с корректными данными и выполнив её, команда вернёт результат в формате <strong>JSON</strong>. Результат будет содержать набор всех ресурсных записей конкретного домена. У меня это выглядит так:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux"><div class="card mb-3 overflow-hidden" data-bs-theme=dark><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="fas fa-terminal fa-fw"></i></div><div class="flex-grow-1 mx-2"><h5 class=mb-0>Терминал</h5></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1a22f1e86deff0a688829f9bc5ca6808 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><div class="card-body p-0" id=clipboard-1a22f1e86deff0a688829f9bc5ca6808><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -X GET <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&lt;...&gt;/dns_records&#34;</span> -H <span class=s2>&#34;Authorization: Bearer &lt;...&gt;&#34;</span> -H <span class=s2>&#34;Content-Type: application/json&#34;</span> <span class=p>|</span> python3 -mjson.tool
</span></span><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;result&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>        <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;id&#34;</span>: <span class=s2>&#34;gJDSG5la4IWNOEVn6K2PHyope8Q9YhzC&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;zone_id&#34;</span>: <span class=s2>&#34;&lt;...&gt;&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;zone_name&#34;</span>: <span class=s2>&#34;example.com&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;example.com&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span>: <span class=s2>&#34;A&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;content&#34;</span>: <span class=s2>&#34;192.168.10.232&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;proxiable&#34;</span>: true,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;proxied&#34;</span>: true,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;ttl&#34;</span>: 1,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;locked&#34;</span>: false,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;meta&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;auto_added&#34;</span>: false,
</span></span><span class=line><span class=cl>                <span class=s2>&#34;managed_by_apps&#34;</span>: false,
</span></span><span class=line><span class=cl>                <span class=s2>&#34;managed_by_argo_tunnel&#34;</span>: false,
</span></span><span class=line><span class=cl>                <span class=s2>&#34;source&#34;</span>: <span class=s2>&#34;primary&#34;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;created_on&#34;</span>: <span class=s2>&#34;2020-02-23T21:26:27.56227Z&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;modified_on&#34;</span>: <span class=s2>&#34;2020-02-23T21:26:27.56227Z&#34;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;success&#34;</span>: true,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;errors&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;messages&#34;</span>: <span class=o>[]</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;result_info&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;page&#34;</span>: 1,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;per_page&#34;</span>: 20,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;count&#34;</span>: 7,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;total_count&#34;</span>: 7,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;total_pages&#34;</span>: <span class=m>1</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div><p>Как видим, команда вернула нам результат с массивом <code>result</code>. В этом массиве находятся все ресурсные записи нашего домена. Каждая ресурсная запись содержит поля <code>id</code> и <code>content</code>:</p><ul><li><code>id</code> - ID ресурсной записи. Очень важное поле, как раз его значение необходимо записать в переменную <code>cfDnsID</code> скрипта.</li><li><code>content</code> - содержимое ресурсной записи.</li></ul><p>Нам необходимы только записи с типом <code>A</code>. Обычно в записях с типом <code>A</code> хранятся IP адреса серверов, к которым привязан домен. У записей с типом <code>A</code> в поле <code>content</code> находится IP адрес, который должен изменить наш MikroTik при обращении к CloudFlare API.</p><h2>Скрипт</h2><div class="shortcode shortcode-file mb-3"><div class="card overflow-hidden"><div class=card-header><div class="d-flex align-items-center"><div class=flex-shrink-0><i class="far fa-file-code fa-fw"></i></div><div class="flex-grow-1 mx-2"><code>cf.ddns.rsc</code></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-8efe51bf1b97e1500791c6c71f5f14ba role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Скачать><a class=text-body href=cf.ddns.rsc download role=button aria-label=Скачать><i class="fas fa-download fa-fw"></i></a></li><li class=list-inline-item data-bs-tooltip data-bs-title=Открыть><a class=text-body href=cf.ddns.rsc target=_blank role=button aria-label=Открыть><i class="fas fa-arrow-up-right-from-square fa-fw"></i></a></li></ul></div></div></div><div class=card-body id=clipboard-8efe51bf1b97e1500791c6c71f5f14ba><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Mikrotik RouterOS script for CloudFlare DDNS</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl><span class=c1># @package    RouterOS</span>
</span></span><span class=line><span class=cl><span class=c1># @author     Kitsune Solar &lt;mail@kitsune.solar&gt;</span>
</span></span><span class=line><span class=cl><span class=c1># @copyright  2023 iHub TO</span>
</span></span><span class=line><span class=cl><span class=c1># @license    MIT</span>
</span></span><span class=line><span class=cl><span class=c1># @version    0.0.1</span>
</span></span><span class=line><span class=cl><span class=c1># @link       https://lib.onl</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RouterOS: WAN interface name.</span>
</span></span><span class=line><span class=cl>:local rosWanInterface <span class=s2>&#34;ether1&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># RouterOS: Enables trust chain validation from local certificate store.</span>
</span></span><span class=line><span class=cl><span class=c1># &#39;no&#39;  | Disable certificate check.</span>
</span></span><span class=line><span class=cl><span class=c1># &#39;yes&#39; | Enable certificate check.</span>
</span></span><span class=line><span class=cl>:local rosCheckCert <span class=s2>&#34;no&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: API token.</span>
</span></span><span class=line><span class=cl>:local cfToken <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Domain.</span>
</span></span><span class=line><span class=cl>:local cfDomain <span class=s2>&#34;example.com&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Zone ID.</span>
</span></span><span class=line><span class=cl>:local cfZoneID <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: DNS ID.</span>
</span></span><span class=line><span class=cl>:local cfDnsID <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Domain record type.</span>
</span></span><span class=line><span class=cl>:local cfRecordType <span class=s2>&#34;A&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># CloudFlare: Debug mode.</span>
</span></span><span class=line><span class=cl><span class=c1># 0 | Disable debug mode.</span>
</span></span><span class=line><span class=cl><span class=c1># 1 | Enable debug mode.</span>
</span></span><span class=line><span class=cl>:local cfDebug <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl><span class=c1># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IP on WAN interface.</span>
</span></span><span class=line><span class=cl>:local srcIP <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># IP on CloudFlare domain.</span>
</span></span><span class=line><span class=cl>:local dstIP <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get RouterOS WAN IP.</span>
</span></span><span class=line><span class=cl>:set srcIP <span class=o>[</span>/ip address get <span class=o>[</span>/ip address find <span class=nv>interface</span><span class=o>=</span><span class=nv>$rosWanInterface</span> <span class=o>]</span> address<span class=o>]</span>
</span></span><span class=line><span class=cl>:set srcIP <span class=o>[</span>:pick <span class=nv>$srcIP</span> <span class=m>0</span> <span class=o>[</span>:find <span class=nv>$srcIP</span> <span class=s2>&#34;/&#34;</span><span class=o>]]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get CloudFlare domain IP.</span>
</span></span><span class=line><span class=cl>:set dstIP <span class=o>[</span>:resolve <span class=nv>$cfDomain</span><span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Build CloudFlare API (v4).</span>
</span></span><span class=line><span class=cl>:local cfAPI <span class=s2>&#34;https://api.cloudflare.com/client/v4/zones/&#34;</span>
</span></span><span class=line><span class=cl>:set cfAPI <span class=o>(</span><span class=nv>$cfAPI</span> . <span class=s2>&#34;</span><span class=nv>$cfZoneID</span><span class=s2>/dns_records/</span><span class=nv>$cfDnsID</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>:local cfAPIHeader <span class=s2>&#34;Authorization: Bearer </span><span class=nv>$cfToken</span><span class=s2>, Content-Type: application/json&#34;</span>
</span></span><span class=line><span class=cl>:local cfAPIData <span class=s2>&#34;{\&#34;type\&#34;:\&#34;</span><span class=nv>$cfRecordType</span><span class=s2>\&#34;,\&#34;name\&#34;:\&#34;</span><span class=nv>$cfDomain</span><span class=s2>\&#34;,\&#34;content\&#34;:\&#34;</span><span class=nv>$srcIP</span><span class=s2>\&#34;}&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Write debug info to log.</span>
</span></span><span class=line><span class=cl>:if <span class=o>(</span><span class=nv>$cfDebug</span><span class=o>)</span> <span class=k>do</span><span class=o>={</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: Domain = </span><span class=nv>$cfDomain</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: Domain IP (dstIP) = </span><span class=nv>$dstIP</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: WAN IP (srcIP) = </span><span class=nv>$srcIP</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: CloudFlare API (cfAPI) = </span><span class=nv>$cfAPI</span><span class=s2>&amp;content=</span><span class=nv>$srcIP</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>}</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Compare and update CF if necessary.</span>
</span></span><span class=line><span class=cl>:if <span class=o>(</span><span class=nv>$dstIP</span> !<span class=o>=</span> <span class=nv>$srcIP</span><span class=o>)</span> <span class=k>do</span><span class=o>={</span>
</span></span><span class=line><span class=cl>  :log info <span class=o>(</span><span class=s2>&#34;CloudFlare: Updating </span><span class=nv>$cfDomain</span><span class=s2>, setting </span><span class=nv>$srcIP</span><span class=s2> = </span><span class=nv>$cfDomain</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  /tool fetch <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    <span class=nv>mode</span><span class=o>=</span>https <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    http-method<span class=o>=</span>put <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    http-header-field<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$cfAPIHeader</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    http-data<span class=o>=</span><span class=s2>&#34;</span><span class=nv>$cfAPIData</span><span class=s2>&#34;</span> <span class=nv>url</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$cfAPI</span><span class=s2>&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    check-certificate<span class=o>=</span><span class=nv>$rosCheckCert</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    <span class=nv>output</span><span class=o>=</span>user as-value
</span></span><span class=line><span class=cl>  /ip dns cache flush
</span></span><span class=line><span class=cl><span class=o>}</span> <span class=k>else</span><span class=o>={</span>
</span></span><span class=line><span class=cl>  :log info <span class=s2>&#34;CloudFlare: No Update Needed!&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div></div></div><h3>Настройка</h3><p>Алгоритм настройки довольно прост:</p><ol><li>Получаем токен для работы с CloudFlare API.</li><li>При помощи специальной команды узнаём значение поля <code>id</code> ресурсной записи с типом <code>A</code>.</li><li>Это значение вписываем в переменную <code>cfDnsID</code> скрипта.</li><li>Остальные требуемые значения для переменных уже доступны без каких-либо телодвижений.</li></ol><h3>Переменные</h3><p>Опишу переменные и что они из себя представляют:</p><ul><li><code>rosWanInterface</code> - имя интерфейса <strong>WAN</strong> в RouterOS.</li><li><code>rosCheckCert</code> - включение / отключение проверки цепочки сертификации при запросе к CloudFlare API. Для корректной работы этой функции необходимо, чтобы в репозитории сертификатов RouterOS присутствовали корневые сертификаты центров сертификации. Про импортирование сертификатов написано в заметке <span class="shortcode shortcode-uuid"><a href=/ru/articles/2023/10/cc13623b-970c-5950-867e-168f9ba9025a/>Добавление корневых сертификатов в RouterOS</a></span>.</li><li><code>cfToken</code> - токен, полученный в <a title href=https://dash.cloudflare.com/profile/api-tokens target=_blank rel="noopener noreferrer nofollow">панели управления токенами</a>.</li><li><code>cfDomain</code> - название домена, для которого необходимо динамически менять IP адрес.</li><li><code>cfZoneID</code> - ID домена. Находится в панели управления доменом на главной странице в поле <strong>Zone ID</strong>.</li><li><code>cfDnsID</code> - ID ресурсной записи домена. Для получения значения переменной, необходимо выполнить запрос к CloudFlare API.</li><li><code>cfRecordType</code> - тип ресурсной записи домена. Обычно это <code>A</code>. Менять нет необходимости.</li><li><code>cfDebug</code> - включение / отключение отображения технической информации в логе RouterOS.</li></ul><p>Рекомендую настраивать скрипт в редакторе с подсветкой синтаксиса, чтобы не ошибиться и не задеть какую-либо кавычку.</p><h3>Установка</h3><p>После настройки скрипта, его нужно добавить в репозиторий скриптов RouterOS. Находится репозиторий в <strong>System / Scripts</strong>. При добавлении скрипта, необходимо выбрать политики <code>read</code>, <code>write</code>, <code>test</code>, <code>policy</code>.</p><h3>Планировщик</h3><p>Скрипт должен переодически запускаться для проверки и синхронизации IP адресов сервера и домена. В этом поможет планировщик RouterOS. Заходим в <strong>System / Scheduler</strong> и создаём задачу с политиками <code>read</code>, <code>write</code>, <code>test</code>, <code>policy</code>. В поле <strong>On Event</strong> вписываем точное название скрипта, ранее добавленного в репозиторий RouterOS.</p><h3>Проверка</h3><p>Проверить работу скрипта можно в репозитории по адресу <strong>System / Scripts</strong>. Выделив скрипт и нажав на кнопку <span class="shortcode shortcode-key d-inline-block"><kbd>Run</kbd></span>, смотрим изменился ли IP адрес у домена в панели управления CloudFlare.</p></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/router/>#router</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/mikrotik/>#mikrotik</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/routeros/>#routeros</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/cloudflare/>#cloudflare</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-warning" data-bs-tooltip data-bs-title='Уровень сложности: Средний'><i class="far fa-face-meh fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-07-12T15:09:48Z data-fn=date-local>2020/07/12 15:09:48 UTC</time></li></ul></div></div></div></div></div><div class=col><div class="d-sm-block d-md-none"><article class=node-articles><header><div class="node-cover mb-3"><a title="Первичная настройка UAIK" class=d-block href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3><picture><source srcset='https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=640&amp;h=360&amp;fit=crop&amp;auto=compress,format 640w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=768&amp;h=432&amp;fit=crop&amp;auto=compress,format 768w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=1024&amp;h=576&amp;fit=crop&amp;auto=compress,format 1024w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=1280&amp;h=720&amp;fit=crop&amp;auto=compress,format 1280w,https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format 1600w' sizes="(min-width: 576px) 100vw"><img class="d-block w-100 h-100 rounded" src="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=1600&amp;h=900&amp;fit=crop&amp;auto=compress,format" width=1600 height=900 alt="Первичная настройка UAIK"></picture></a></div><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3>Первичная настройка UAIK</a></h2></div></header><div class=node-body><p>После автоматической установки (Kickstart) при помощи <a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p></div></article></div><div class="d-none d-md-block"><article class="node-articles d-flex overflow-hidden"><div class="flex-shrink-0 me-3"><div class=node-cover><a title="Первичная настройка UAIK" class=d-block href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3><img class="d-block rounded" src="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a?crop=entropy&amp;w=160&amp;h=160&amp;fit=crop&amp;auto=compress,format" width=160 height=160 alt="Первичная настройка UAIK"></a></div></div><div class="flex-grow-1 overflow-hidden"><header><div class=node-title><h2 class=h5><a href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/ data-bs-toggle=modal data-bs-target=#modal-f3895b710b130cb24aafa39295e79ee3>Первичная настройка UAIK</a></h2></div></header><div class=node-body><p>После автоматической установки (Kickstart) при помощи <a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p></div></div></article></div><div class="modal fade" id=modal-f3895b710b130cb24aafa39295e79ee3 tabindex=-1 aria-labelledby=modal-f3895b710b130cb24aafa39295e79ee3-label aria-hidden=true><div class="modal-dialog modal-fullscreen"><div class=modal-content><div class=modal-header><h2 class="modal-title fs-5 text-truncate" id=modal-f3895b710b130cb24aafa39295e79ee3-label><a href=/ru/articles/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/>Первичная настройка UAIK</a></h2><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class=modal-body><div class=node-body><p>После автоматической установки (Kickstart) при помощи <a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p><h2>Включение графического режима</h2><div class="shortcode shortcode-codeblock shortcode-codeblock-0 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-fc3cdf44b79407afaa78e8e1c46ad6d3><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>systemctl set-default graphical.target</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-fc3cdf44b79407afaa78e8e1c46ad6d3 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Создание пользователя</h2><div class="shortcode shortcode-codeblock shortcode-codeblock-1 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-c2401ca4beee23a06156b3b9301700e6><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Добавить пользователя.</span>
</span></span><span class=line><span class=cl>useradd -mc <span class=s2>&#34;User 0001&#34;</span> user-0001
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Установить пароль для пользователя.</span>
</span></span><span class=line><span class=cl>passwd user-0001</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-c2401ca4beee23a06156b3b9301700e6 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Отключение пользователя</h2><div class="shortcode shortcode-codeblock shortcode-codeblock-2 shortcode-codeblock-sh"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-1cb421372faaf63dad1cb97a11828b6f><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># Отключить пользователя.</span>
</span></span><span class=line><span class=cl>usermod -L user-0000</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-1cb421372faaf63dad1cb97a11828b6f role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Перемещение пользователя</h2><div class="shortcode shortcode-codeblock shortcode-codeblock-3 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-99ef1556555dc61a9206593a642b61f2><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>usermod -md /new_home/user-0001 user-0001</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-99ef1556555dc61a9206593a642b61f2 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><h2>Работа с диском</h2><p>Чтобы создать на новом диске раздел, необходимо войти в программу <code>parted</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-4 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-0d276f26fd45f90894a0fc355f5a9300><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>parted -a optimal /dev/sdb</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-0d276f26fd45f90894a0fc355f5a9300 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Выполнить следующие команды:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-5 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-93467e2ff79d8c831caf0be561b030c5><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>(parted) mklabel gpt
</span></span><span class=line><span class=cl>(parted) mkpart primary 0% 100%
</span></span><span class=line><span class=cl>(parted) quit</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-93467e2ff79d8c831caf0be561b030c5 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Создать файловую систему:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-6 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-ac8e0eafa1b27cee3755529bbf8a7e93><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>mkfs.xfs /dev/sdb1</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-ac8e0eafa1b27cee3755529bbf8a7e93 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div><p>Настроить автоматическое монтирование раздела в <code>/etc/fstab</code>:</p><div class="shortcode shortcode-codeblock shortcode-codeblock-7 shortcode-codeblock-text"><div class="d-flex mb-3 overflow-hidden"><div class="flex-grow-1 rounded overflow-hidden" id=clipboard-961bca0d1d1851f1b857bd03a4721166><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>/dev/sdb1 /home/storage xfs defaults 0 0</span></span></code></pre></div></div><div class=flex-shrink-0><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=Копировать><a class=text-body href=# data-fn="clipboard preventDefault" data-clipboard-target=#clipboard-961bca0d1d1851f1b857bd03a4721166 role=button aria-label=Копировать><i class="fas fa-copy fa-fw"></i></a></li></ul></div></div></div></div></div><div class=modal-footer><ul class="list-inline text-center text-body-secondary small"><li class=list-inline-item><a href=https://lib.onl/ru/tags/linux/>#linux</a></li><li class=list-inline-item><a href=https://lib.onl/ru/tags/fedora/>#fedora</a></li><li class=list-inline-item>&bull;</li><li class="list-inline-item text-success" data-bs-tooltip data-bs-title='Уровень сложности: Простой'><i class="far fa-face-smile fa-fw"></i></li><li class=list-inline-item>&bull;</li><li class=list-inline-item><time datetime=2020-06-02T06:20:27Z data-fn=date-local>2020/06/02 06:20:27 UTC</time></li></ul></div></div></div></div></div></div><nav class=mt-5><ul class="pagination justify-content-center"><li class=page-item><a class=page-link href=/ru/authors/kitsunesolar/><i class="fas fa-angle-double-left fa-fw"></i></a></li><li class=page-item><a class=page-link href=/ru/authors/kitsunesolar/page/2/><i class="fas fa-angle-left fa-fw"></i></a></li><li class=page-item><a href=/ru/authors/kitsunesolar/ class=page-link>1</a></li><li class=page-item><a href=/ru/authors/kitsunesolar/page/2/ class=page-link>2</a></li><li class="page-item active" aria-current=page><a href=/ru/authors/kitsunesolar/page/3/ class=page-link>3</a></li><li class=page-item><a href=/ru/authors/kitsunesolar/page/4/ class=page-link>4</a></li><li class=page-item><a class=page-link href=/ru/authors/kitsunesolar/page/4/><i class="fas fa-angle-right fa-fw"></i></a></li><li class="page-item disabled"><span class=page-link><i class="fas fa-angle-double-right fa-fw"></i></span></li></ul></nav></div></div></main><footer class="mt-auto border-top bg-light"><div class="section py-5 border-bottom"><div class=container><div class="row g-3"><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">О проекте</h2><div class=node-body><p>Заметки по системному администрированию и веб-разработкам.</p></div></article></div><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">Ресурсы</h2><div class=node-body><ul><li><a title href=https://kitsune.solar/ target=_blank rel="noopener noreferrer nofollow">Kitsune Solar</a></li><li><a title href=https://uaik.github.io/ target=_blank rel="noopener noreferrer nofollow">UNIX AIK</a></li></ul></div></article></div><div class=col-lg><article><h2 class="h5 border-bottom pb-1 mb-3">Контакты</h2><div class=node-body><ul><li><a title href=mailto:mail@lib.onl target=_self rel>Email</a></li></ul></div></article></div></div></div></div><div class="section py-3"><div class=container><div class="row row-cols-1 row-cols-lg-2 small text-body-secondary align-items-center"><div class="col text-center text-lg-start"><ul class="list-inline mb-0"><li class=list-inline-item><div>Library Online &copy; 2023</div><div>Заметки на тему администрирования и разработки различных систем, приложений и серверов.</div></li></ul></div><div class="col text-center text-lg-end"><ul class="list-inline mb-0"><li class=list-inline-item data-bs-tooltip data-bs-title=RSS><a class="btn btn-light btn-sm" href=/ru/authors/kitsunesolar/index.xml target=_blank aria-label=RSS><i class="fas fa-rss fa-fw"></i></a></li><li class="list-inline-item dropup" data-bs-tooltip data-bs-title=Языки><a class="dropdown-toggle btn btn-light btn-sm" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false aria-label=Языки><i class="fas fa-language fa-fw"></i></a><div class="dropdown-menu dropdown-menu-end shadow"><a class=dropdown-item href=/ru/ hreflang=ru>Русский
</a><a class=dropdown-item href=/en/ hreflang=en>English</a></div></li></ul></div></div></div></div></footer><div class="modal fade" id=search-modal tabindex=-1 aria-labelledby=searchModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-xl"><div class=modal-content><div class=modal-header><h5 class=modal-title id=searchModalLabel>Поиск</h5><button type=button class=btn-close data-bs-dismiss=modal aria-label=Закрыть></button></div><div class="modal-body node-body"><div class="row row-cols-1 g-3"><div class=col><div class="row g-3"><div class=col-lg><form action=https://google.com/search method=get class=d-flex target=_blank><input type=hidden name=domains value=lib.onl>
<input type=hidden name=sitesearch value=lib.onl><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input type=search class=form-control name=q placeholder='Поиск Google' aria-label='Поиск Google'>
<span class=input-group-text><i class="fab fa-google fa-fw"></i></span></div></form></div><div class=col-lg><form action=https://ya.ru/search method=get class=d-flex target=_blank><input type=hidden name=site value=lib.onl><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input type=search class=form-control name=text placeholder='Поиск Яндекс' aria-label='Поиск Яндекс'>
<span class=input-group-text><i class="fab fa-yandex fa-fw"></i></span></div></form></div></div></div><div class=col><form id=search-form method=get class=d-flex autocomplete=off><div class=input-group><span class=input-group-text><i class="fas fa-search fa-fw"></i></span>
<input id=search-input type=search class=form-control name=q placeholder='Внутренний поиск' aria-label='Внутренний поиск'>
<span class=input-group-text><i class="fas fa-brain fa-fw"></i></span></div></form></div><div class=col><div class="list-group list-group-flush d-none overflow-auto" id=search-results></div><div id=search-help><div class="alert alert-info d-flex align-items-center overflow-hidden node-body" id=alert-7dedbface0c2f19168d3f049f1703b85 role=alert><div class=flex-shrink-0><i class="fas fa-search fa-fw fa-2x"></i></div><div class="flex-grow-1 ms-3 overflow-hidden"><p>Используется нечёткий поиск (приблизительное сопоставление строк).
Это метод поиска строк, которые приблизительно соответствуют поисковому шаблону.</p><p>Результаты поиска сортируются по точности совпадения с поисковым шаблоном.
Результаты поиска, наиболее точно соответствующие запросу, находятся сверху, приблизительные результаты - снизу.</p></div></div></div></div></div></div></div></div></div><script src=/js/vendor.bundle.min.js defer></script><script src=/ru/js/system.bundle.min.js defer></script></body></html>