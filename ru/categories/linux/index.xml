<?xml version="1.0" encoding="UTF-8" standalone="yes"?><rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:sy="http://purl.org/rss/1.0/modules/syndication/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:yandex="http://news.yandex.ru" xmlns:turbo="http://turbo.yandex.ru"><channel><title>Linux / Library Online</title><link>https://lib.onl/ru/categories/linux/</link><description>Статьи по настройке и администрированию ОС на базе ядра Linux.</description><language>ru-RU</language><sy:updatePeriod>weekly</sy:updatePeriod><sy:updateFrequency>1</sy:updateFrequency><image><link>https://lib.onl/ru/categories/linux/</link><url>https://lib.onl/favicon-128.png</url><width>128</width><height>128</height><title>Linux / Library Online</title><description>Статьи по настройке и администрированию ОС на базе ядра Linux.</description></image><lastBuildDate>Tue, 17 Oct 2023 23:42:31 +0000</lastBuildDate><atom:link href="https://lib.onl/ru/categories/linux/index.xml" rel="self" type="application/rss+xml"/><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Создание сертификатов через OpenSSL</title><link>https://lib.onl/ru/posts/2023/10/6733cb51-62a0-5ed9-b421-8f08c4e0cb18/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2023/10/6733cb51-62a0-5ed9-b421-8f08c4e0cb18/</guid><description>OpenSSL является библиотекой по работе с криптографией, но в этой статье я затрону только часть функций этого инструмента, а именно создание само-подписанных сертификатов.</description><media:content medium="image" url="https://images.unsplash.com/photo-1568057373189-8bf0cf6179e6" width="1600" height="900"/><content:encoded><![CDATA[<p>OpenSSL является библиотекой по работе с криптографией, но в этой статье я затрону только часть функций этого инструмента, а именно создание само-подписанных сертификатов.</p>
<h2 id="создание-центра-сертификации">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%86%d0%b5%d0%bd%d1%82%d1%80%d0%b0-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d0%b8">Создание центра сертификации</a>
</h2><p>При помощи корневого сертификата, мы будем подписывать сертификаты клиентские. Создаём сертификат центра сертификации&hellip;</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1d802bb5fbb4bcdae38bf32906a29187"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl req -x509 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -newkey ec:&lt;<span class="o">(</span> openssl ecparam -name <span class="s1">&#39;secp384r1&#39;</span> <span class="o">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -nodes -days <span class="s1">&#39;3650&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -keyform <span class="s1">&#39;PEM&#39;</span> -outform <span class="s1">&#39;PEM&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -keyout <span class="s1">&#39;ca.root.key&#39;</span> -out <span class="s1">&#39;ca.root.crt&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1d802bb5fbb4bcdae38bf32906a29187"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-days '3650'</code> - количество дней, по прошествии которого сертификат центра сертификации станет недействительным.</li>
<li><code>-keyout 'ca.root.key'</code> - название создаваемого файла с ключом центра сертификации.</li>
<li><code>-out 'ca.root.crt'</code> - название создаваемого файла с сертификатом центра сертификации.</li>
</ul>
<h2 id="создание-клиентского-сертификата">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%ba%d0%bb%d0%b8%d0%b5%d0%bd%d1%82%d1%81%d0%ba%d0%be%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Создание клиентского сертификата</a>
</h2><p>Как только будет готов корневой сертификат, можно приступать к выпуску клиентских сертификатов.</p>
<h3 id="создание-приватного-ключа">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d0%be%d0%b3%d0%be-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0">Создание приватного ключа</a>
</h3><p>Для начала создаём приватный ключ.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a2fd8327adeeaefe12ba4a210762e800"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl ecparam -name <span class="s1">&#39;prime256v1&#39;</span> -genkey -noout -out <span class="s1">&#39;client.key.private.pem&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a2fd8327adeeaefe12ba4a210762e800"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-out 'client.key.private.pem'</code> - название создаваемого файла с клиентским приватным ключом.</li>
</ul>
<h3 id="создание-публичного-ключа">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d0%be%d0%b3%d0%be-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0">Создание публичного ключа</a>
</h3><p>Создание публичного ключа будет не лишним.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-e80e2f51f0d3a7eadb02a5c269b1f924"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl ec -in <span class="s1">&#39;client.key.private.pem&#39;</span> -pubout -out <span class="s1">&#39;client.key.public.pem&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-e80e2f51f0d3a7eadb02a5c269b1f924"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.key.private.pem'</code> - файл c клиентским приватным ключом.</li>
<li><code>-out 'client.key.public.pem'</code> - название создаваемого файла с клиентским публичным ключом.</li>
</ul>
<h3 id="создание-запроса-на-подпись-сертификата">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Создание запроса на подпись сертификата</a>
</h3><p>Выполняем запрос на сертификат.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1b82dc6d75f2a73ee36e89c6040c5d2a"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl req -new -key <span class="s1">&#39;client.key.private.pem&#39;</span> -out <span class="s1">&#39;client.csr&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1b82dc6d75f2a73ee36e89c6040c5d2a"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-key 'client.key.private.pem'</code> - файл с приватным ключом клиентского сертификата.</li>
<li><code>-out 'client.csr'</code> - название создаваемого файла с запросом на подпись клиентского сертификата.</li>
</ul>
<p>При выполнении запроса будет предложено ввести актуальные данные для будущего сертификата:</p>
<ul>
<li><code>Country Name (2 letter code)</code> - двухбуквенный код страны, в которой юридически находится ваша организация.</li>
<li><code>State or Province Name (full name)</code> - штат или провинция, в которой юридически находится ваша организация.</li>
<li><code>Locality Name (e.g., city)</code> - город, в котором юридически находится ваша организация.</li>
<li><code>Organization Name (e.g., company)</code> - юридически зарегистрированное название вашей организации.</li>
<li><code>Organizational Unit Name (e.g., section)</code> - название вашего отдела в организации (опционально).</li>
<li><code>Common Name (e.g., server FQDN)</code> - полное доменное имя (FQDN) (например, <a title="" href="https://www.example.com" target="_blank" rel="noopener noreferrer nofollow">www.example.com</a>).</li>
<li><code>Email Address</code> - ваш адрес email (опционально).</li>
<li><code>A challenge password</code> - пароль (опционально).</li>
<li><code>An optional company name</code> - необязательное название компании (опционально).</li>
</ul>
<p>Самое главное поле это <code>Common Name (e.g., server FQDN)</code> (<code>CN</code>), заполнять его необходимо очень внимательно.</p>
<h3 id="создание-и-подпись-сертификата">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b8-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Создание и подпись сертификата</a>
</h3><p>В заключительной части остаётся только создать сам сертификат и подписать его.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a5a5c5ed1146a704c830a7443b11a81c"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl x509 -req -in <span class="s1">&#39;client.csr&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -CA <span class="s1">&#39;ca.crt&#39;</span> -CAkey <span class="s1">&#39;ca.key&#39;</span> -days <span class="s1">&#39;3650&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -outform <span class="s1">&#39;PEM&#39;</span> -out <span class="s1">&#39;client.crt&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a5a5c5ed1146a704c830a7443b11a81c"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.csr'</code> - файл с запросом клиентского сертификата.</li>
<li><code>-CA 'ca.crt'</code> - файл с сертификатом центра сертификации.</li>
<li><code>-CAkey 'ca.key'</code> - файл с ключом центра сертификации.</li>
<li><code>-days '3650'</code> - количество дней, по прошествии которого клиентский сертификат станет недействительным.</li>
<li><code>-out 'client.crt'</code> - название создаваемого файла с клиентским сертификатом.</li>
</ul>
<h3 id="экспорт-сертификата">
  <a class="link-body-emphasis" href="#%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Экспорт сертификата</a>
</h3><p>Для того, чтобы импортировать сертификат на клиентские устройства, его необходимо экспортировать в формат <code>P12</code>. <code>P12</code> является контейнером, в котором содержится приватный ключ сертификата и сам сертификат.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b5d57be654854adb63280e04f9c62089"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl pkcs12 -export <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -inkey <span class="s1">&#39;client.key.private.pem&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -in <span class="s1">&#39;client.crt&#39;</span> -out <span class="s1">&#39;client.p12&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b5d57be654854adb63280e04f9c62089"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-inkey 'client.key.private.pem'</code> - файл с приватным клиентским ключом.</li>
<li><code>-in 'client.crt'</code> - файл с клиентским сертификатом.</li>
<li><code>-out 'client.p12'</code> - название создаваемого файла-контейнера с приватным ключом и сертификатом.</li>
</ul>
<h3 id="верификация-сертификата">
  <a class="link-body-emphasis" href="#%d0%b2%d0%b5%d1%80%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d1%8f-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Верификация сертификата</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-383aae18a358a02ea3a371cd0e2922cb"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl verify -CAfile <span class="s1">&#39;ca.crt&#39;</span> <span class="s1">&#39;client.crt&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-383aae18a358a02ea3a371cd0e2922cb"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ul>
<li><code>-CAfile 'ca.crt'</code> - файл с сертификатом центра сертификации.</li>
<li><code>'client.crt'</code> - файл с клиентским сертификатом.</li>
</ul>
<h3 id="просмотр-сертификата">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Просмотр сертификата</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-cfbc121da0106e5a1e3b630c507b63ae"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl x509 -in <span class="s1">&#39;client.crt&#39;</span> -text</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-cfbc121da0106e5a1e3b630c507b63ae"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.crt'</code> - файл с клиентским сертификатом.</li>
</ul>
<p>При выполнении команды, терминал покажет информацию со всеми основными сведениями о сертификате (пример ниже).</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-43c8eb8b7fba5e001b0b8b708da48d4c"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-43c8eb8b7fba5e001b0b8b708da48d4c"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">openssl x509 -in &#39;client.crt&#39; -text

Certificate:
    Data:
        Version: 1 (0x0)
        Serial Number:
            49:14:b8:78:17:a1:ca:c4:6a:41:1b:23:f3:8a:8d:36:e0:9e:69:81
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = CA
        Validity
            Not Before: Oct 18 21:31:53 2023 GMT
            Not After : Oct 15 21:31:53 2033 GMT
        Subject: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = CN-FQDN, emailAddress = mail@example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9f:22:91:cc:14:b3:75:ad:44:cc:0d:96:0d:19:
                    04:c4:20:79:fd:b7:f5:65:64:dd:65:a1:f0:b8:2d:
                    e4:02:75:62:41:03:7c:6e:2f:48:e4:11:38:dc:ed:
                    08:1f:4c:fa:5f:2f:a2:f5:5d:51:2e:8e:de:de:70:
                    33:aa:e5:3b:95
                ASN1 OID: prime256v1
                NIST CURVE: P-256
    Signature Algorithm: ecdsa-with-SHA256
         30:64:02:30:0d:ff:b1:dc:8b:a6:c6:9c:ad:65:8a:7c:01:41:
         9f:91:ca:24:4c:0b:28:5a:5c:f6:35:2a:b2:d7:58:ca:39:da:
         6c:bf:cf:8b:23:20:ce:11:45:13:61:36:e2:23:4a:e9:02:30:
         54:dc:45:ed:ef:21:58:ea:c7:b6:63:db:a2:d9:71:fe:3d:b3:
         d6:1e:15:82:7b:c8:e8:08:33:d5:2f:d5:f2:8f:3b:41:ea:53:
         1e:2d:a9:1e:9e:25:9c:fb:a7:12:f9:ec</code></pre></div>
  </div>
</div>
<h3 id="просмотр-запроса-на-подпись-сертификата">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Просмотр запроса на подпись сертификата</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-7bc4765bcad5e26e0b5bb392059e2481"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl req -in <span class="s1">&#39;client.csr&#39;</span> -text</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-7bc4765bcad5e26e0b5bb392059e2481"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.csr'</code> - файл с запросом на подпись клиентского сертификата.</li>
</ul>
<p>Команда выдаст информацию по запросу на подпись клиентского сертификата (пример ниже).</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-952b988212b55682b7631dce6d25c49d"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-952b988212b55682b7631dce6d25c49d"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">openssl req -in &#39;client.csr&#39; -text

Certificate Request:
    Data:
        Version: 1 (0x0)
        Subject: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = CN-FQDN, emailAddress = mail@example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9f:22:91:cc:14:b3:75:ad:44:cc:0d:96:0d:19:
                    04:c4:20:79:fd:b7:f5:65:64:dd:65:a1:f0:b8:2d:
                    e4:02:75:62:41:03:7c:6e:2f:48:e4:11:38:dc:ed:
                    08:1f:4c:fa:5f:2f:a2:f5:5d:51:2e:8e:de:de:70:
                    33:aa:e5:3b:95
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        Attributes:
            a0:00
        Requested Extensions:
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:20:51:9c:a0:b9:b2:61:7f:fa:64:ea:34:1f:65:15:
         37:ae:f4:89:30:47:11:89:db:c4:1b:1d:9b:82:b9:64:ea:c7:
         02:21:00:f8:00:70:4e:e6:db:99:78:cf:25:22:c0:8d:c6:b1:
         f3:f0:d8:68:3b:c2:51:21:a5:b3:fa:97:f9:85:c6:9c:49</code></pre></div>
  </div>
</div>
<h2 id="автоматизация">
  <a class="link-body-emphasis" href="#%d0%b0%d0%b2%d1%82%d0%be%d0%bc%d0%b0%d1%82%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f">Автоматизация</a>
</h2><p>Команд много. Поэтому я как обычно, решил всё автоматизировать и загнать в скрипт.</p>

    

    

    <div class="shortcode shortcode-file mb-3">
      <div class="card overflow-hidden">
        <div class="card-header">
          <div class="d-flex align-items-center">
            <div class="flex-shrink-0">
              <i class="far fa-file-code fa-fw"></i>
            </div>
            <div class="flex-grow-1 mx-2">
              <code>openssl.ca.sh</code>
            </div>
            <div class="flex-shrink-0">
              <ul class="list-inline mb-0">
                <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
                  <a class="text-body" href="#"
                     data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-881e4db1cc94abb972e576a4951e02b5"
                     role="button" aria-label='Копировать'>
                    <i class="fas fa-copy fa-fw"></i>
                  </a>
                </li>
                <li class="list-inline-item" data-bs-tooltip data-bs-title='Скачать'>
                  <a class="text-body" href="openssl.ca.sh" download
                     role="button" aria-label='Скачать'>
                    <i class="fas fa-download fa-fw"></i>
                  </a>
                </li>
                <li class="list-inline-item" data-bs-tooltip data-bs-title='Открыть'>
                  <a class="text-body" href="openssl.ca.sh" target="_blank"
                     role="button" aria-label='Открыть'>
                    <i class="fas fa-arrow-up-right-from-square fa-fw"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
          
          
              
          
        <div class="card-body" id="clipboard-881e4db1cc94abb972e576a4951e02b5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/bash -e
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OpenSSL certificate generator.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @package    Bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @author     Kitsune Solar &lt;mail@kitsune.solar&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @copyright  2023 iHub TO</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @license    MIT</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @version    0.1.0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @link       https://lib.onl</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get &#39;date&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="nv">date</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">command</span> -v date <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get &#39;openssl&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="nv">ossl</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">command</span> -v openssl <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get &#39;shuf&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="nv">shuf</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">command</span> -v shuf <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># CA key &amp; certificate names.</span>
</span></span><span class="line"><span class="cl"><span class="nv">ca_key</span><span class="o">=</span><span class="s1">&#39;ca.root.key&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">ca_crt</span><span class="o">=</span><span class="s1">&#39;ca.root.crt&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Specifies the number of days to make a certificate valid for.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Default is 30 days.</span>
</span></span><span class="line"><span class="cl"><span class="nv">days</span><span class="o">=</span><span class="s1">&#39;3650&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Timestamp.</span>
</span></span><span class="line"><span class="cl"><span class="nv">ts</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$((</span> <span class="k">$(</span> <span class="si">${</span><span class="nv">date</span><span class="si">}</span> -u <span class="s1">&#39;+%s%N&#39;</span> <span class="k">)</span> <span class="o">/</span> <span class="m">1000000</span> <span class="k">))</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Suffix.</span>
</span></span><span class="line"><span class="cl"><span class="nv">sfx</span><span class="o">=</span><span class="k">$(</span> <span class="si">${</span><span class="nv">shuf</span><span class="si">}</span> -i <span class="s1">&#39;1000-9999&#39;</span> -n <span class="m">1</span> --random-source<span class="o">=</span><span class="s1">&#39;/dev/random&#39;</span> <span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ca<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">ec</span><span class="o">=</span><span class="s1">&#39;secp384r1&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;--- [CREATE] Certificate Authority&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> req -x509 -newkey ec:&lt;<span class="o">(</span> openssl ecparam -name <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ec</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -nodes -days <span class="s2">&#34;</span><span class="si">${</span><span class="nv">days</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -keyform <span class="s1">&#39;PEM&#39;</span> -outform <span class="s1">&#39;PEM&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -keyout <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_key</span><span class="si">}</span><span class="s2">&#34;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> x509 -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> -text
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cert<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">ec</span><span class="o">=</span><span class="s1">&#39;prime256v1&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">key_pvt</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.key.private.pem&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">key_pub</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.key.public.pem&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">csr</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.csr&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">crt</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.crt&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">p12</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.p12&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">srl</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.srl&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;--- [CREATE] Client Certificate [</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">]&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> ecparam -name <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ec</span><span class="si">}</span><span class="s2">&#34;</span> -genkey -noout -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> ec -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> -pubout -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pub</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> req -new -key <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">csr</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> x509 -req -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">csr</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -CA <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> -CAkey <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_key</span><span class="si">}</span><span class="s2">&#34;</span> -days <span class="s2">&#34;</span><span class="si">${</span><span class="nv">days</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -CAcreateserial -CAserial <span class="s2">&#34;</span><span class="si">${</span><span class="nv">srl</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -outform <span class="s1">&#39;PEM&#39;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> pkcs12 -export <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -inkey <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">p12</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> verify -CAfile <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> x509 -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> -text
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span></code></pre></div></div>
      </div>
    </div>
<p>Скрипт содержит две функции, вызывать которых можно по отдельности. Функция <code>ca()</code> позволяет сгенерировать ключ и сертификат центра сертификации, а функция <code>cert()</code>, соответственно, генерирует клиентские сертификаты.</p>
<h3 id="использование">
  <a class="link-body-emphasis" href="#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5">Использование</a>
</h3><ol>
<li>Создать ключ и сертификат центра сертификации:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-345684192f4d0bf7b0dc294381292eee"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-345684192f4d0bf7b0dc294381292eee"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">bash openssl.ca.sh ca</code></pre></div>
  </div>
</div>
<ol start="2">
<li>Создать клиентские ключи и сертификаты:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-691c2e15f5f89e505b769fcfa283fe89"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-691c2e15f5f89e505b769fcfa283fe89"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">bash openssl.ca.sh cert</code></pre></div>
  </div>
</div>
<p>Немного расскажу про алгоритм генерации сертификатов.</p>
<ol>
<li>У сертификата есть поле <code>Serial Number</code>, которое содержит серийный номер сертификата. Серийный номер сертификата это уникальный номер, выданный центром сертификации. В моём скрипте при генерации клиентского сертификата указаны опции <code>-CAcreateserial</code> и <code>-CAserial &quot;${srl}&quot;</code>, которые позволяют OpenSSL создавать рядом с клиентскими сертификатами файлы формата <code>.slr</code>, содержащие в себе серийные номера сгенерированных сертификатов. Таким образом можно создавать небольшую локальную базу данных выданных сертификатов.</li>
<li>Файл каждого клиентского сертификата генерируется с названием вида <code>[TS].[SFX].[EXE]</code>, где <code>[TS]</code> - это временная метка в микросекундах, <code>[SFX]</code> - числовой суффикс, а <code>[EXE]</code> - расширение файлов.</li>
</ol>
<p>На этом всё. Не исключаю факта присутствия ошибок или неточностей. Если что, жду предложения в электронную почту. <span class="shortcode shortcode-emoji">😄</span></p>]]></content:encoded><turbo:source/><turbo:topic>Создание сертификатов через OpenSSL</turbo:topic><turbo:content><![CDATA[<p>OpenSSL является библиотекой по работе с криптографией, но в этой статье я затрону только часть функций этого инструмента, а именно создание само-подписанных сертификатов.</p>
<h2 id="создание-центра-сертификации">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%86%d0%b5%d0%bd%d1%82%d1%80%d0%b0-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d0%b8">Создание центра сертификации</a>
</h2><p>При помощи корневого сертификата, мы будем подписывать сертификаты клиентские. Создаём сертификат центра сертификации&hellip;</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1d802bb5fbb4bcdae38bf32906a29187"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl req -x509 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -newkey ec:&lt;<span class="o">(</span> openssl ecparam -name <span class="s1">&#39;secp384r1&#39;</span> <span class="o">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -nodes -days <span class="s1">&#39;3650&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -keyform <span class="s1">&#39;PEM&#39;</span> -outform <span class="s1">&#39;PEM&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -keyout <span class="s1">&#39;ca.root.key&#39;</span> -out <span class="s1">&#39;ca.root.crt&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1d802bb5fbb4bcdae38bf32906a29187"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-days '3650'</code> - количество дней, по прошествии которого сертификат центра сертификации станет недействительным.</li>
<li><code>-keyout 'ca.root.key'</code> - название создаваемого файла с ключом центра сертификации.</li>
<li><code>-out 'ca.root.crt'</code> - название создаваемого файла с сертификатом центра сертификации.</li>
</ul>
<h2 id="создание-клиентского-сертификата">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%ba%d0%bb%d0%b8%d0%b5%d0%bd%d1%82%d1%81%d0%ba%d0%be%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Создание клиентского сертификата</a>
</h2><p>Как только будет готов корневой сертификат, можно приступать к выпуску клиентских сертификатов.</p>
<h3 id="создание-приватного-ключа">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%b8%d0%b2%d0%b0%d1%82%d0%bd%d0%be%d0%b3%d0%be-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0">Создание приватного ключа</a>
</h3><p>Для начала создаём приватный ключ.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a2fd8327adeeaefe12ba4a210762e800"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl ecparam -name <span class="s1">&#39;prime256v1&#39;</span> -genkey -noout -out <span class="s1">&#39;client.key.private.pem&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a2fd8327adeeaefe12ba4a210762e800"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-out 'client.key.private.pem'</code> - название создаваемого файла с клиентским приватным ключом.</li>
</ul>
<h3 id="создание-публичного-ключа">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d0%be%d0%b3%d0%be-%d0%ba%d0%bb%d1%8e%d1%87%d0%b0">Создание публичного ключа</a>
</h3><p>Создание публичного ключа будет не лишним.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-e80e2f51f0d3a7eadb02a5c269b1f924"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl ec -in <span class="s1">&#39;client.key.private.pem&#39;</span> -pubout -out <span class="s1">&#39;client.key.public.pem&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-e80e2f51f0d3a7eadb02a5c269b1f924"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.key.private.pem'</code> - файл c клиентским приватным ключом.</li>
<li><code>-out 'client.key.public.pem'</code> - название создаваемого файла с клиентским публичным ключом.</li>
</ul>
<h3 id="создание-запроса-на-подпись-сертификата">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Создание запроса на подпись сертификата</a>
</h3><p>Выполняем запрос на сертификат.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1b82dc6d75f2a73ee36e89c6040c5d2a"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl req -new -key <span class="s1">&#39;client.key.private.pem&#39;</span> -out <span class="s1">&#39;client.csr&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1b82dc6d75f2a73ee36e89c6040c5d2a"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-key 'client.key.private.pem'</code> - файл с приватным ключом клиентского сертификата.</li>
<li><code>-out 'client.csr'</code> - название создаваемого файла с запросом на подпись клиентского сертификата.</li>
</ul>
<p>При выполнении запроса будет предложено ввести актуальные данные для будущего сертификата:</p>
<ul>
<li><code>Country Name (2 letter code)</code> - двухбуквенный код страны, в которой юридически находится ваша организация.</li>
<li><code>State or Province Name (full name)</code> - штат или провинция, в которой юридически находится ваша организация.</li>
<li><code>Locality Name (e.g., city)</code> - город, в котором юридически находится ваша организация.</li>
<li><code>Organization Name (e.g., company)</code> - юридически зарегистрированное название вашей организации.</li>
<li><code>Organizational Unit Name (e.g., section)</code> - название вашего отдела в организации (опционально).</li>
<li><code>Common Name (e.g., server FQDN)</code> - полное доменное имя (FQDN) (например, <a title="" href="https://www.example.com" target="_blank" rel="noopener noreferrer nofollow">www.example.com</a>).</li>
<li><code>Email Address</code> - ваш адрес email (опционально).</li>
<li><code>A challenge password</code> - пароль (опционально).</li>
<li><code>An optional company name</code> - необязательное название компании (опционально).</li>
</ul>
<p>Самое главное поле это <code>Common Name (e.g., server FQDN)</code> (<code>CN</code>), заполнять его необходимо очень внимательно.</p>
<h3 id="создание-и-подпись-сертификата">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b8-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Создание и подпись сертификата</a>
</h3><p>В заключительной части остаётся только создать сам сертификат и подписать его.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a5a5c5ed1146a704c830a7443b11a81c"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl x509 -req -in <span class="s1">&#39;client.csr&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -CA <span class="s1">&#39;ca.crt&#39;</span> -CAkey <span class="s1">&#39;ca.key&#39;</span> -days <span class="s1">&#39;3650&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -outform <span class="s1">&#39;PEM&#39;</span> -out <span class="s1">&#39;client.crt&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a5a5c5ed1146a704c830a7443b11a81c"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.csr'</code> - файл с запросом клиентского сертификата.</li>
<li><code>-CA 'ca.crt'</code> - файл с сертификатом центра сертификации.</li>
<li><code>-CAkey 'ca.key'</code> - файл с ключом центра сертификации.</li>
<li><code>-days '3650'</code> - количество дней, по прошествии которого клиентский сертификат станет недействительным.</li>
<li><code>-out 'client.crt'</code> - название создаваемого файла с клиентским сертификатом.</li>
</ul>
<h3 id="экспорт-сертификата">
  <a class="link-body-emphasis" href="#%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Экспорт сертификата</a>
</h3><p>Для того, чтобы импортировать сертификат на клиентские устройства, его необходимо экспортировать в формат <code>P12</code>. <code>P12</code> является контейнером, в котором содержится приватный ключ сертификата и сам сертификат.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b5d57be654854adb63280e04f9c62089"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl pkcs12 -export <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -inkey <span class="s1">&#39;client.key.private.pem&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -in <span class="s1">&#39;client.crt&#39;</span> -out <span class="s1">&#39;client.p12&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b5d57be654854adb63280e04f9c62089"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-inkey 'client.key.private.pem'</code> - файл с приватным клиентским ключом.</li>
<li><code>-in 'client.crt'</code> - файл с клиентским сертификатом.</li>
<li><code>-out 'client.p12'</code> - название создаваемого файла-контейнера с приватным ключом и сертификатом.</li>
</ul>
<h3 id="верификация-сертификата">
  <a class="link-body-emphasis" href="#%d0%b2%d0%b5%d1%80%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%86%d0%b8%d1%8f-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Верификация сертификата</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-383aae18a358a02ea3a371cd0e2922cb"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl verify -CAfile <span class="s1">&#39;ca.crt&#39;</span> <span class="s1">&#39;client.crt&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-383aae18a358a02ea3a371cd0e2922cb"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ul>
<li><code>-CAfile 'ca.crt'</code> - файл с сертификатом центра сертификации.</li>
<li><code>'client.crt'</code> - файл с клиентским сертификатом.</li>
</ul>
<h3 id="просмотр-сертификата">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Просмотр сертификата</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-cfbc121da0106e5a1e3b630c507b63ae"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl x509 -in <span class="s1">&#39;client.crt&#39;</span> -text</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-cfbc121da0106e5a1e3b630c507b63ae"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.crt'</code> - файл с клиентским сертификатом.</li>
</ul>
<p>При выполнении команды, терминал покажет информацию со всеми основными сведениями о сертификате (пример ниже).</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-43c8eb8b7fba5e001b0b8b708da48d4c"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-43c8eb8b7fba5e001b0b8b708da48d4c"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">openssl x509 -in &#39;client.crt&#39; -text

Certificate:
    Data:
        Version: 1 (0x0)
        Serial Number:
            49:14:b8:78:17:a1:ca:c4:6a:41:1b:23:f3:8a:8d:36:e0:9e:69:81
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = CA
        Validity
            Not Before: Oct 18 21:31:53 2023 GMT
            Not After : Oct 15 21:31:53 2033 GMT
        Subject: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = CN-FQDN, emailAddress = mail@example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9f:22:91:cc:14:b3:75:ad:44:cc:0d:96:0d:19:
                    04:c4:20:79:fd:b7:f5:65:64:dd:65:a1:f0:b8:2d:
                    e4:02:75:62:41:03:7c:6e:2f:48:e4:11:38:dc:ed:
                    08:1f:4c:fa:5f:2f:a2:f5:5d:51:2e:8e:de:de:70:
                    33:aa:e5:3b:95
                ASN1 OID: prime256v1
                NIST CURVE: P-256
    Signature Algorithm: ecdsa-with-SHA256
         30:64:02:30:0d:ff:b1:dc:8b:a6:c6:9c:ad:65:8a:7c:01:41:
         9f:91:ca:24:4c:0b:28:5a:5c:f6:35:2a:b2:d7:58:ca:39:da:
         6c:bf:cf:8b:23:20:ce:11:45:13:61:36:e2:23:4a:e9:02:30:
         54:dc:45:ed:ef:21:58:ea:c7:b6:63:db:a2:d9:71:fe:3d:b3:
         d6:1e:15:82:7b:c8:e8:08:33:d5:2f:d5:f2:8f:3b:41:ea:53:
         1e:2d:a9:1e:9e:25:9c:fb:a7:12:f9:ec</code></pre></div>
  </div>
</div>
<h3 id="просмотр-запроса-на-подпись-сертификата">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0-%d0%bd%d0%b0-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d1%8c-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Просмотр запроса на подпись сертификата</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-7bc4765bcad5e26e0b5bb392059e2481"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">openssl req -in <span class="s1">&#39;client.csr&#39;</span> -text</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-7bc4765bcad5e26e0b5bb392059e2481"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>-in 'client.csr'</code> - файл с запросом на подпись клиентского сертификата.</li>
</ul>
<p>Команда выдаст информацию по запросу на подпись клиентского сертификата (пример ниже).</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-952b988212b55682b7631dce6d25c49d"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-952b988212b55682b7631dce6d25c49d"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">openssl req -in &#39;client.csr&#39; -text

Certificate Request:
    Data:
        Version: 1 (0x0)
        Subject: C = AU, ST = Some-State, O = Internet Widgits Pty Ltd, CN = CN-FQDN, emailAddress = mail@example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9f:22:91:cc:14:b3:75:ad:44:cc:0d:96:0d:19:
                    04:c4:20:79:fd:b7:f5:65:64:dd:65:a1:f0:b8:2d:
                    e4:02:75:62:41:03:7c:6e:2f:48:e4:11:38:dc:ed:
                    08:1f:4c:fa:5f:2f:a2:f5:5d:51:2e:8e:de:de:70:
                    33:aa:e5:3b:95
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        Attributes:
            a0:00
        Requested Extensions:
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:20:51:9c:a0:b9:b2:61:7f:fa:64:ea:34:1f:65:15:
         37:ae:f4:89:30:47:11:89:db:c4:1b:1d:9b:82:b9:64:ea:c7:
         02:21:00:f8:00:70:4e:e6:db:99:78:cf:25:22:c0:8d:c6:b1:
         f3:f0:d8:68:3b:c2:51:21:a5:b3:fa:97:f9:85:c6:9c:49</code></pre></div>
  </div>
</div>
<h2 id="автоматизация">
  <a class="link-body-emphasis" href="#%d0%b0%d0%b2%d1%82%d0%be%d0%bc%d0%b0%d1%82%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d1%8f">Автоматизация</a>
</h2><p>Команд много. Поэтому я как обычно, решил всё автоматизировать и загнать в скрипт.</p>

    

    

    <div class="shortcode shortcode-file mb-3">
      <div class="card overflow-hidden">
        <div class="card-header">
          <div class="d-flex align-items-center">
            <div class="flex-shrink-0">
              <i class="far fa-file-code fa-fw"></i>
            </div>
            <div class="flex-grow-1 mx-2">
              <code>openssl.ca.sh</code>
            </div>
            <div class="flex-shrink-0">
              <ul class="list-inline mb-0">
                <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
                  <a class="text-body" href="#"
                     data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-881e4db1cc94abb972e576a4951e02b5"
                     role="button" aria-label='Копировать'>
                    <i class="fas fa-copy fa-fw"></i>
                  </a>
                </li>
                <li class="list-inline-item" data-bs-tooltip data-bs-title='Скачать'>
                  <a class="text-body" href="openssl.ca.sh" download
                     role="button" aria-label='Скачать'>
                    <i class="fas fa-download fa-fw"></i>
                  </a>
                </li>
                <li class="list-inline-item" data-bs-tooltip data-bs-title='Открыть'>
                  <a class="text-body" href="openssl.ca.sh" target="_blank"
                     role="button" aria-label='Открыть'>
                    <i class="fas fa-arrow-up-right-from-square fa-fw"></i>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
          
          
              
          
        <div class="card-body" id="clipboard-881e4db1cc94abb972e576a4951e02b5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/bash -e
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># OpenSSL certificate generator.</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @package    Bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @author     Kitsune Solar &lt;mail@kitsune.solar&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @copyright  2023 iHub TO</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @license    MIT</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @version    0.1.0</span>
</span></span><span class="line"><span class="cl"><span class="c1"># @link       https://lib.onl</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -------------------------------------------------------------------------------------------------------------------- #</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get &#39;date&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="nv">date</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">command</span> -v date <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get &#39;openssl&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="nv">ossl</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">command</span> -v openssl <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get &#39;shuf&#39; command.</span>
</span></span><span class="line"><span class="cl"><span class="nv">shuf</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span> <span class="nb">command</span> -v shuf <span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># CA key &amp; certificate names.</span>
</span></span><span class="line"><span class="cl"><span class="nv">ca_key</span><span class="o">=</span><span class="s1">&#39;ca.root.key&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nv">ca_crt</span><span class="o">=</span><span class="s1">&#39;ca.root.crt&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Specifies the number of days to make a certificate valid for.</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Default is 30 days.</span>
</span></span><span class="line"><span class="cl"><span class="nv">days</span><span class="o">=</span><span class="s1">&#39;3650&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Timestamp.</span>
</span></span><span class="line"><span class="cl"><span class="nv">ts</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$((</span> <span class="k">$(</span> <span class="si">${</span><span class="nv">date</span><span class="si">}</span> -u <span class="s1">&#39;+%s%N&#39;</span> <span class="k">)</span> <span class="o">/</span> <span class="m">1000000</span> <span class="k">))</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Suffix.</span>
</span></span><span class="line"><span class="cl"><span class="nv">sfx</span><span class="o">=</span><span class="k">$(</span> <span class="si">${</span><span class="nv">shuf</span><span class="si">}</span> -i <span class="s1">&#39;1000-9999&#39;</span> -n <span class="m">1</span> --random-source<span class="o">=</span><span class="s1">&#39;/dev/random&#39;</span> <span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ca<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">ec</span><span class="o">=</span><span class="s1">&#39;secp384r1&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;--- [CREATE] Certificate Authority&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> req -x509 -newkey ec:&lt;<span class="o">(</span> openssl ecparam -name <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ec</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">)</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -nodes -days <span class="s2">&#34;</span><span class="si">${</span><span class="nv">days</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -keyform <span class="s1">&#39;PEM&#39;</span> -outform <span class="s1">&#39;PEM&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    -keyout <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_key</span><span class="si">}</span><span class="s2">&#34;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> x509 -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> -text
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cert<span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">ec</span><span class="o">=</span><span class="s1">&#39;prime256v1&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">key_pvt</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.key.private.pem&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">key_pub</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.key.public.pem&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">csr</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.csr&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">crt</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.crt&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">p12</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.p12&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">srl</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">.</span><span class="si">${</span><span class="nv">sfx</span><span class="si">}</span><span class="s2">.srl&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;--- [CREATE] Client Certificate [</span><span class="si">${</span><span class="nv">ts</span><span class="si">}</span><span class="s2">]&#34;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> ecparam -name <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ec</span><span class="si">}</span><span class="s2">&#34;</span> -genkey -noout -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> ec -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> -pubout -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pub</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> req -new -key <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">csr</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> x509 -req -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">csr</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -CA <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> -CAkey <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_key</span><span class="si">}</span><span class="s2">&#34;</span> -days <span class="s2">&#34;</span><span class="si">${</span><span class="nv">days</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -CAcreateserial -CAserial <span class="s2">&#34;</span><span class="si">${</span><span class="nv">srl</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -outform <span class="s1">&#39;PEM&#39;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> pkcs12 -export <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -inkey <span class="s2">&#34;</span><span class="si">${</span><span class="nv">key_pvt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>        -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> -out <span class="s2">&#34;</span><span class="si">${</span><span class="nv">p12</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> verify -CAfile <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ca_crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    <span class="o">&amp;&amp;</span> <span class="si">${</span><span class="nv">ossl</span><span class="si">}</span> x509 -in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">crt</span><span class="si">}</span><span class="s2">&#34;</span> -text
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span></code></pre></div></div>
      </div>
    </div>
<p>Скрипт содержит две функции, вызывать которых можно по отдельности. Функция <code>ca()</code> позволяет сгенерировать ключ и сертификат центра сертификации, а функция <code>cert()</code>, соответственно, генерирует клиентские сертификаты.</p>
<h3 id="использование">
  <a class="link-body-emphasis" href="#%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5">Использование</a>
</h3><ol>
<li>Создать ключ и сертификат центра сертификации:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-345684192f4d0bf7b0dc294381292eee"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-345684192f4d0bf7b0dc294381292eee"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">bash openssl.ca.sh ca</code></pre></div>
  </div>
</div>
<ol start="2">
<li>Создать клиентские ключи и сертификаты:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-691c2e15f5f89e505b769fcfa283fe89"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-691c2e15f5f89e505b769fcfa283fe89"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">bash openssl.ca.sh cert</code></pre></div>
  </div>
</div>
<p>Немного расскажу про алгоритм генерации сертификатов.</p>
<ol>
<li>У сертификата есть поле <code>Serial Number</code>, которое содержит серийный номер сертификата. Серийный номер сертификата это уникальный номер, выданный центром сертификации. В моём скрипте при генерации клиентского сертификата указаны опции <code>-CAcreateserial</code> и <code>-CAserial &quot;${srl}&quot;</code>, которые позволяют OpenSSL создавать рядом с клиентскими сертификатами файлы формата <code>.slr</code>, содержащие в себе серийные номера сгенерированных сертификатов. Таким образом можно создавать небольшую локальную базу данных выданных сертификатов.</li>
<li>Файл каждого клиентского сертификата генерируется с названием вида <code>[TS].[SFX].[EXE]</code>, где <code>[TS]</code> - это временная метка в микросекундах, <code>[SFX]</code> - числовой суффикс, а <code>[EXE]</code> - расширение файлов.</li>
</ol>
<p>На этом всё. Не исключаю факта присутствия ошибок или неточностей. Если что, жду предложения в электронную почту. <span class="shortcode shortcode-emoji">😄</span></p>]]></turbo:content><pubDate>Tue, 17 Oct 2023 23:42:31 +0000</pubDate><category>Терминал</category><category>Скрипты</category><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Установка сертификата НУЦ Минцифры</title><link>https://lib.onl/ru/posts/2023/10/75075788-9308-56b7-b531-2008cb35f7d0/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2023/10/75075788-9308-56b7-b531-2008cb35f7d0/</guid><description>Рассказываю о нескольких способах установки сертификатов от НУЦ Минцифры. Установка производится в ОС MS Windows и Linux.</description><media:content medium="image" url="https://images.unsplash.com/photo-1570610159825-ec5d3823660c" width="1600" height="900"/><content:encoded><![CDATA[<p>Рассказываю о нескольких способах установки сертификатов от НУЦ Минцифры. Установка производится в ОС MS Windows и Linux.</p>
<h2 id="ms-windows">
  <a class="link-body-emphasis" href="#ms-windows">MS Windows</a>
</h2><h3 id="установка-корневого-сертификата">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%80%d0%bd%d0%b5%d0%b2%d0%be%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Установка корневого сертификата</a>
</h3><ul>
<li><a title="" href="https://gu-st.ru/content/Other/doc/russian_trusted_root_ca.cer" target="_blank" rel="noopener noreferrer nofollow">Скачать</a> корневой сертификат.</li>
<li>Открыть скаченный файл <code>russian_trusted_root_ca.cer</code> и нажать кнопку <span class="shortcode shortcode-key"><kbd>Установить сертификат...</kbd></span>.</li>
<li>В <strong>Мастере импорта сертификатов</strong> выбрать <em>Текущий пользователь</em>.
<ul>
<li>Выбрать <em>Поместить все сертификаты в следующее хранилище</em>.</li>
<li>Нажать <span class="shortcode shortcode-key"><kbd>Обзор</kbd></span> и выбрать <em>Доверенные корневые центры сертификации</em>.</li>
<li>В окне <strong>Завершение мастера импорта сертификатов</strong> нажать <span class="shortcode shortcode-key"><kbd>Готово</kbd></span>.</li>
</ul>
</li>
</ul>
<h3 id="установка-выпускающего-сертификата">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%b2%d1%8b%d0%bf%d1%83%d1%81%d0%ba%d0%b0%d1%8e%d1%89%d0%b5%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Установка выпускающего сертификата</a>
</h3><ul>
<li><a title="" href="https://gu-st.ru/content/Other/doc/russian_trusted_sub_ca.cer" target="_blank" rel="noopener noreferrer nofollow">Скачать</a> выпускающий сертификат.</li>
<li>Открыть скаченный файл <code>russian_trusted_sub_ca.cer</code> и нажать кнопку <span class="shortcode shortcode-key"><kbd>Установить сертификат...</kbd></span>.</li>
<li>В <strong>Мастере импорта сертификатов</strong> выбрать <em>Текущий пользователь</em>.
<ul>
<li>Выбрать <em>Автоматически выбрать хранилище на основе типа сертификата</em>.</li>
<li>В окне <strong>Завершение мастера импорта сертификатов</strong> нажать <span class="shortcode shortcode-key"><kbd>Готово</kbd></span>.</li>
</ul>
</li>
</ul>
<h3 id="powershell">
  <a class="link-body-emphasis" href="#powershell">PowerShell</a>
</h3><p>При помощи PowerShell можно установить сертификат одной строчкой, состоящей из нескольких команд:</p>
<ul>
<li><code>Invoke-WebRequest</code> - скачивает файл с внешнего веб-ресурса.</li>
<li><code>Import-Certificate</code> - импортирует сертификат в указанное хранилище.</li>
<li><code>${DIR}</code> - переменная, определяющая директорию <code>Downloads</code> (<code>Загрузки</code>) для текущего пользователя.</li>
</ul>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-powershell">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-89edc8dd96b9a0d56319c93e128f70f5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">${</span><span class="n">CERT_ROOT</span><span class="p">}</span> <span class="p">=</span> <span class="s1">&#39;russian_trusted_root_ca.cer&#39;</span><span class="p">;</span> <span class="p">${</span><span class="n">CERT_SUB</span><span class="p">}</span> <span class="p">=</span> <span class="s1">&#39;russian_trusted_sub_ca.cer&#39;</span><span class="p">;</span> <span class="p">${</span><span class="n">DIR</span><span class="p">}</span> <span class="p">=</span> <span class="p">(</span><span class="nb">New-Object</span> <span class="n">-ComObject</span> <span class="n">Shell</span><span class="p">.</span><span class="n">Application</span><span class="p">).</span><span class="py">NameSpace</span><span class="p">(</span><span class="s1">&#39;shell:Downloads&#39;</span><span class="p">).</span><span class="py">Self</span><span class="p">.</span><span class="n">Path</span><span class="p">;</span> <span class="nb">Invoke-WebRequest</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="nv">${CERT_ROOT}</span><span class="s2">&#34;</span> <span class="n">-OutFile</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_ROOT}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="nb">Import-Certificate</span> <span class="n">-FilePath</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_ROOT}</span><span class="s2">&#34;</span> <span class="n">-CertStoreLocation</span> <span class="s1">&#39;Cert:\CurrentUser\Root&#39;</span><span class="p">;</span> <span class="nb">Invoke-WebRequest</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="nv">${CERT_SUB}</span><span class="s2">&#34;</span> <span class="n">-OutFile</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_SUB}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="nb">Import-Certificate</span> <span class="n">-FilePath</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_SUB}</span><span class="s2">&#34;</span> <span class="n">-CertStoreLocation</span> <span class="s1">&#39;Cert:\CurrentUser\CA&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-89edc8dd96b9a0d56319c93e128f70f5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="linux">
  <a class="link-body-emphasis" href="#linux">Linux</a>
</h2><p>Для Linux можно воспользоваться пакетом сертификатов в формате <code>.PEM</code> от <strong>MacOS</strong>. Положительным моментом подобного пакета является то, что PEM содержит в себе сразу два сертификата: корневой и выпускающий.</p>
<h3 id="установка-корневого-и-выпускающего-сертификатов">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%80%d0%bd%d0%b5%d0%b2%d0%be%d0%b3%d0%be-%d0%b8-%d0%b2%d1%8b%d0%bf%d1%83%d1%81%d0%ba%d0%b0%d1%8e%d1%89%d0%b5%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%be%d0%b2">Установка корневого и выпускающего сертификатов</a>
</h3><ul>
<li><a title="" href="https://gu-st.ru/content/Other/doc/russiantrustedca.pem" target="_blank" rel="noopener noreferrer nofollow">Скачать</a> файл с корневым и выпускающим сертификатами.</li>
<li>Добавить скаченный файл <code>russiantrustedca.pem</code> в хранилище доверенных сертификатов в зависимости от дистрибутива Linux.
<ul>
<li>DEB-based: <code>/usr/local/share/ca-certificates/</code>.</li>
<li>RHEL-based: <code>/etc/pki/ca-trust/source/anchors/</code>.</li>
<li>Arch Linux: <code>/etc/ca-certificates/trust-source/anchors/</code>.</li>
</ul>
</li>
<li>Обновить хранилище сертификатов следующими командами.
<ul>
<li>DEB-based: <code>update-ca-certificates --fresh</code>.</li>
<li>RHEL-based: <code>update-ca-trust force-enable</code> и <code>update-ca-trust extract</code>.</li>
</ul>
</li>
</ul>
<h3 id="bash">
  <a class="link-body-emphasis" href="#bash">Bash</a>
</h3><p>Установить сертификат можно одной командой. Команды вводится от пользователя <code>root</code>. Как выше приводилось, для DEB-based и RHEL-based дистрибутивов, пути хранилища сертификатов различаются. Поэтому, я привожу две команды под каждые версии дистрибутивов.</p>
<h4 id="deb-based-дистрибутивы">
  <a class="link-body-emphasis" href="#deb-based-%d0%b4%d0%b8%d1%81%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b8%d0%b2%d1%8b">DEB-based дистрибутивы</a>
</h4>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-01cbc6ab4a689709b77dfd4349fffb24"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">CERT</span><span class="o">=</span><span class="s1">&#39;russiantrustedca.pem&#39;</span><span class="p">;</span> curl -o <span class="s2">&#34;/usr/local/share/ca-certificates/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> update-ca-certificates --fresh<span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-01cbc6ab4a689709b77dfd4349fffb24"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h4 id="rhel-based-дистрибутивы">
  <a class="link-body-emphasis" href="#rhel-based-%d0%b4%d0%b8%d1%81%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b8%d0%b2%d1%8b">RHEL-based дистрибутивы</a>
</h4>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-bab153d3f4bdeb6195ff5af589018cad"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">CERT</span><span class="o">=</span><span class="s1">&#39;russiantrustedca.pem&#39;</span><span class="p">;</span> curl -o <span class="s2">&#34;/etc/pki/ca-trust/source/anchors/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> update-ca-trust force-enable <span class="o">&amp;&amp;</span> update-ca-trust extract<span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-bab153d3f4bdeb6195ff5af589018cad"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>Установка сертификата НУЦ Минцифры</turbo:topic><turbo:content><![CDATA[<p>Рассказываю о нескольких способах установки сертификатов от НУЦ Минцифры. Установка производится в ОС MS Windows и Linux.</p>
<h2 id="ms-windows">
  <a class="link-body-emphasis" href="#ms-windows">MS Windows</a>
</h2><h3 id="установка-корневого-сертификата">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%80%d0%bd%d0%b5%d0%b2%d0%be%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Установка корневого сертификата</a>
</h3><ul>
<li><a title="" href="https://gu-st.ru/content/Other/doc/russian_trusted_root_ca.cer" target="_blank" rel="noopener noreferrer nofollow">Скачать</a> корневой сертификат.</li>
<li>Открыть скаченный файл <code>russian_trusted_root_ca.cer</code> и нажать кнопку <span class="shortcode shortcode-key"><kbd>Установить сертификат...</kbd></span>.</li>
<li>В <strong>Мастере импорта сертификатов</strong> выбрать <em>Текущий пользователь</em>.
<ul>
<li>Выбрать <em>Поместить все сертификаты в следующее хранилище</em>.</li>
<li>Нажать <span class="shortcode shortcode-key"><kbd>Обзор</kbd></span> и выбрать <em>Доверенные корневые центры сертификации</em>.</li>
<li>В окне <strong>Завершение мастера импорта сертификатов</strong> нажать <span class="shortcode shortcode-key"><kbd>Готово</kbd></span>.</li>
</ul>
</li>
</ul>
<h3 id="установка-выпускающего-сертификата">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%b2%d1%8b%d0%bf%d1%83%d1%81%d0%ba%d0%b0%d1%8e%d1%89%d0%b5%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%b0">Установка выпускающего сертификата</a>
</h3><ul>
<li><a title="" href="https://gu-st.ru/content/Other/doc/russian_trusted_sub_ca.cer" target="_blank" rel="noopener noreferrer nofollow">Скачать</a> выпускающий сертификат.</li>
<li>Открыть скаченный файл <code>russian_trusted_sub_ca.cer</code> и нажать кнопку <span class="shortcode shortcode-key"><kbd>Установить сертификат...</kbd></span>.</li>
<li>В <strong>Мастере импорта сертификатов</strong> выбрать <em>Текущий пользователь</em>.
<ul>
<li>Выбрать <em>Автоматически выбрать хранилище на основе типа сертификата</em>.</li>
<li>В окне <strong>Завершение мастера импорта сертификатов</strong> нажать <span class="shortcode shortcode-key"><kbd>Готово</kbd></span>.</li>
</ul>
</li>
</ul>
<h3 id="powershell">
  <a class="link-body-emphasis" href="#powershell">PowerShell</a>
</h3><p>При помощи PowerShell можно установить сертификат одной строчкой, состоящей из нескольких команд:</p>
<ul>
<li><code>Invoke-WebRequest</code> - скачивает файл с внешнего веб-ресурса.</li>
<li><code>Import-Certificate</code> - импортирует сертификат в указанное хранилище.</li>
<li><code>${DIR}</code> - переменная, определяющая директорию <code>Downloads</code> (<code>Загрузки</code>) для текущего пользователя.</li>
</ul>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-powershell">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-89edc8dd96b9a0d56319c93e128f70f5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="p">${</span><span class="n">CERT_ROOT</span><span class="p">}</span> <span class="p">=</span> <span class="s1">&#39;russian_trusted_root_ca.cer&#39;</span><span class="p">;</span> <span class="p">${</span><span class="n">CERT_SUB</span><span class="p">}</span> <span class="p">=</span> <span class="s1">&#39;russian_trusted_sub_ca.cer&#39;</span><span class="p">;</span> <span class="p">${</span><span class="n">DIR</span><span class="p">}</span> <span class="p">=</span> <span class="p">(</span><span class="nb">New-Object</span> <span class="n">-ComObject</span> <span class="n">Shell</span><span class="p">.</span><span class="n">Application</span><span class="p">).</span><span class="py">NameSpace</span><span class="p">(</span><span class="s1">&#39;shell:Downloads&#39;</span><span class="p">).</span><span class="py">Self</span><span class="p">.</span><span class="n">Path</span><span class="p">;</span> <span class="nb">Invoke-WebRequest</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="nv">${CERT_ROOT}</span><span class="s2">&#34;</span> <span class="n">-OutFile</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_ROOT}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="nb">Import-Certificate</span> <span class="n">-FilePath</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_ROOT}</span><span class="s2">&#34;</span> <span class="n">-CertStoreLocation</span> <span class="s1">&#39;Cert:\CurrentUser\Root&#39;</span><span class="p">;</span> <span class="nb">Invoke-WebRequest</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="nv">${CERT_SUB}</span><span class="s2">&#34;</span> <span class="n">-OutFile</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_SUB}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="nb">Import-Certificate</span> <span class="n">-FilePath</span> <span class="s2">&#34;</span><span class="nv">${DIR}</span><span class="s2">\</span><span class="nv">${CERT_SUB}</span><span class="s2">&#34;</span> <span class="n">-CertStoreLocation</span> <span class="s1">&#39;Cert:\CurrentUser\CA&#39;</span><span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-89edc8dd96b9a0d56319c93e128f70f5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="linux">
  <a class="link-body-emphasis" href="#linux">Linux</a>
</h2><p>Для Linux можно воспользоваться пакетом сертификатов в формате <code>.PEM</code> от <strong>MacOS</strong>. Положительным моментом подобного пакета является то, что PEM содержит в себе сразу два сертификата: корневой и выпускающий.</p>
<h3 id="установка-корневого-и-выпускающего-сертификатов">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%ba%d0%be%d1%80%d0%bd%d0%b5%d0%b2%d0%be%d0%b3%d0%be-%d0%b8-%d0%b2%d1%8b%d0%bf%d1%83%d1%81%d0%ba%d0%b0%d1%8e%d1%89%d0%b5%d0%b3%d0%be-%d1%81%d0%b5%d1%80%d1%82%d0%b8%d1%84%d0%b8%d0%ba%d0%b0%d1%82%d0%be%d0%b2">Установка корневого и выпускающего сертификатов</a>
</h3><ul>
<li><a title="" href="https://gu-st.ru/content/Other/doc/russiantrustedca.pem" target="_blank" rel="noopener noreferrer nofollow">Скачать</a> файл с корневым и выпускающим сертификатами.</li>
<li>Добавить скаченный файл <code>russiantrustedca.pem</code> в хранилище доверенных сертификатов в зависимости от дистрибутива Linux.
<ul>
<li>DEB-based: <code>/usr/local/share/ca-certificates/</code>.</li>
<li>RHEL-based: <code>/etc/pki/ca-trust/source/anchors/</code>.</li>
<li>Arch Linux: <code>/etc/ca-certificates/trust-source/anchors/</code>.</li>
</ul>
</li>
<li>Обновить хранилище сертификатов следующими командами.
<ul>
<li>DEB-based: <code>update-ca-certificates --fresh</code>.</li>
<li>RHEL-based: <code>update-ca-trust force-enable</code> и <code>update-ca-trust extract</code>.</li>
</ul>
</li>
</ul>
<h3 id="bash">
  <a class="link-body-emphasis" href="#bash">Bash</a>
</h3><p>Установить сертификат можно одной командой. Команды вводится от пользователя <code>root</code>. Как выше приводилось, для DEB-based и RHEL-based дистрибутивов, пути хранилища сертификатов различаются. Поэтому, я привожу две команды под каждые версии дистрибутивов.</p>
<h4 id="deb-based-дистрибутивы">
  <a class="link-body-emphasis" href="#deb-based-%d0%b4%d0%b8%d1%81%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b8%d0%b2%d1%8b">DEB-based дистрибутивы</a>
</h4>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-01cbc6ab4a689709b77dfd4349fffb24"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">CERT</span><span class="o">=</span><span class="s1">&#39;russiantrustedca.pem&#39;</span><span class="p">;</span> curl -o <span class="s2">&#34;/usr/local/share/ca-certificates/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> update-ca-certificates --fresh<span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-01cbc6ab4a689709b77dfd4349fffb24"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h4 id="rhel-based-дистрибутивы">
  <a class="link-body-emphasis" href="#rhel-based-%d0%b4%d0%b8%d1%81%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b8%d0%b2%d1%8b">RHEL-based дистрибутивы</a>
</h4>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-bab153d3f4bdeb6195ff5af589018cad"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">CERT</span><span class="o">=</span><span class="s1">&#39;russiantrustedca.pem&#39;</span><span class="p">;</span> curl -o <span class="s2">&#34;/etc/pki/ca-trust/source/anchors/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;https://gu-st.ru/content/Other/doc/</span><span class="si">${</span><span class="nv">CERT</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> update-ca-trust force-enable <span class="o">&amp;&amp;</span> update-ca-trust extract<span class="p">;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-bab153d3f4bdeb6195ff5af589018cad"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Fri, 06 Oct 2023 11:42:15 +0000</pubDate><category>Linux</category><category>MS Windows</category><category>Безопасность</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Установка ядра XanMod в Debian</title><link>https://lib.onl/ru/posts/2022/01/06ef2fab-2ae2-5356-9154-7ca1e486d27d/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2022/01/06ef2fab-2ae2-5356-9154-7ca1e486d27d/</guid><description>Приветствую! В этой небольшой заметке приведу команду, при помощи которой можно добавить репозиторий ядра XanMod в Debian.</description><media:content medium="image" url="https://images.unsplash.com/photo-1615485021362-5db597fbab1d" width="1600" height="900"/><content:encoded><![CDATA[<p>Приветствую! В этой небольшой заметке приведу команду, при помощи которой можно добавить репозиторий ядра XanMod в Debian.</p>
<h2 id="что-такое-ядро-xanmod">
  <a class="link-body-emphasis" href="#%d1%87%d1%82%d0%be-%d1%82%d0%b0%d0%ba%d0%be%d0%b5-%d1%8f%d0%b4%d1%80%d0%be-xanmod">Что такое ядро XanMod?</a>
</h2><p>Ядро <strong>XanMod</strong> имеет ряд патчей и оптимизаций. Список изменений по сравнению с ванильным ядром, я взял с <a title="" href="https://xanmod.org" target="_blank" rel="noopener noreferrer nofollow">официального сайта</a>:</p>
<ul>
<li>Caching, Virtual Memory Manager and CPUFreq Governor improvements.</li>
<li>Full multi-core block layer runqueue requests for high I/O throughput.</li>
<li>BBRv2 TCP congestion control + FQ-PIE packet scheduling and AQM algorithm.</li>
<li>ORC Unwinder for kernel stack traces (debuginfo) implementation.</li>
<li>High responsiveness multitasking Task Type scheduler (SCHED_NORMAL) build available [5.15-tt].</li>
<li>Real-time Linux kernel (PREEMPT_RT) build available [5.15-rt] [5.10-rt].</li>
<li>Third-party patchset available: patches
<ul>
<li>le9&rsquo;s file mappings under memory pressure protection.</li>
<li>Linux Random Number Generator (LRNG) framework.</li>
<li>TCP performance optimizations backport from linux/net-next [5.16] [5.15].</li>
<li>AMD&rsquo;s P-state driver for Zen2 and Zen3 processors [5.16] [5.15].</li>
<li>Futex waitv and legacy WAIT_MULTIPLE implementation for Wine / Proton Fsync support.</li>
<li>WineSync driver for fast kernel-backed Wine [5.16] [5.15] [as module: winesync].</li>
<li>Google&rsquo;s Multigenerational LRU framework [5.16] [5.15].</li>
<li>Google&rsquo;s BBRv2 TCP congestion control.</li>
<li>Paragon&rsquo;s Software NTFS3 driver [as module: ntfs3].</li>
<li>PCIe ACS Override for bypassing IOMMU groups support.</li>
<li>Graysky&rsquo;s additional CPU optimizations for GCC and Clang.</li>
<li>Clear Linux patchset [partial].</li>
<li>Android Ashmem and Binder IPC driver as module for Anbox.</li>
<li>Updated ZSTD library for bug fixes and r/w performance compression improvements on Btrfs, F2FS, SquashFS, pstore, initramfs and vmlinuz.</li>
</ul>
</li>
<li>Generic packages for compatibility with most Debian &amp; Ubuntu based distributions. Builts on the latest LLVM 12.0.1, GCC 11.2 and Binutils 2.37.</li>
<li>GPLv2 license. Can be built for any distribution or purpose.</li>
</ul>
<p>Стоит заметить, что ядро XanMod не единственное, которое интегрирует в себя оптимизации. Есть ещё ядро <a title="" href="https://liquorix.net" target="_blank" rel="noopener noreferrer nofollow"><strong>Liquorix</strong></a>, которое занимается практически тем же самым. Но, посмотрев <a title="" href="https://www.phoronix.com/scan.php?page=article&amp;item=ryzen5-xanmod-liquorix" target="_blank" rel="noopener noreferrer nofollow">обзор и тесты</a> на Phoronix&rsquo;е, я сделал выбор в пользу XanMod.</p>
<h2 id="установка-xanmod">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-xanmod">Установка XanMod</a>
</h2><p>Однострочная команда по добавлению ядра XanMod в репозиторий Debian&rsquo;а приведена ниже. Она дробится на следующие под-команды:</p>
<ol>
<li>Добавление файла <code>xanmod-kernel.list</code> в директорию <code>/etc/apt/sources.list.d</code>.</li>
<li>Скачивание файла подписи <code>archive.key</code> и размещение его в директорию <code>/etc/apt/trusted.gpg.d</code> с названием <code>xanmod-kernel.gpg</code>.</li>
<li>Обновление информации из репозитория при помощи команды <code>apt update</code>.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-6561149a699239184ae6d9320a848e86"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;deb [signed-by=/etc/apt/trusted.gpg.d/xanmod-kernel.gpg] http://deb.xanmod.org releases main&#39;</span> <span class="p">|</span> tee /etc/apt/sources.list.d/xanmod-kernel.list <span class="o">&amp;&amp;</span> curl -fsSL <span class="s1">&#39;https://dl.xanmod.org/archive.key&#39;</span> <span class="p">|</span> gpg --dearmor <span class="p">|</span> tee /etc/apt/trusted.gpg.d/xanmod-kernel.gpg &gt; /dev/null <span class="o">&amp;&amp;</span> apt update</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-6561149a699239184ae6d9320a848e86"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>После выполнения вышеприведённой команды, установка ядра XanMod происходит таким образом:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1a3dd3a756fda492e14f52a9bf297e3e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-<span class="o">[</span>ABI<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1a3dd3a756fda492e14f52a9bf297e3e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>[ABI]</code> - версия архитектуры. Список версий архитектур можно посмотреть ниже.</li>
</ul>
<h3 id="примеры">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80%d1%8b">Примеры</a>
</h3><p>Установить ядро XanMod с версией архитектуры <code>x64v1</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-079d884831d7df9633c10ca01bb23f78"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v1</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-079d884831d7df9633c10ca01bb23f78"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить ядро XanMod с версией архитектуры <code>x64v2</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0cd0982b8058d1ce4b18a524b88b146e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v2</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0cd0982b8058d1ce4b18a524b88b146e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить ядро XanMod с версией архитектуры <code>x64v3</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-5233cd036d8ffe4dc1574aa52d859511"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v3</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5233cd036d8ffe4dc1574aa52d859511"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить ядро XanMod с версией архитектуры <code>x64v4</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a2543e9cf110de8dc864c32b7da87890"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v4</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a2543e9cf110de8dc864c32b7da87890"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Для установки Mainline-версии ядра команда будет такой:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-35873f4e54461b006fb9b69a58ef9410"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-edge-x64v3</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-35873f4e54461b006fb9b69a58ef9410"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="версии-архитектур-xanmod">
  <a class="link-body-emphasis" href="#%d0%b2%d0%b5%d1%80%d1%81%d0%b8%d0%b8-%d0%b0%d1%80%d1%85%d0%b8%d1%82%d0%b5%d0%ba%d1%82%d1%83%d1%80-xanmod">Версии архитектур XanMod</a>
</h2><p>Версия архитектуры зависит от ядра процессора и поддерживаемых им инструкций. Версию архитектуры можно узнать из списка ниже.</p>
<h3 id="x86-64-legacy">
  <a class="link-body-emphasis" href="#x86-64-legacy">x86-64 (LEGACY)</a>
</h3><p>Суффикс для установки ядра: <code>x64v1</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD K8-family</li>
<li>AMD K10-family</li>
<li>AMD Family 10h (Barcelona)</li>
<li>Intel Pentium 4 / Xeon (Nocona)</li>
<li>Intel Core 2 (all variants)</li>
<li>All x86-64 CPUs</li>
</ul>
<h3 id="x86-64-v2">
  <a class="link-body-emphasis" href="#x86-64-v2">x86-64-v2</a>
</h3><p>Суффикс для установки ядра: <code>x64v2</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD Family 14h (Bobcat)</li>
<li>AMD Family 16h (Jaguar)</li>
<li>AMD Family 15h (Bulldozer)</li>
<li>AMD Family 15h (Piledriver)</li>
<li>AMD Family 15h (Steamroller)</li>
<li>Intel 1st Gen Core (Nehalem)</li>
<li>Intel 1.5 Gen Core (Westmere)</li>
<li>Intel 2nd Gen Core (Sandybridge)</li>
<li>Intel 3rd Gen Core (Ivybridge)</li>
<li>Intel low-power Silvermont</li>
<li>Intel Goldmont (Apollo Lake)</li>
<li>Intel Goldmont (Denverton)</li>
<li>Intel Goldmont Plus (Gemini Lake)</li>
</ul>
<h3 id="x86-64-v3">
  <a class="link-body-emphasis" href="#x86-64-v3">x86-64-v3</a>
</h3><p>Суффикс для установки ядра: <code>x64v3</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD Family 15h (Excavator)</li>
<li>AMD Family 17h (Zen)</li>
<li>AMD Family 17h (Zen+)</li>
<li>AMD Family 17h (Zen2)</li>
<li>AMD Family 19h (Zen3)</li>
<li>Intel 4th Gen Core (Haswell)</li>
<li>Intel 5th Gen Core (Broadwell)</li>
<li>Intel 6th Gen Core (Skylake)</li>
<li>Intel 7th Gen Core (Kaby Lake)</li>
<li>Intel 8/9th Gen Core (Coffee Lake)</li>
<li>Intel 10th Gen Core (Comet Lake)</li>
<li>Intel 12th Gen (Alder Lake)</li>
<li>Intel 13th Gen (Raptor Lake)</li>
<li>Intel 14th Gen (Meteor Lake)</li>
</ul>
<h3 id="x86-64-v4-avx-512">
  <a class="link-body-emphasis" href="#x86-64-v4-avx-512">x86-64-v4 (AVX-512)</a>
</h3><p>Суффикс для установки ядра: <code>x64v4</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD Family 19h (Zen4)</li>
<li>Intel 6th Gen Core (Skylake X)</li>
<li>Intel 8th Gen Core i3 (Cannon Lake)</li>
<li>Intel Xeon / 10th Gen Core (Ice Lake)</li>
<li>Intel Xeon (Cascade Lake)</li>
<li>Intel Xeon (Cooper Lake)</li>
<li>Intel 3rd Gen 10nm++ (Tiger Lake)</li>
<li>Intel 4th Gen 10nm++ (Sapphire Rapids)</li>
<li>Intel 5th Gen 10nm++ (Emerald Rapids)</li>
<li>Intel 11th Gen (Rocket Lake)</li>
</ul>]]></content:encoded><turbo:source/><turbo:topic>Установка ядра XanMod в Debian</turbo:topic><turbo:content><![CDATA[<p>Приветствую! В этой небольшой заметке приведу команду, при помощи которой можно добавить репозиторий ядра XanMod в Debian.</p>
<h2 id="что-такое-ядро-xanmod">
  <a class="link-body-emphasis" href="#%d1%87%d1%82%d0%be-%d1%82%d0%b0%d0%ba%d0%be%d0%b5-%d1%8f%d0%b4%d1%80%d0%be-xanmod">Что такое ядро XanMod?</a>
</h2><p>Ядро <strong>XanMod</strong> имеет ряд патчей и оптимизаций. Список изменений по сравнению с ванильным ядром, я взял с <a title="" href="https://xanmod.org" target="_blank" rel="noopener noreferrer nofollow">официального сайта</a>:</p>
<ul>
<li>Caching, Virtual Memory Manager and CPUFreq Governor improvements.</li>
<li>Full multi-core block layer runqueue requests for high I/O throughput.</li>
<li>BBRv2 TCP congestion control + FQ-PIE packet scheduling and AQM algorithm.</li>
<li>ORC Unwinder for kernel stack traces (debuginfo) implementation.</li>
<li>High responsiveness multitasking Task Type scheduler (SCHED_NORMAL) build available [5.15-tt].</li>
<li>Real-time Linux kernel (PREEMPT_RT) build available [5.15-rt] [5.10-rt].</li>
<li>Third-party patchset available: patches
<ul>
<li>le9&rsquo;s file mappings under memory pressure protection.</li>
<li>Linux Random Number Generator (LRNG) framework.</li>
<li>TCP performance optimizations backport from linux/net-next [5.16] [5.15].</li>
<li>AMD&rsquo;s P-state driver for Zen2 and Zen3 processors [5.16] [5.15].</li>
<li>Futex waitv and legacy WAIT_MULTIPLE implementation for Wine / Proton Fsync support.</li>
<li>WineSync driver for fast kernel-backed Wine [5.16] [5.15] [as module: winesync].</li>
<li>Google&rsquo;s Multigenerational LRU framework [5.16] [5.15].</li>
<li>Google&rsquo;s BBRv2 TCP congestion control.</li>
<li>Paragon&rsquo;s Software NTFS3 driver [as module: ntfs3].</li>
<li>PCIe ACS Override for bypassing IOMMU groups support.</li>
<li>Graysky&rsquo;s additional CPU optimizations for GCC and Clang.</li>
<li>Clear Linux patchset [partial].</li>
<li>Android Ashmem and Binder IPC driver as module for Anbox.</li>
<li>Updated ZSTD library for bug fixes and r/w performance compression improvements on Btrfs, F2FS, SquashFS, pstore, initramfs and vmlinuz.</li>
</ul>
</li>
<li>Generic packages for compatibility with most Debian &amp; Ubuntu based distributions. Builts on the latest LLVM 12.0.1, GCC 11.2 and Binutils 2.37.</li>
<li>GPLv2 license. Can be built for any distribution or purpose.</li>
</ul>
<p>Стоит заметить, что ядро XanMod не единственное, которое интегрирует в себя оптимизации. Есть ещё ядро <a title="" href="https://liquorix.net" target="_blank" rel="noopener noreferrer nofollow"><strong>Liquorix</strong></a>, которое занимается практически тем же самым. Но, посмотрев <a title="" href="https://www.phoronix.com/scan.php?page=article&amp;item=ryzen5-xanmod-liquorix" target="_blank" rel="noopener noreferrer nofollow">обзор и тесты</a> на Phoronix&rsquo;е, я сделал выбор в пользу XanMod.</p>
<h2 id="установка-xanmod">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-xanmod">Установка XanMod</a>
</h2><p>Однострочная команда по добавлению ядра XanMod в репозиторий Debian&rsquo;а приведена ниже. Она дробится на следующие под-команды:</p>
<ol>
<li>Добавление файла <code>xanmod-kernel.list</code> в директорию <code>/etc/apt/sources.list.d</code>.</li>
<li>Скачивание файла подписи <code>archive.key</code> и размещение его в директорию <code>/etc/apt/trusted.gpg.d</code> с названием <code>xanmod-kernel.gpg</code>.</li>
<li>Обновление информации из репозитория при помощи команды <code>apt update</code>.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-6561149a699239184ae6d9320a848e86"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;deb [signed-by=/etc/apt/trusted.gpg.d/xanmod-kernel.gpg] http://deb.xanmod.org releases main&#39;</span> <span class="p">|</span> tee /etc/apt/sources.list.d/xanmod-kernel.list <span class="o">&amp;&amp;</span> curl -fsSL <span class="s1">&#39;https://dl.xanmod.org/archive.key&#39;</span> <span class="p">|</span> gpg --dearmor <span class="p">|</span> tee /etc/apt/trusted.gpg.d/xanmod-kernel.gpg &gt; /dev/null <span class="o">&amp;&amp;</span> apt update</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-6561149a699239184ae6d9320a848e86"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>После выполнения вышеприведённой команды, установка ядра XanMod происходит таким образом:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1a3dd3a756fda492e14f52a9bf297e3e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-<span class="o">[</span>ABI<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1a3dd3a756fda492e14f52a9bf297e3e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где:</p>
<ul>
<li><code>[ABI]</code> - версия архитектуры. Список версий архитектур можно посмотреть ниже.</li>
</ul>
<h3 id="примеры">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80%d1%8b">Примеры</a>
</h3><p>Установить ядро XanMod с версией архитектуры <code>x64v1</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-079d884831d7df9633c10ca01bb23f78"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v1</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-079d884831d7df9633c10ca01bb23f78"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить ядро XanMod с версией архитектуры <code>x64v2</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0cd0982b8058d1ce4b18a524b88b146e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v2</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0cd0982b8058d1ce4b18a524b88b146e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить ядро XanMod с версией архитектуры <code>x64v3</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-5233cd036d8ffe4dc1574aa52d859511"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v3</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5233cd036d8ffe4dc1574aa52d859511"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить ядро XanMod с версией архитектуры <code>x64v4</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a2543e9cf110de8dc864c32b7da87890"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-x64v4</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a2543e9cf110de8dc864c32b7da87890"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Для установки Mainline-версии ядра команда будет такой:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-35873f4e54461b006fb9b69a58ef9410"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install linux-xanmod-edge-x64v3</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-35873f4e54461b006fb9b69a58ef9410"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="версии-архитектур-xanmod">
  <a class="link-body-emphasis" href="#%d0%b2%d0%b5%d1%80%d1%81%d0%b8%d0%b8-%d0%b0%d1%80%d1%85%d0%b8%d1%82%d0%b5%d0%ba%d1%82%d1%83%d1%80-xanmod">Версии архитектур XanMod</a>
</h2><p>Версия архитектуры зависит от ядра процессора и поддерживаемых им инструкций. Версию архитектуры можно узнать из списка ниже.</p>
<h3 id="x86-64-legacy">
  <a class="link-body-emphasis" href="#x86-64-legacy">x86-64 (LEGACY)</a>
</h3><p>Суффикс для установки ядра: <code>x64v1</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD K8-family</li>
<li>AMD K10-family</li>
<li>AMD Family 10h (Barcelona)</li>
<li>Intel Pentium 4 / Xeon (Nocona)</li>
<li>Intel Core 2 (all variants)</li>
<li>All x86-64 CPUs</li>
</ul>
<h3 id="x86-64-v2">
  <a class="link-body-emphasis" href="#x86-64-v2">x86-64-v2</a>
</h3><p>Суффикс для установки ядра: <code>x64v2</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD Family 14h (Bobcat)</li>
<li>AMD Family 16h (Jaguar)</li>
<li>AMD Family 15h (Bulldozer)</li>
<li>AMD Family 15h (Piledriver)</li>
<li>AMD Family 15h (Steamroller)</li>
<li>Intel 1st Gen Core (Nehalem)</li>
<li>Intel 1.5 Gen Core (Westmere)</li>
<li>Intel 2nd Gen Core (Sandybridge)</li>
<li>Intel 3rd Gen Core (Ivybridge)</li>
<li>Intel low-power Silvermont</li>
<li>Intel Goldmont (Apollo Lake)</li>
<li>Intel Goldmont (Denverton)</li>
<li>Intel Goldmont Plus (Gemini Lake)</li>
</ul>
<h3 id="x86-64-v3">
  <a class="link-body-emphasis" href="#x86-64-v3">x86-64-v3</a>
</h3><p>Суффикс для установки ядра: <code>x64v3</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD Family 15h (Excavator)</li>
<li>AMD Family 17h (Zen)</li>
<li>AMD Family 17h (Zen+)</li>
<li>AMD Family 17h (Zen2)</li>
<li>AMD Family 19h (Zen3)</li>
<li>Intel 4th Gen Core (Haswell)</li>
<li>Intel 5th Gen Core (Broadwell)</li>
<li>Intel 6th Gen Core (Skylake)</li>
<li>Intel 7th Gen Core (Kaby Lake)</li>
<li>Intel 8/9th Gen Core (Coffee Lake)</li>
<li>Intel 10th Gen Core (Comet Lake)</li>
<li>Intel 12th Gen (Alder Lake)</li>
<li>Intel 13th Gen (Raptor Lake)</li>
<li>Intel 14th Gen (Meteor Lake)</li>
</ul>
<h3 id="x86-64-v4-avx-512">
  <a class="link-body-emphasis" href="#x86-64-v4-avx-512">x86-64-v4 (AVX-512)</a>
</h3><p>Суффикс для установки ядра: <code>x64v4</code>.</p>
<p><strong>Поддерживаемые архитектуры:</strong></p>
<ul>
<li>AMD Family 19h (Zen4)</li>
<li>Intel 6th Gen Core (Skylake X)</li>
<li>Intel 8th Gen Core i3 (Cannon Lake)</li>
<li>Intel Xeon / 10th Gen Core (Ice Lake)</li>
<li>Intel Xeon (Cascade Lake)</li>
<li>Intel Xeon (Cooper Lake)</li>
<li>Intel 3rd Gen 10nm++ (Tiger Lake)</li>
<li>Intel 4th Gen 10nm++ (Sapphire Rapids)</li>
<li>Intel 5th Gen 10nm++ (Emerald Rapids)</li>
<li>Intel 11th Gen (Rocket Lake)</li>
</ul>]]></turbo:content><pubDate>Thu, 13 Jan 2022 22:44:15 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Установка Vivaldi в Debian</title><link>https://lib.onl/ru/posts/2022/01/ddddd243-d182-5e26-a161-d2ea7812214a/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2022/01/ddddd243-d182-5e26-a161-d2ea7812214a/</guid><description>Привет всем! В этой небольшой заметке я приведу команду, при помощи которой можно добавить репозиторий браузера Vivaldi в Debian.</description><media:content medium="image" url="https://images.unsplash.com/photo-1564760290292-23341e4df6ec" width="1600" height="900"/><content:encoded><![CDATA[<p>Привет всем! В этой небольшой заметке я приведу команду, при помощи которой можно добавить репозиторий браузера <strong>Vivaldi</strong> в Debian.</p>
<p>Установочный пакет <strong>Vivaldi</strong> уже выполняет указанные действия, но для этого он задействует утилиту <code>apt-key</code>, которая в <strong>Debian 11</strong> имеет статус <code>deprecated</code>.</p>
<p>Однострочная команда по добавлению <strong>Vivaldi</strong> в репозиторий Debian&rsquo;а приведена ниже. Она дробится на следующие под-команды:</p>
<ol>
<li>Добавление файла <code>vivaldi-archive.list</code> в директорию <code>/etc/apt/sources.list.d</code>.</li>
<li>Скачивание файла подписи <code>linux_signing_key.pub</code> и размещение его в директорию <code>/etc/apt/trusted.gpg.d</code> с названием <code>vivaldi-browser.gpg</code>.</li>
<li>Обновление информации из репозитория при помощи команды <code>apt update</code>.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ae272dfeca5aba8f41f48a67c1f93bc1"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [signed-by=/etc/apt/trusted.gpg.d/vivaldi-browser.gpg arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2">] https://repo.vivaldi.com/archive/deb/ stable main&#34;</span> <span class="p">|</span> tee /etc/apt/sources.list.d/vivaldi-archive.list <span class="o">&amp;&amp;</span> curl -fsSL <span class="s1">&#39;https://repo.vivaldi.com/archive/linux_signing_key.pub&#39;</span> <span class="p">|</span> gpg --dearmor <span class="p">|</span> tee /etc/apt/trusted.gpg.d/vivaldi-browser.gpg &gt; /dev/null <span class="o">&amp;&amp;</span> apt update</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ae272dfeca5aba8f41f48a67c1f93bc1"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>После выполнения команды, установка <strong>Vivaldi</strong> происходит таким образом:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1cb014a11995d5058e0f9d4589784518"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install vivaldi-stable</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1cb014a11995d5058e0f9d4589784518"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>Установка Vivaldi в Debian</turbo:topic><turbo:content><![CDATA[<p>Привет всем! В этой небольшой заметке я приведу команду, при помощи которой можно добавить репозиторий браузера <strong>Vivaldi</strong> в Debian.</p>
<p>Установочный пакет <strong>Vivaldi</strong> уже выполняет указанные действия, но для этого он задействует утилиту <code>apt-key</code>, которая в <strong>Debian 11</strong> имеет статус <code>deprecated</code>.</p>
<p>Однострочная команда по добавлению <strong>Vivaldi</strong> в репозиторий Debian&rsquo;а приведена ниже. Она дробится на следующие под-команды:</p>
<ol>
<li>Добавление файла <code>vivaldi-archive.list</code> в директорию <code>/etc/apt/sources.list.d</code>.</li>
<li>Скачивание файла подписи <code>linux_signing_key.pub</code> и размещение его в директорию <code>/etc/apt/trusted.gpg.d</code> с названием <code>vivaldi-browser.gpg</code>.</li>
<li>Обновление информации из репозитория при помощи команды <code>apt update</code>.</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ae272dfeca5aba8f41f48a67c1f93bc1"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [signed-by=/etc/apt/trusted.gpg.d/vivaldi-browser.gpg arch=</span><span class="k">$(</span>dpkg --print-architecture<span class="k">)</span><span class="s2">] https://repo.vivaldi.com/archive/deb/ stable main&#34;</span> <span class="p">|</span> tee /etc/apt/sources.list.d/vivaldi-archive.list <span class="o">&amp;&amp;</span> curl -fsSL <span class="s1">&#39;https://repo.vivaldi.com/archive/linux_signing_key.pub&#39;</span> <span class="p">|</span> gpg --dearmor <span class="p">|</span> tee /etc/apt/trusted.gpg.d/vivaldi-browser.gpg &gt; /dev/null <span class="o">&amp;&amp;</span> apt update</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ae272dfeca5aba8f41f48a67c1f93bc1"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>После выполнения команды, установка <strong>Vivaldi</strong> происходит таким образом:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1cb014a11995d5058e0f9d4589784518"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install vivaldi-stable</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1cb014a11995d5058e0f9d4589784518"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Thu, 13 Jan 2022 22:44:01 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Чёрный экран с курсором при старте GDM</title><link>https://lib.onl/ru/posts/2021/09/581804b8-0613-52a8-a5c4-fdae90e7bc8a/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/581804b8-0613-52a8-a5c4-fdae90e7bc8a/</guid><description>На днях установил Debian 11 на несколько ПК. Всё было отлично, кроме как на одном из ПК почему то GDM не стал загружаться. Чёрный экран с мигающем текстовым курсором&amp;hellip;</description><media:content medium="image" url="https://images.unsplash.com/photo-1542906453-02e875f65428" width="1600" height="900"/><content:encoded><![CDATA[<p>На днях установил <strong>Debian 11</strong> на несколько ПК. Всё было отлично, кроме как на одном из ПК почему то <strong>GDM</strong> не стал загружаться. Чёрный экран с мигающем текстовым курсором&hellip;</p>
<p>На других ПК всё было нормально. Отличие проблемного ПК от остальных заключалось в том, что на проблемном ПК система была установлена на <strong>SSD</strong>. Может быть дело в этом. В интернете я нашёл похожую проблему. По сути, проблема заключается в том, что сам GDM запускается чуть раньше, чем начинается инициализация графической подсистемы. И на кой чёрт его несёт вперёд&hellip;</p>
<p>В общем, предлагают несколько решений.</p>
<h2 id="настройка-сервиса-gdm">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b8%d1%81%d0%b0-gdm">Настройка сервиса GDM</a>
</h2><p>Данный вариант решения проблемы предлагает отредактировать стартовые параметры сервиса GDM, чтобы тот запускался с небольшой задержкой и не лез вперёд остальной графической подсистемы.</p>
<p>В терминале нужно ввести от root&rsquo;а команду <code>systemctl edit gdm.service</code>, откроется редактор сервиса GDM. В нем необходимо добавить строку <code>ExecStartPre=/bin/sleep 2</code>, которая создаёт задержку перед запуском самого GDM. Примерно вот так:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c7880038e6b1c0f09179ac491e0ca442"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">### Anything between here and the comment below will become the new contents of the file</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Service]</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStartPre</span><span class="o">=</span><span class="s">/bin/sleep 2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Lines below this comment will be discarded</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c7880038e6b1c0f09179ac491e0ca442"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Таким образом GDM начинает запускаться после того, как инициализируется графическая подсистема.</p>
<p>Ещё одно исправление <a title="" href="https://gitlab.gnome.org/GNOME/gdm/-/issues/662#note_993169" target="_blank" rel="noopener noreferrer nofollow">предложили</a> в баг-трекере GNOME/GDM. Вместо торможения загрузки GDM, необходимо добавить следующие строки:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-d58c3eaaf8a692e761be18738bba6a47"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[Unit]</span>
</span></span><span class="line"><span class="cl"><span class="na">Wants</span><span class="o">=</span><span class="s">systemd-udev-trigger.service systemd-udev-settle.service</span>
</span></span><span class="line"><span class="cl"><span class="na">After</span><span class="o">=</span><span class="s">systemd-udev-trigger.service systemd-udev-settle.service</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d58c3eaaf8a692e761be18738bba6a47"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Но это не совсем корректное исправление (хотя исправление, изложенное выше, тоже трудно назвать правильным), так как после применения этих строк, появляется ошибка:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9bf6e1615263d456bd735820fde57248"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-9bf6e1615263d456bd735820fde57248"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">Dec 27 22:23:48 oleksandr-xps15 udevadm[260]: systemd-udev-settle.service is deprecated. Please fix gdm.service not to pull it in.</code></pre></div>
  </div>
</div>
<h2 id="указание-порядка-инициализации-графической-подсистемы">
  <a class="link-body-emphasis" href="#%d1%83%d0%ba%d0%b0%d0%b7%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d1%80%d1%8f%d0%b4%d0%ba%d0%b0-%d0%b8%d0%bd%d0%b8%d1%86%d0%b8%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d0%b8-%d0%b3%d1%80%d0%b0%d1%84%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%be%d0%b9-%d0%bf%d0%be%d0%b4%d1%81%d0%b8%d1%81%d1%82%d0%b5%d0%bc%d1%8b">Указание порядка инициализации графической подсистемы</a>
</h2><p>Этот вариант решения проблемы подходит для <strong>Arch Linux</strong>. Необходимо в файле <code>/etc/mkinitcpio.conf</code> добавить в массив <code>MODULES</code> свою графическую подсистему, чтобы та запускалась раньше, чем GDM. Например:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a8d1e223171b53fe7ec2028d6e8d3bf2"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">MODULES=(amdgpu)</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a8d1e223171b53fe7ec2028d6e8d3bf2"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Можно указать другие графические подсистемы, всё зависит от видеокарты, установленной в ПК:</p>
<ul>
<li><code>amdgpu</code> - для современных видеокарт AMD.</li>
<li><code>radeon</code> - для устаревших видеокарт AMD.</li>
<li><code>nouveau</code> - для Nvidia Nouveau.</li>
<li><code>i915</code> - для Intel.</li>
<li><code>mgag200</code> - для видеокарт Matrox.</li>
</ul>
<p>Если в системе используется Intel в качестве графики и в модулях прописан <code>i915</code>, то могут появится ошибки ACPI. Для исправления этих ошибок необходимо добавить <code>intel_agp</code> перед <code>i915</code>. Чтобы проверить корректность загрузки модуля, можно ввести команду <code>lsmod | grep intel_agp</code>.</p>]]></content:encoded><turbo:source/><turbo:topic>Чёрный экран с курсором при старте GDM</turbo:topic><turbo:content><![CDATA[<p>На днях установил <strong>Debian 11</strong> на несколько ПК. Всё было отлично, кроме как на одном из ПК почему то <strong>GDM</strong> не стал загружаться. Чёрный экран с мигающем текстовым курсором&hellip;</p>
<p>На других ПК всё было нормально. Отличие проблемного ПК от остальных заключалось в том, что на проблемном ПК система была установлена на <strong>SSD</strong>. Может быть дело в этом. В интернете я нашёл похожую проблему. По сути, проблема заключается в том, что сам GDM запускается чуть раньше, чем начинается инициализация графической подсистемы. И на кой чёрт его несёт вперёд&hellip;</p>
<p>В общем, предлагают несколько решений.</p>
<h2 id="настройка-сервиса-gdm">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d1%81%d0%b5%d1%80%d0%b2%d0%b8%d1%81%d0%b0-gdm">Настройка сервиса GDM</a>
</h2><p>Данный вариант решения проблемы предлагает отредактировать стартовые параметры сервиса GDM, чтобы тот запускался с небольшой задержкой и не лез вперёд остальной графической подсистемы.</p>
<p>В терминале нужно ввести от root&rsquo;а команду <code>systemctl edit gdm.service</code>, откроется редактор сервиса GDM. В нем необходимо добавить строку <code>ExecStartPre=/bin/sleep 2</code>, которая создаёт задержку перед запуском самого GDM. Примерно вот так:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c7880038e6b1c0f09179ac491e0ca442"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">### Anything between here and the comment below will become the new contents of the file</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">[Service]</span>
</span></span><span class="line"><span class="cl"><span class="na">ExecStartPre</span><span class="o">=</span><span class="s">/bin/sleep 2</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">### Lines below this comment will be discarded</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c7880038e6b1c0f09179ac491e0ca442"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Таким образом GDM начинает запускаться после того, как инициализируется графическая подсистема.</p>
<p>Ещё одно исправление <a title="" href="https://gitlab.gnome.org/GNOME/gdm/-/issues/662#note_993169" target="_blank" rel="noopener noreferrer nofollow">предложили</a> в баг-трекере GNOME/GDM. Вместо торможения загрузки GDM, необходимо добавить следующие строки:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-d58c3eaaf8a692e761be18738bba6a47"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[Unit]</span>
</span></span><span class="line"><span class="cl"><span class="na">Wants</span><span class="o">=</span><span class="s">systemd-udev-trigger.service systemd-udev-settle.service</span>
</span></span><span class="line"><span class="cl"><span class="na">After</span><span class="o">=</span><span class="s">systemd-udev-trigger.service systemd-udev-settle.service</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d58c3eaaf8a692e761be18738bba6a47"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Но это не совсем корректное исправление (хотя исправление, изложенное выше, тоже трудно назвать правильным), так как после применения этих строк, появляется ошибка:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9bf6e1615263d456bd735820fde57248"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-9bf6e1615263d456bd735820fde57248"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">Dec 27 22:23:48 oleksandr-xps15 udevadm[260]: systemd-udev-settle.service is deprecated. Please fix gdm.service not to pull it in.</code></pre></div>
  </div>
</div>
<h2 id="указание-порядка-инициализации-графической-подсистемы">
  <a class="link-body-emphasis" href="#%d1%83%d0%ba%d0%b0%d0%b7%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d1%80%d1%8f%d0%b4%d0%ba%d0%b0-%d0%b8%d0%bd%d0%b8%d1%86%d0%b8%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d0%b8-%d0%b3%d1%80%d0%b0%d1%84%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%be%d0%b9-%d0%bf%d0%be%d0%b4%d1%81%d0%b8%d1%81%d1%82%d0%b5%d0%bc%d1%8b">Указание порядка инициализации графической подсистемы</a>
</h2><p>Этот вариант решения проблемы подходит для <strong>Arch Linux</strong>. Необходимо в файле <code>/etc/mkinitcpio.conf</code> добавить в массив <code>MODULES</code> свою графическую подсистему, чтобы та запускалась раньше, чем GDM. Например:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a8d1e223171b53fe7ec2028d6e8d3bf2"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">MODULES=(amdgpu)</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a8d1e223171b53fe7ec2028d6e8d3bf2"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Можно указать другие графические подсистемы, всё зависит от видеокарты, установленной в ПК:</p>
<ul>
<li><code>amdgpu</code> - для современных видеокарт AMD.</li>
<li><code>radeon</code> - для устаревших видеокарт AMD.</li>
<li><code>nouveau</code> - для Nvidia Nouveau.</li>
<li><code>i915</code> - для Intel.</li>
<li><code>mgag200</code> - для видеокарт Matrox.</li>
</ul>
<p>Если в системе используется Intel в качестве графики и в модулях прописан <code>i915</code>, то могут появится ошибки ACPI. Для исправления этих ошибок необходимо добавить <code>intel_agp</code> перед <code>i915</code>. Чтобы проверить корректность загрузки модуля, можно ввести команду <code>lsmod | grep intel_agp</code>.</p>]]></turbo:content><pubDate>Thu, 30 Sep 2021 08:10:19 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Отключение режима Wayland в GDM</title><link>https://lib.onl/ru/posts/2021/09/0d11ecc0-2714-5c5c-9b48-804f50419590/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/0d11ecc0-2714-5c5c-9b48-804f50419590/</guid><description>Использовать Wayland мне, пока что, нет необходимости. Поэтому, я решил его отключить в GDM.</description><media:content medium="image" url="https://images.unsplash.com/photo-1590140409417-8fc288725f77" width="1600" height="900"/><content:encoded><![CDATA[<p>Использовать <strong>Wayland</strong> мне, пока что, нет необходимости. Поэтому, я решил его отключить в <strong>GDM</strong>.</p>
<p>Для того, чтобы отключить выбор режима Wayland в GDM, необходимо в файле <code>/etc/gdm3/daemon.conf</code> раскомментировать строку:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a81fcfc0e2f9326db2b18bed31f1aa6d"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1"># WaylandEnable=false</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a81fcfc0e2f9326db2b18bed31f1aa6d"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Должно получится так:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a722cd16ae72527d3a527c3364fa7c04"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">WaylandEnable</span><span class="o">=</span><span class="s">false</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a722cd16ae72527d3a527c3364fa7c04"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Таким образом даём понять GDM, что мы не желаем использовать Wayland.</p>]]></content:encoded><turbo:source/><turbo:topic>Отключение режима Wayland в GDM</turbo:topic><turbo:content><![CDATA[<p>Использовать <strong>Wayland</strong> мне, пока что, нет необходимости. Поэтому, я решил его отключить в <strong>GDM</strong>.</p>
<p>Для того, чтобы отключить выбор режима Wayland в GDM, необходимо в файле <code>/etc/gdm3/daemon.conf</code> раскомментировать строку:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a81fcfc0e2f9326db2b18bed31f1aa6d"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1"># WaylandEnable=false</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a81fcfc0e2f9326db2b18bed31f1aa6d"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Должно получится так:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a722cd16ae72527d3a527c3364fa7c04"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">WaylandEnable</span><span class="o">=</span><span class="s">false</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a722cd16ae72527d3a527c3364fa7c04"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Таким образом даём понять GDM, что мы не желаем использовать Wayland.</p>]]></turbo:content><pubDate>Thu, 30 Sep 2021 07:51:30 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Установка Proxmox VE на Debian 11 (Bullseye)</title><link>https://lib.onl/ru/posts/2021/09/1cf305cd-85d0-5e02-aabb-e01346bfee0f/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/1cf305cd-85d0-5e02-aabb-e01346bfee0f/</guid><description>В этой небольшой заметке, я расскажу как установить Proxmox VE на чистый Debian 11 (Bullseye).</description><media:content medium="image" url="https://images.unsplash.com/photo-1566443280617-35db331c54fb" width="1600" height="900"/><content:encoded><![CDATA[<p>В этой небольшой заметке, я расскажу как установить <strong>Proxmox VE</strong> на чистый <strong>Debian 11 (Bullseye)</strong>.</p>
<h2 id="подготовка">
  <a class="link-body-emphasis" href="#%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0">Подготовка</a>
</h2><p>Для начала необходимо отредактировать файл <code>/etc/hosts</code>, прописав туда IP сервера, на который будет устанавливаться наш Proxmox VE:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-469e103925d6e4252ed3d3a9df6be93f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">127.0.0.1   localhost
</span></span><span class="line"><span class="cl">127.0.1.1   localhost.localdomain     localhost
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Proxmox
</span></span><span class="line"><span class="cl">10.0.1.1    srv-vm.home.local         srv-vm</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-469e103925d6e4252ed3d3a9df6be93f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Для проверки, можно выполнить команду <code>hostname --ip-address</code>, которая вернёт IP сервера, указанного в <code>/etc/hosts</code> выше.</p>
<h2 id="добавление-репозиториев">
  <a class="link-body-emphasis" href="#%d0%b4%d0%be%d0%b1%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d0%b5%d0%b2">Добавление репозиториев</a>
</h2><p>Добавим репозиторий Proxmox VE:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-41711d794e75d67c5894a3fbdb4821db"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [arch=amd64] http://download.proxmox.com/debian/pve bullseye pve-no-subscription&#34;</span> &gt; /etc/apt/sources.list.d/pve.list</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-41711d794e75d67c5894a3fbdb4821db"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Скачаем и установим ключ репозитория:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ddb5f54acb6304b5984968dedc716d22"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">curl <span class="s1">&#39;https://enterprise.proxmox.com/debian/proxmox-release-bullseye.gpg&#39;</span> -o /etc/apt/trusted.gpg.d/pve.gpg</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ddb5f54acb6304b5984968dedc716d22"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Обновим базу пакетов APT и саму систему:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-361b09209e0f2df1f4bdb6f46ec31250"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt update <span class="o">&amp;&amp;</span> apt full-upgrade</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-361b09209e0f2df1f4bdb6f46ec31250"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="установка-пакетов">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%bf%d0%b0%d0%ba%d0%b5%d1%82%d0%be%d0%b2">Установка пакетов</a>
</h2><p>Начнём установку пакетов командой:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-bb3b7a5d78d474b4a86ec5cb06a35581"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install proxmox-ve postfix open-iscsi</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-bb3b7a5d78d474b4a86ec5cb06a35581"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Стоит заметить, что устанавливается Postfix, он необходим для отправки писем от Proxmox VE. Но мне в локальной сети такая функция не нужна. При установке, Postfix спросит в каком режиме ему необходимо будет работать. Я выбираю <strong>local only</strong>.</p>
<h2 id="исправление-ошибок">
  <a class="link-body-emphasis" href="#%d0%b8%d1%81%d0%bf%d1%80%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d0%be%d1%88%d0%b8%d0%b1%d0%be%d0%ba">Исправление ошибок</a>
</h2><p>После установки Proxmox VE через пакетны менеджер APT, я столкнулся с некоторыми проблемами. Не знаю, может быть они будут отсутствовать, если устанавливать Proxmox VE при помощи его отдельного ISO-файла&hellip;</p>
<h3 id="lvm2-activation-generator-lvmconfig-failed">
  <a class="link-body-emphasis" href="#lvm2-activation-generator-lvmconfig-failed">lvm2-activation-generator: lvmconfig failed</a>
</h3><p>Для исправления ошибки <code>lvm2-activation-generator: lvmconfig failed</code>, необходимо в файле <code>/etc/lvm/lvm.conf</code> изменить параметр <code>event_activation</code>, а именно раскомментировать и установить в <code>0</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-30325d7e2ff7c6c40afd06f6ffaf6d69"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">global {
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">  # Configuration option global/event_activation.
</span></span><span class="line"><span class="cl">  # Activate LVs based on system-generated device events.
</span></span><span class="line"><span class="cl">  # When a device appears on the system, a system-generated event runs
</span></span><span class="line"><span class="cl">  # the pvscan command to activate LVs if the new PV completes the VG.
</span></span><span class="line"><span class="cl">  # Use auto_activation_volume_list to select which LVs should be
</span></span><span class="line"><span class="cl">  # activated from these events (the default is all.)
</span></span><span class="line"><span class="cl">  # When event_activation is disabled, the system will generally run
</span></span><span class="line"><span class="cl">  # a direct activation command to activate LVs in complete VGs.
</span></span><span class="line"><span class="cl">  # This configuration option has an automatic default value.
</span></span><span class="line"><span class="cl">  # event_activation = 1
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">}</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-30325d7e2ff7c6c40afd06f6ffaf6d69"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-2d51c22d7a1543e8feff43d4fc9dc07a"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">global {
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">  # Configuration option global/event_activation.
</span></span><span class="line"><span class="cl">  # Activate LVs based on system-generated device events.
</span></span><span class="line"><span class="cl">  # When a device appears on the system, a system-generated event runs
</span></span><span class="line"><span class="cl">  # the pvscan command to activate LVs if the new PV completes the VG.
</span></span><span class="line"><span class="cl">  # Use auto_activation_volume_list to select which LVs should be
</span></span><span class="line"><span class="cl">  # activated from these events (the default is all.)
</span></span><span class="line"><span class="cl">  # When event_activation is disabled, the system will generally run
</span></span><span class="line"><span class="cl">  # a direct activation command to activate LVs in complete VGs.
</span></span><span class="line"><span class="cl">  # This configuration option has an automatic default value.
</span></span><span class="line"><span class="cl">  event_activation = 0
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">}</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2d51c22d7a1543e8feff43d4fc9dc07a"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h3 id="не-поднимается--интерфейс">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5-%d0%bf%d0%be%d0%b4%d0%bd%d0%b8%d0%bc%d0%b0%d0%b5%d1%82%d1%81%d1%8f--%d0%b8%d0%bd%d1%82%d0%b5%d1%80%d1%84%d0%b5%d0%b9%d1%81">Не поднимается  интерфейс</a>
</h3><p>После установки, у меня перестал автоматически подниматься сетевой интерфейс. Может быть, в отдельном ISO-образе Proxmox VE такой проблемы нет, потому что при установке с отдельного ISO-образа, он запрашивает у администратора параметры сети. Но если устанавливать Proxmox VE через пакетную систему Debian, то никаких запросов не появляется. В общем, я сделал так (<code>/etc/network/interfaces</code>):</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b6e05881caee6c7b484721f720882a86"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">auto lo
</span></span><span class="line"><span class="cl">iface lo inet loopback
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">iface enp3s0 inet manual
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">auto vmbr0
</span></span><span class="line"><span class="cl">iface vmbr0 inet static
</span></span><span class="line"><span class="cl">  address 10.0.1.1/16
</span></span><span class="line"><span class="cl">  gateway 10.0.0.1
</span></span><span class="line"><span class="cl">  bridge-ports enp3s0
</span></span><span class="line"><span class="cl">  bridge-stp off
</span></span><span class="line"><span class="cl">  bridge-fd 0</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b6e05881caee6c7b484721f720882a86"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Конкретно, тут я добавил блок виртуального соединения:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a90148eeeeb1e4e072a12b79b8c87e97"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">auto vmbr0
</span></span><span class="line"><span class="cl">iface vmbr0 inet static
</span></span><span class="line"><span class="cl">  address 10.0.1.1/16
</span></span><span class="line"><span class="cl">  gateway 10.0.0.1
</span></span><span class="line"><span class="cl">  bridge-ports enp3s0
</span></span><span class="line"><span class="cl">  bridge-stp off
</span></span><span class="line"><span class="cl">  bridge-fd 0</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a90148eeeeb1e4e072a12b79b8c87e97"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где указал мост с физической картой <code>enp3s0</code>. Саму же карту <code>enp3s0</code> я перевёл в режим <code>manual</code>. После этого, сетевой интерфейс на сервере заработал в штатном режиме.</p>
<p>На этом консольная настройка сервера виртуализации закончена. Настройка самого Proxmox&rsquo;а можно выполнять уже в удобном web-интерфейсе.</p>]]></content:encoded><turbo:source/><turbo:topic>Установка Proxmox VE на Debian 11 (Bullseye)</turbo:topic><turbo:content><![CDATA[<p>В этой небольшой заметке, я расскажу как установить <strong>Proxmox VE</strong> на чистый <strong>Debian 11 (Bullseye)</strong>.</p>
<h2 id="подготовка">
  <a class="link-body-emphasis" href="#%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0">Подготовка</a>
</h2><p>Для начала необходимо отредактировать файл <code>/etc/hosts</code>, прописав туда IP сервера, на который будет устанавливаться наш Proxmox VE:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-469e103925d6e4252ed3d3a9df6be93f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">127.0.0.1   localhost
</span></span><span class="line"><span class="cl">127.0.1.1   localhost.localdomain     localhost
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Proxmox
</span></span><span class="line"><span class="cl">10.0.1.1    srv-vm.home.local         srv-vm</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-469e103925d6e4252ed3d3a9df6be93f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Для проверки, можно выполнить команду <code>hostname --ip-address</code>, которая вернёт IP сервера, указанного в <code>/etc/hosts</code> выше.</p>
<h2 id="добавление-репозиториев">
  <a class="link-body-emphasis" href="#%d0%b4%d0%be%d0%b1%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d0%b5%d0%b2">Добавление репозиториев</a>
</h2><p>Добавим репозиторий Proxmox VE:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-41711d794e75d67c5894a3fbdb4821db"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;deb [arch=amd64] http://download.proxmox.com/debian/pve bullseye pve-no-subscription&#34;</span> &gt; /etc/apt/sources.list.d/pve.list</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-41711d794e75d67c5894a3fbdb4821db"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Скачаем и установим ключ репозитория:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ddb5f54acb6304b5984968dedc716d22"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">curl <span class="s1">&#39;https://enterprise.proxmox.com/debian/proxmox-release-bullseye.gpg&#39;</span> -o /etc/apt/trusted.gpg.d/pve.gpg</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ddb5f54acb6304b5984968dedc716d22"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Обновим базу пакетов APT и саму систему:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-361b09209e0f2df1f4bdb6f46ec31250"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt update <span class="o">&amp;&amp;</span> apt full-upgrade</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-361b09209e0f2df1f4bdb6f46ec31250"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="установка-пакетов">
  <a class="link-body-emphasis" href="#%d1%83%d1%81%d1%82%d0%b0%d0%bd%d0%be%d0%b2%d0%ba%d0%b0-%d0%bf%d0%b0%d0%ba%d0%b5%d1%82%d0%be%d0%b2">Установка пакетов</a>
</h2><p>Начнём установку пакетов командой:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-bb3b7a5d78d474b4a86ec5cb06a35581"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install proxmox-ve postfix open-iscsi</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-bb3b7a5d78d474b4a86ec5cb06a35581"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Стоит заметить, что устанавливается Postfix, он необходим для отправки писем от Proxmox VE. Но мне в локальной сети такая функция не нужна. При установке, Postfix спросит в каком режиме ему необходимо будет работать. Я выбираю <strong>local only</strong>.</p>
<h2 id="исправление-ошибок">
  <a class="link-body-emphasis" href="#%d0%b8%d1%81%d0%bf%d1%80%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-%d0%be%d1%88%d0%b8%d0%b1%d0%be%d0%ba">Исправление ошибок</a>
</h2><p>После установки Proxmox VE через пакетны менеджер APT, я столкнулся с некоторыми проблемами. Не знаю, может быть они будут отсутствовать, если устанавливать Proxmox VE при помощи его отдельного ISO-файла&hellip;</p>
<h3 id="lvm2-activation-generator-lvmconfig-failed">
  <a class="link-body-emphasis" href="#lvm2-activation-generator-lvmconfig-failed">lvm2-activation-generator: lvmconfig failed</a>
</h3><p>Для исправления ошибки <code>lvm2-activation-generator: lvmconfig failed</code>, необходимо в файле <code>/etc/lvm/lvm.conf</code> изменить параметр <code>event_activation</code>, а именно раскомментировать и установить в <code>0</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-30325d7e2ff7c6c40afd06f6ffaf6d69"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">global {
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">  # Configuration option global/event_activation.
</span></span><span class="line"><span class="cl">  # Activate LVs based on system-generated device events.
</span></span><span class="line"><span class="cl">  # When a device appears on the system, a system-generated event runs
</span></span><span class="line"><span class="cl">  # the pvscan command to activate LVs if the new PV completes the VG.
</span></span><span class="line"><span class="cl">  # Use auto_activation_volume_list to select which LVs should be
</span></span><span class="line"><span class="cl">  # activated from these events (the default is all.)
</span></span><span class="line"><span class="cl">  # When event_activation is disabled, the system will generally run
</span></span><span class="line"><span class="cl">  # a direct activation command to activate LVs in complete VGs.
</span></span><span class="line"><span class="cl">  # This configuration option has an automatic default value.
</span></span><span class="line"><span class="cl">  # event_activation = 1
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">}</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-30325d7e2ff7c6c40afd06f6ffaf6d69"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-2d51c22d7a1543e8feff43d4fc9dc07a"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">global {
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">  # Configuration option global/event_activation.
</span></span><span class="line"><span class="cl">  # Activate LVs based on system-generated device events.
</span></span><span class="line"><span class="cl">  # When a device appears on the system, a system-generated event runs
</span></span><span class="line"><span class="cl">  # the pvscan command to activate LVs if the new PV completes the VG.
</span></span><span class="line"><span class="cl">  # Use auto_activation_volume_list to select which LVs should be
</span></span><span class="line"><span class="cl">  # activated from these events (the default is all.)
</span></span><span class="line"><span class="cl">  # When event_activation is disabled, the system will generally run
</span></span><span class="line"><span class="cl">  # a direct activation command to activate LVs in complete VGs.
</span></span><span class="line"><span class="cl">  # This configuration option has an automatic default value.
</span></span><span class="line"><span class="cl">  event_activation = 0
</span></span><span class="line"><span class="cl">  &lt;...&gt;
</span></span><span class="line"><span class="cl">}</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2d51c22d7a1543e8feff43d4fc9dc07a"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h3 id="не-поднимается--интерфейс">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5-%d0%bf%d0%be%d0%b4%d0%bd%d0%b8%d0%bc%d0%b0%d0%b5%d1%82%d1%81%d1%8f--%d0%b8%d0%bd%d1%82%d0%b5%d1%80%d1%84%d0%b5%d0%b9%d1%81">Не поднимается  интерфейс</a>
</h3><p>После установки, у меня перестал автоматически подниматься сетевой интерфейс. Может быть, в отдельном ISO-образе Proxmox VE такой проблемы нет, потому что при установке с отдельного ISO-образа, он запрашивает у администратора параметры сети. Но если устанавливать Proxmox VE через пакетную систему Debian, то никаких запросов не появляется. В общем, я сделал так (<code>/etc/network/interfaces</code>):</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b6e05881caee6c7b484721f720882a86"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">auto lo
</span></span><span class="line"><span class="cl">iface lo inet loopback
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">iface enp3s0 inet manual
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">auto vmbr0
</span></span><span class="line"><span class="cl">iface vmbr0 inet static
</span></span><span class="line"><span class="cl">  address 10.0.1.1/16
</span></span><span class="line"><span class="cl">  gateway 10.0.0.1
</span></span><span class="line"><span class="cl">  bridge-ports enp3s0
</span></span><span class="line"><span class="cl">  bridge-stp off
</span></span><span class="line"><span class="cl">  bridge-fd 0</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b6e05881caee6c7b484721f720882a86"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Конкретно, тут я добавил блок виртуального соединения:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a90148eeeeb1e4e072a12b79b8c87e97"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">auto vmbr0
</span></span><span class="line"><span class="cl">iface vmbr0 inet static
</span></span><span class="line"><span class="cl">  address 10.0.1.1/16
</span></span><span class="line"><span class="cl">  gateway 10.0.0.1
</span></span><span class="line"><span class="cl">  bridge-ports enp3s0
</span></span><span class="line"><span class="cl">  bridge-stp off
</span></span><span class="line"><span class="cl">  bridge-fd 0</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a90148eeeeb1e4e072a12b79b8c87e97"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Где указал мост с физической картой <code>enp3s0</code>. Саму же карту <code>enp3s0</code> я перевёл в режим <code>manual</code>. После этого, сетевой интерфейс на сервере заработал в штатном режиме.</p>
<p>На этом консольная настройка сервера виртуализации закончена. Настройка самого Proxmox&rsquo;а можно выполнять уже в удобном web-интерфейсе.</p>]]></turbo:content><pubDate>Sun, 12 Sep 2021 21:36:02 +0000</pubDate><category>Linux</category><category>В доработке</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Debian: Wired Networks are Unmanaged</title><link>https://lib.onl/ru/posts/2021/09/ff829d15-4a19-52e3-a3aa-ad70aa38854a/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/ff829d15-4a19-52e3-a3aa-ad70aa38854a/</guid><description>При базовой установке Debian, Network Manager не устанавливается и, соответственно, он не управляет сетевой конфигурацией. Исправим данную ситуацию&amp;hellip;</description><media:content medium="image" url="https://images.unsplash.com/photo-1554098415-4052459dc340" width="1600" height="900"/><content:encoded><![CDATA[<p>При базовой установке Debian, Network Manager не устанавливается и, соответственно, он не управляет сетевой конфигурацией. Исправим данную ситуацию&hellip;</p>
<p>Лично я люблю ставить систему в минимальной комплектации. У меня есть <a title="" href="https://uaik.github.io/" target="_blank" rel="noopener noreferrer nofollow">отдельный ресурс</a> со сценариями автоматической установки. Это шаблоны, которые позволяют поставить систему в автоматическом режиме и с минимальным набором компонентов. В основном, такие шаблоны полезны для серверов. Однако, для домашнего компьютера тоже вполне подойдут. Но после установки домашней системы через такой шаблон, потребуется небольшая корректировка.</p>
<p>Итак, установим Network Manager при помощи пакетного менеджера <strong>APT</strong>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ccc2ea2bf2567b728eb3feceab8f2db7"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install network-manager</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ccc2ea2bf2567b728eb3feceab8f2db7"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Но этого недостаточно. Система будет говорить, что &ldquo;Wired Networks are Unmanaged&rdquo;, потому что всё ещё сетевой конфигурацией управляет не Network Manager. Для исправления этой ситуации, необходимо в <code>/etc/NetworkManager/NetworkManager.conf</code> изменить <code>managed=false</code> на <code>managed=true</code>.</p>
<p>Далее, перезапустить службу:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-24db6e55f59f68793a2f2d3fccd7c4f5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">service NetworkManager restart</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-24db6e55f59f68793a2f2d3fccd7c4f5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>На этом всё. Теперь сетевой конфигурацией управляет Network Manager.</p>]]></content:encoded><turbo:source/><turbo:topic>Debian: Wired Networks are Unmanaged</turbo:topic><turbo:content><![CDATA[<p>При базовой установке Debian, Network Manager не устанавливается и, соответственно, он не управляет сетевой конфигурацией. Исправим данную ситуацию&hellip;</p>
<p>Лично я люблю ставить систему в минимальной комплектации. У меня есть <a title="" href="https://uaik.github.io/" target="_blank" rel="noopener noreferrer nofollow">отдельный ресурс</a> со сценариями автоматической установки. Это шаблоны, которые позволяют поставить систему в автоматическом режиме и с минимальным набором компонентов. В основном, такие шаблоны полезны для серверов. Однако, для домашнего компьютера тоже вполне подойдут. Но после установки домашней системы через такой шаблон, потребуется небольшая корректировка.</p>
<p>Итак, установим Network Manager при помощи пакетного менеджера <strong>APT</strong>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ccc2ea2bf2567b728eb3feceab8f2db7"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">apt install network-manager</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ccc2ea2bf2567b728eb3feceab8f2db7"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Но этого недостаточно. Система будет говорить, что &ldquo;Wired Networks are Unmanaged&rdquo;, потому что всё ещё сетевой конфигурацией управляет не Network Manager. Для исправления этой ситуации, необходимо в <code>/etc/NetworkManager/NetworkManager.conf</code> изменить <code>managed=false</code> на <code>managed=true</code>.</p>
<p>Далее, перезапустить службу:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-24db6e55f59f68793a2f2d3fccd7c4f5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">service NetworkManager restart</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-24db6e55f59f68793a2f2d3fccd7c4f5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>На этом всё. Теперь сетевой конфигурацией управляет Network Manager.</p>]]></turbo:content><pubDate>Thu, 09 Sep 2021 19:14:12 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Распаковка пакетов DEB / RPM</title><link>https://lib.onl/ru/posts/2021/09/b2caccc7-92bf-57ed-970f-136c546f18e2/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/b2caccc7-92bf-57ed-970f-136c546f18e2/</guid><description>Я собираю пакеты для Debian и RHEL. И зачастую, мне необходимо посмотреть содержимое собранного пакета, чтобы удостоверится в правильности сборки и корректности расположения файлов внутри пакета. В этой статье кратно расскажу, как и при помощи чего можно посмотреть собранные пакеты.</description><media:content medium="image" url="https://images.unsplash.com/photo-1577705998148-6da4f3963bc8" width="1600" height="900"/><content:encoded><![CDATA[<p>Я собираю пакеты для Debian и RHEL. И зачастую, мне необходимо посмотреть содержимое собранного пакета, чтобы удостоверится в правильности сборки и корректности расположения файлов внутри пакета. В этой статье кратно расскажу, как и при помощи чего можно посмотреть собранные пакеты.</p>
<h2 id="deb">
  <a class="link-body-emphasis" href="#deb">DEB</a>
</h2><p>Пакет <code>.deb</code> архивируется при помощи <a title="" href="https://en.wikipedia.org/wiki/Ar_%28Unix%29" target="_blank" rel="noopener noreferrer nofollow">ar</a>. Соответственно, распаковать пакет тоже следует через данный архиватор:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9447d7698332a30754a829c38436bc41"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ar x example.deb</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9447d7698332a30754a829c38436bc41"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ul>
<li><code>debian-binary</code> – файл, содержащий версию формата <code>.deb</code>.</li>
<li><code>control.tar.xz</code> – файл, содержащий md5sums и директорию для сборки пакета.</li>
<li><code>data.tar.xz</code> – архив, содержащий все файлы, которые должны быть установлены в системе при установке пакета.</li>
</ul>
<h2 id="rpm">
  <a class="link-body-emphasis" href="#rpm">RPM</a>
</h2><p>Пакет <code>.rpm</code> содержит архив <code>cpio</code>. Имеется удобная утилита <code>rpm2cpio</code>, которая преобразует <code>.rpm</code> в архив <code>cpio</code>.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b4011c96a567e7c5b841ebb8eb638b9b"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">rpm2cpio myrpmfile.rpm
</span></span><span class="line"><span class="cl">rpm2cpio - &lt; myrpmfile.rpm
</span></span><span class="line"><span class="cl">rpm2cpio myrpmfile.rpm <span class="p">|</span> cpio -idmv</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b4011c96a567e7c5b841ebb8eb638b9b"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Опции <code>rpm2cpio</code>:</p>
<ul>
<li><code>-i</code> - восстановить архив.</li>
<li><code>-d</code> - создать необходимые каталоги.</li>
<li><code>-m</code> - сохранить время модификации файлов.</li>
<li><code>-v</code> - подробный вывод процесса преобразования.</li>
</ul>
<p>Также, просматривать <code>.rpm</code> можно при помощи файлового менеджера Midnight Commander (<code>mc</code>).</p>]]></content:encoded><turbo:source/><turbo:topic>Распаковка пакетов DEB / RPM</turbo:topic><turbo:content><![CDATA[<p>Я собираю пакеты для Debian и RHEL. И зачастую, мне необходимо посмотреть содержимое собранного пакета, чтобы удостоверится в правильности сборки и корректности расположения файлов внутри пакета. В этой статье кратно расскажу, как и при помощи чего можно посмотреть собранные пакеты.</p>
<h2 id="deb">
  <a class="link-body-emphasis" href="#deb">DEB</a>
</h2><p>Пакет <code>.deb</code> архивируется при помощи <a title="" href="https://en.wikipedia.org/wiki/Ar_%28Unix%29" target="_blank" rel="noopener noreferrer nofollow">ar</a>. Соответственно, распаковать пакет тоже следует через данный архиватор:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9447d7698332a30754a829c38436bc41"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">ar x example.deb</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9447d7698332a30754a829c38436bc41"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ul>
<li><code>debian-binary</code> – файл, содержащий версию формата <code>.deb</code>.</li>
<li><code>control.tar.xz</code> – файл, содержащий md5sums и директорию для сборки пакета.</li>
<li><code>data.tar.xz</code> – архив, содержащий все файлы, которые должны быть установлены в системе при установке пакета.</li>
</ul>
<h2 id="rpm">
  <a class="link-body-emphasis" href="#rpm">RPM</a>
</h2><p>Пакет <code>.rpm</code> содержит архив <code>cpio</code>. Имеется удобная утилита <code>rpm2cpio</code>, которая преобразует <code>.rpm</code> в архив <code>cpio</code>.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-b4011c96a567e7c5b841ebb8eb638b9b"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">rpm2cpio myrpmfile.rpm
</span></span><span class="line"><span class="cl">rpm2cpio - &lt; myrpmfile.rpm
</span></span><span class="line"><span class="cl">rpm2cpio myrpmfile.rpm <span class="p">|</span> cpio -idmv</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b4011c96a567e7c5b841ebb8eb638b9b"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Опции <code>rpm2cpio</code>:</p>
<ul>
<li><code>-i</code> - восстановить архив.</li>
<li><code>-d</code> - создать необходимые каталоги.</li>
<li><code>-m</code> - сохранить время модификации файлов.</li>
<li><code>-v</code> - подробный вывод процесса преобразования.</li>
</ul>
<p>Также, просматривать <code>.rpm</code> можно при помощи файлового менеджера Midnight Commander (<code>mc</code>).</p>]]></turbo:content><pubDate>Wed, 08 Sep 2021 09:39:36 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Отключение установки дополнительных пакетов в Debian APT</title><link>https://lib.onl/ru/posts/2021/09/43b40b92-c29a-504b-87fa-5eac368dcf95/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/43b40b92-c29a-504b-87fa-5eac368dcf95/</guid><description>Стандартное действие APT при установке пакета, это установить дополнительные рекомендуемые пакеты. Но, к примеру, мне рекомендуемые пакеты не нужны. Они занимают место и, если я захочу поставить что-то дополнительно, я поставлю это сам.</description><media:content medium="image" url="https://images.unsplash.com/photo-1583078379333-e34d6569c406" width="1600" height="900"/><content:encoded><![CDATA[<p>Стандартное действие APT при установке пакета, это установить дополнительные рекомендуемые пакеты. Но, к примеру, мне рекомендуемые пакеты не нужны. Они занимают место и, если я захочу поставить что-то дополнительно, я поставлю это сам.</p>
<p>Ниже приведены две команды, которые позволяют отключить установку рекомендуемых (Recommends) и дополнительных (Suggests)пакетов.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-af0bb59a3cf8dc7727e6f23b5daeb316"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;APT::Install-Recommends &#34;false&#34;;&#39;</span> &gt; /etc/apt/apt.conf.d/00InstallRecommends</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-af0bb59a3cf8dc7727e6f23b5daeb316"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-482ec7104a4a6485d9a3c99e2f92f140"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;APT::Install-Suggests &#34;false&#34;;&#39;</span> &gt; /etc/apt/apt.conf.d/00InstallSuggests</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-482ec7104a4a6485d9a3c99e2f92f140"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Стоит заметить, что при установке Debian на завершающем этапе можно отключить рекомендуемые пакеты (в preseed этот параметр именуется как <code>d-i base-installer/install-recommends boolean false</code>). При этом, после установки, Debian сам создаст файл <code>00InstallRecommends</code> в <code>/etc/apt/apt.conf.d</code> с соответствующим содержанием.</p>]]></content:encoded><turbo:source/><turbo:topic>Отключение установки дополнительных пакетов в Debian APT</turbo:topic><turbo:content><![CDATA[<p>Стандартное действие APT при установке пакета, это установить дополнительные рекомендуемые пакеты. Но, к примеру, мне рекомендуемые пакеты не нужны. Они занимают место и, если я захочу поставить что-то дополнительно, я поставлю это сам.</p>
<p>Ниже приведены две команды, которые позволяют отключить установку рекомендуемых (Recommends) и дополнительных (Suggests)пакетов.</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-af0bb59a3cf8dc7727e6f23b5daeb316"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;APT::Install-Recommends &#34;false&#34;;&#39;</span> &gt; /etc/apt/apt.conf.d/00InstallRecommends</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-af0bb59a3cf8dc7727e6f23b5daeb316"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-482ec7104a4a6485d9a3c99e2f92f140"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;APT::Install-Suggests &#34;false&#34;;&#39;</span> &gt; /etc/apt/apt.conf.d/00InstallSuggests</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-482ec7104a4a6485d9a3c99e2f92f140"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Стоит заметить, что при установке Debian на завершающем этапе можно отключить рекомендуемые пакеты (в preseed этот параметр именуется как <code>d-i base-installer/install-recommends boolean false</code>). При этом, после установки, Debian сам создаст файл <code>00InstallRecommends</code> в <code>/etc/apt/apt.conf.d</code> с соответствующим содержанием.</p>]]></turbo:content><pubDate>Tue, 07 Sep 2021 13:07:46 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>dhclient отправляет 36-значный идентификатор вместо MAC</title><link>https://lib.onl/ru/posts/2021/09/aeed7c90-003a-532a-b2c4-3807aaee88fa/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/09/aeed7c90-003a-532a-b2c4-3807aaee88fa/</guid><description>Начиная с Debian 10 в составе дистрибутива поставляется новая версия dhclient, которая стала более совместимой с RFC. Поэтому, dhclient теперь отправляет не прямой MAC, а 36-значный идентификатор.</description><media:content medium="image" url="https://images.unsplash.com/photo-1544197150-b99a580bb7a8" width="1600" height="900"/><content:encoded><![CDATA[<p>Начиная с <strong>Debian 10</strong> в составе дистрибутива поставляется новая версия <strong>dhclient</strong>, которая стала более совместимой с RFC. Поэтому, dhclient теперь отправляет не прямой MAC, а 36-значный идентификатор.</p>
<p>Чтобы указать dhclient&rsquo;у отправлять обычный MAC, необходимо в <code>/etc/dhcp/dhclient.conf</code> прописать строку:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3bbd8a496bac0ffb933ced08f4b06c54"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">send dhcp-client-identifier</span> <span class="o">=</span> <span class="s">hardware;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3bbd8a496bac0ffb933ced08f4b06c54"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Тоже самое при помощи команды:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-590198c7cdfcab71c7a2b7786fa5ed5e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;send dhcp-client-identifier = hardware;&#39;</span> &gt;&gt; /etc/dhcp/dhclient.conf</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-590198c7cdfcab71c7a2b7786fa5ed5e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>dhclient отправляет 36-значный идентификатор вместо MAC</turbo:topic><turbo:content><![CDATA[<p>Начиная с <strong>Debian 10</strong> в составе дистрибутива поставляется новая версия <strong>dhclient</strong>, которая стала более совместимой с RFC. Поэтому, dhclient теперь отправляет не прямой MAC, а 36-значный идентификатор.</p>
<p>Чтобы указать dhclient&rsquo;у отправлять обычный MAC, необходимо в <code>/etc/dhcp/dhclient.conf</code> прописать строку:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3bbd8a496bac0ffb933ced08f4b06c54"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">send dhcp-client-identifier</span> <span class="o">=</span> <span class="s">hardware;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3bbd8a496bac0ffb933ced08f4b06c54"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Тоже самое при помощи команды:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-590198c7cdfcab71c7a2b7786fa5ed5e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;send dhcp-client-identifier = hardware;&#39;</span> &gt;&gt; /etc/dhcp/dhclient.conf</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-590198c7cdfcab71c7a2b7786fa5ed5e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Tue, 07 Sep 2021 08:38:24 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Настройка и использование Git</title><link>https://lib.onl/ru/posts/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/08/c35f395f-5921-55eb-afcf-1ad812a1a9d9/</guid><description>В этой заметке я приведу параметры Git, которые сам использую при работе с репозиториями.</description><media:content medium="image" url="https://images.unsplash.com/photo-1556075798-4825dfaaf498" width="1600" height="900"/><content:encoded><![CDATA[<p>В этой заметке я приведу параметры Git, которые сам использую при работе с репозиториями.</p>
<h2 id="первичная-настройка">
  <a class="link-body-emphasis" href="#%d0%bf%d0%b5%d1%80%d0%b2%d0%b8%d1%87%d0%bd%d0%b0%d1%8f-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0">Первичная настройка</a>
</h2><p>Для начала работы с Git&rsquo;ом, его необходимо хотя бы минимально настроить.</p>
<ol>
<li>Указать своё имя:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-97048bf31a1b58c7e1f6bf576134d3c0"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global user.name <span class="s2">&#34;John Doe&#34;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-97048bf31a1b58c7e1f6bf576134d3c0"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Указать свой адрес e-mail:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-6bb4324b174bddc59dc28b6bb9952c3a"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global user.email <span class="s2">&#34;johndoe@example.com&#34;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-6bb4324b174bddc59dc28b6bb9952c3a"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="настройка-подписи">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d0%b8">Настройка подписи</a>
</h2><p>Хорошим тоном будет считаться подпись каждого своего коммита.</p>
<ol>
<li>Выяснить какие ключи установлены в системе (о создании ключей я публиковал заметку <span class="shortcode shortcode-uuid"><a href="/ru/posts/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/">GnuPG: Создание и работа с ключами шифрования</a></span>):</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ffe7e6a88739de2dde1524a4256e8376"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gpg --list-secret-keys --keyid-format<span class="o">=</span>long</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ffe7e6a88739de2dde1524a4256e8376"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Указать Git&rsquo;у всегда подписывать каждый коммит:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-98192022ab78fd5c3113bc3538895258"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global commit.gpgsign true</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-98192022ab78fd5c3113bc3538895258"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="3">
<li>Указать Git&rsquo;у идентификатор ключа для подписи коммита:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1246d0da38af3a449376c18b2b4a3535"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global user.signingkey 3AA5C34371567BD2</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1246d0da38af3a449376c18b2b4a3535"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="хранилище-паролей">
  <a class="link-body-emphasis" href="#%d1%85%d1%80%d0%b0%d0%bd%d0%b8%d0%bb%d0%b8%d1%89%d0%b5-%d0%bf%d0%b0%d1%80%d0%be%d0%bb%d0%b5%d0%b9">Хранилище паролей</a>
</h2><p>Git по умолчанию не сохраняет регистрационные данные для репозиториев. Эта настройка позволяет указать Git&rsquo;у использовать для хранения регистрационных данных текстовый файл <code>~/.git-credentials</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-46a379d1f1da5c5c065225da45194e75"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global credential.helper store</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-46a379d1f1da5c5c065225da45194e75"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="отмена-изменений">
  <a class="link-body-emphasis" href="#%d0%be%d1%82%d0%bc%d0%b5%d0%bd%d0%b0-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b9">Отмена изменений</a>
</h2><p>Отмена конкретного коммита:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-8a8f1ddda3719b1e65d2eabac1f58420"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git revert <span class="o">[</span>commit<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-8a8f1ddda3719b1e65d2eabac1f58420"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Отмена 2-х коммитов подряд:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-15f5090bf6204a50104f6bdc78a07db0"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git revert HEAD~2</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-15f5090bf6204a50104f6bdc78a07db0"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="модули">
  <a class="link-body-emphasis" href="#%d0%bc%d0%be%d0%b4%d1%83%d0%bb%d0%b8">Модули</a>
</h2><p>Добавление модуля:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9273aefac0b1cc3b85e967d45538b381"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git submodule add https://github.com/<span class="o">[</span>MODULE<span class="o">]</span> <span class="o">[</span>MODULE<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9273aefac0b1cc3b85e967d45538b381"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Рекурсивное обновление всех модулей:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a3766a895d29f23b0abb57242680c619"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git submodule update --recursive --remote --merge</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a3766a895d29f23b0abb57242680c619"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Удаление модуля:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c266e787afc96f489bdeccefa9174dd3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git submodule deinit -f <span class="o">[</span>MODULE<span class="o">]</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> git rm -r --cached <span class="o">[</span>MODULE<span class="o">]</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> rm -rf .git/modules/<span class="o">[</span>MODULE<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> rm -rf <span class="o">[</span>MODULE<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c266e787afc96f489bdeccefa9174dd3"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="изменение-адреса-репозитория">
  <a class="link-body-emphasis" href="#%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b0%d0%b4%d1%80%d0%b5%d1%81%d0%b0-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f">Изменение адреса репозитория</a>
</h2><p>Показать текущий адрес:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9ddc3d16d494cfb132c9137f5255e14c"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git remote -v</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9ddc3d16d494cfb132c9137f5255e14c"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить новый адрес:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-313b0ec56f60206e1c91ab9951a23aa7"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git remote set-url origin <span class="s1">&#39;[URL]&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-313b0ec56f60206e1c91ab9951a23aa7"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>Настройка и использование Git</turbo:topic><turbo:content><![CDATA[<p>В этой заметке я приведу параметры Git, которые сам использую при работе с репозиториями.</p>
<h2 id="первичная-настройка">
  <a class="link-body-emphasis" href="#%d0%bf%d0%b5%d1%80%d0%b2%d0%b8%d1%87%d0%bd%d0%b0%d1%8f-%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0">Первичная настройка</a>
</h2><p>Для начала работы с Git&rsquo;ом, его необходимо хотя бы минимально настроить.</p>
<ol>
<li>Указать своё имя:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-97048bf31a1b58c7e1f6bf576134d3c0"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global user.name <span class="s2">&#34;John Doe&#34;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-97048bf31a1b58c7e1f6bf576134d3c0"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Указать свой адрес e-mail:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-6bb4324b174bddc59dc28b6bb9952c3a"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global user.email <span class="s2">&#34;johndoe@example.com&#34;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-6bb4324b174bddc59dc28b6bb9952c3a"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="настройка-подписи">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-%d0%bf%d0%be%d0%b4%d0%bf%d0%b8%d1%81%d0%b8">Настройка подписи</a>
</h2><p>Хорошим тоном будет считаться подпись каждого своего коммита.</p>
<ol>
<li>Выяснить какие ключи установлены в системе (о создании ключей я публиковал заметку <span class="shortcode shortcode-uuid"><a href="/ru/posts/2020/07/7a204545-daa8-58ce-ba35-75e732e1bcc0/">GnuPG: Создание и работа с ключами шифрования</a></span>):</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-ffe7e6a88739de2dde1524a4256e8376"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">gpg --list-secret-keys --keyid-format<span class="o">=</span>long</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-ffe7e6a88739de2dde1524a4256e8376"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="2">
<li>Указать Git&rsquo;у всегда подписывать каждый коммит:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-98192022ab78fd5c3113bc3538895258"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global commit.gpgsign true</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-98192022ab78fd5c3113bc3538895258"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ol start="3">
<li>Указать Git&rsquo;у идентификатор ключа для подписи коммита:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-1246d0da38af3a449376c18b2b4a3535"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global user.signingkey 3AA5C34371567BD2</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-1246d0da38af3a449376c18b2b4a3535"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="хранилище-паролей">
  <a class="link-body-emphasis" href="#%d1%85%d1%80%d0%b0%d0%bd%d0%b8%d0%bb%d0%b8%d1%89%d0%b5-%d0%bf%d0%b0%d1%80%d0%be%d0%bb%d0%b5%d0%b9">Хранилище паролей</a>
</h2><p>Git по умолчанию не сохраняет регистрационные данные для репозиториев. Эта настройка позволяет указать Git&rsquo;у использовать для хранения регистрационных данных текстовый файл <code>~/.git-credentials</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-46a379d1f1da5c5c065225da45194e75"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git config --global credential.helper store</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-46a379d1f1da5c5c065225da45194e75"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="отмена-изменений">
  <a class="link-body-emphasis" href="#%d0%be%d1%82%d0%bc%d0%b5%d0%bd%d0%b0-%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b9">Отмена изменений</a>
</h2><p>Отмена конкретного коммита:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-8a8f1ddda3719b1e65d2eabac1f58420"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git revert <span class="o">[</span>commit<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-8a8f1ddda3719b1e65d2eabac1f58420"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Отмена 2-х коммитов подряд:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-15f5090bf6204a50104f6bdc78a07db0"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git revert HEAD~2</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-15f5090bf6204a50104f6bdc78a07db0"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="модули">
  <a class="link-body-emphasis" href="#%d0%bc%d0%be%d0%b4%d1%83%d0%bb%d0%b8">Модули</a>
</h2><p>Добавление модуля:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9273aefac0b1cc3b85e967d45538b381"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git submodule add https://github.com/<span class="o">[</span>MODULE<span class="o">]</span> <span class="o">[</span>MODULE<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9273aefac0b1cc3b85e967d45538b381"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Рекурсивное обновление всех модулей:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a3766a895d29f23b0abb57242680c619"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git submodule update --recursive --remote --merge</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a3766a895d29f23b0abb57242680c619"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Удаление модуля:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c266e787afc96f489bdeccefa9174dd3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git submodule deinit -f <span class="o">[</span>MODULE<span class="o">]</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> git rm -r --cached <span class="o">[</span>MODULE<span class="o">]</span>  <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> rm -rf .git/modules/<span class="o">[</span>MODULE<span class="o">]</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  <span class="o">&amp;&amp;</span> rm -rf <span class="o">[</span>MODULE<span class="o">]</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c266e787afc96f489bdeccefa9174dd3"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="изменение-адреса-репозитория">
  <a class="link-body-emphasis" href="#%d0%b8%d0%b7%d0%bc%d0%b5%d0%bd%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b0%d0%b4%d1%80%d0%b5%d1%81%d0%b0-%d1%80%d0%b5%d0%bf%d0%be%d0%b7%d0%b8%d1%82%d0%be%d1%80%d0%b8%d1%8f">Изменение адреса репозитория</a>
</h2><p>Показать текущий адрес:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-9ddc3d16d494cfb132c9137f5255e14c"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git remote -v</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9ddc3d16d494cfb132c9137f5255e14c"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Установить новый адрес:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-313b0ec56f60206e1c91ab9951a23aa7"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">git remote set-url origin <span class="s1">&#39;[URL]&#39;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-313b0ec56f60206e1c91ab9951a23aa7"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Sat, 14 Aug 2021 15:52:38 +0000</pubDate><category>Linux</category><category>Git</category><category>Терминал</category><category>В доработке</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Обновление Fedora Linux до актуальной версии</title><link>https://lib.onl/ru/posts/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/05/0acd3f9d-07b7-52b8-9fac-b5cb1cc579e0/</guid><description>Новые версии Fedora публикуются каждые 6-8 месяцев. В этой статье я опишу шаги по обновлению дистрибутива между версиями.</description><media:content medium="image" url="https://images.unsplash.com/photo-1585406666850-82f7532fdae3" width="1600" height="900"/><content:encoded><![CDATA[<p>Новые версии Fedora публикуются каждые 6-8 месяцев. В этой статье я опишу шаги по обновлению дистрибутива между версиями.</p>
<ol>
<li>Устанавливаем плагин обновления системы:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-30b085a60767052ac0b4c282b5b8bf6a"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-30b085a60767052ac0b4c282b5b8bf6a"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">dnf install dnf-plugin-system-upgrade</code></pre></div>
  </div>
</div>
<ol start="2">
<li>Скачивание актуальной версии системы:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-aa3d48e06ba188a43e42a4a1e0c04b9b"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-aa3d48e06ba188a43e42a4a1e0c04b9b"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">dnf system-upgrade download --releasever=34</code></pre></div>
  </div>
</div>
<ul>
<li><code>releasever</code> - номер актуальной версии системы.</li>
</ul>
<ol start="3">
<li>Запуск обновления системы на актуальную версию:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5d1d89db60133737d534f2107b5afc99"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-5d1d89db60133737d534f2107b5afc99"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">dnf system-upgrade reboot</code></pre></div>
  </div>
</div>
<p>Вот и всё. Система обновит пакетную базу и перезагрузится.</p>]]></content:encoded><turbo:source/><turbo:topic>Обновление Fedora Linux до актуальной версии</turbo:topic><turbo:content><![CDATA[<p>Новые версии Fedora публикуются каждые 6-8 месяцев. В этой статье я опишу шаги по обновлению дистрибутива между версиями.</p>
<ol>
<li>Устанавливаем плагин обновления системы:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-30b085a60767052ac0b4c282b5b8bf6a"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-30b085a60767052ac0b4c282b5b8bf6a"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">dnf install dnf-plugin-system-upgrade</code></pre></div>
  </div>
</div>
<ol start="2">
<li>Скачивание актуальной версии системы:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-aa3d48e06ba188a43e42a4a1e0c04b9b"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-aa3d48e06ba188a43e42a4a1e0c04b9b"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">dnf system-upgrade download --releasever=34</code></pre></div>
  </div>
</div>
<ul>
<li><code>releasever</code> - номер актуальной версии системы.</li>
</ul>
<ol start="3">
<li>Запуск обновления системы на актуальную версию:</li>
</ol>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5d1d89db60133737d534f2107b5afc99"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-5d1d89db60133737d534f2107b5afc99"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">dnf system-upgrade reboot</code></pre></div>
  </div>
</div>
<p>Вот и всё. Система обновит пакетную базу и перезагрузится.</p>]]></turbo:content><pubDate>Sat, 15 May 2021 20:29:16 +0000</pubDate><category>Терминал</category><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Настройка статического IP адреса</title><link>https://lib.onl/ru/posts/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/05/ee559a6c-5cde-5166-9d2d-3ceb55878eb8/</guid><description>Рассмотрим различные способы настройки статического IP адреса в дистрибутивах Linux. Способы различаются в зависимости от пакетной базы дистрибутивов. Например, настройка статического IP в RHEL-based дистрибутиве будет отличаться от настройки в DEB-based дистрибутиве.</description><media:content medium="image" url="https://images.unsplash.com/photo-1544197150-b99a580bb7a8" width="1600" height="900"/><content:encoded><![CDATA[<p>Рассмотрим различные способы настройки статического IP адреса в дистрибутивах Linux. Способы различаются в зависимости от пакетной базы дистрибутивов. Например, настройка статического IP в RHEL-based дистрибутиве будет отличаться от настройки в DEB-based дистрибутиве.</p>
<h2 id="подготовка">
  <a class="link-body-emphasis" href="#%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0">Подготовка</a>
</h2><p>Смотрим текущие сетевые устройства и соединения:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-019d3447bc04e385ef7931eb425ed9cf"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-019d3447bc04e385ef7931eb425ed9cf"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">ip a

1: lo: &lt;loopback,up,lower_up&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
  link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
  inet 127.0.0.1/8 scope host lo
2: enp1s0: &lt;broadcast,multicast,up,lower_up&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
  link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
  inet 192.168.10.123/24 brd 192.168.10.255 scope global dynamic noprefixroute enp1s0</code></pre></div>
  </div>
</div>
<h2 id="настройка-ip-в-rhel-based-дистрибутивах">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-ip-%d0%b2-rhel-based-%d0%b4%d0%b8%d1%81%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b8%d0%b2%d0%b0%d1%85">Настройка IP в RHEL-based дистрибутивах</a>
</h2><p>В директории <code>/etc/sysconfig/network-scripts</code> находятся конфигурационные файлы для сетевых интерфейсов. Имя файла состоит из префикса <code>ifcfg</code> и имени интерфейса. Например, содержимое файла для интерфейса <code>enp1s0</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3e0b2568d35583722a3d746df10a7f05"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-3e0b2568d35583722a3d746df10a7f05"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">cat /etc/sysconfig/network-scripts/ifcfg-enp1s0

TYPE=&#34;Ethernet&#34;
PROXY_METHOD=&#34;none&#34;
BROWSER_ONLY=&#34;no&#34;
BOOTPROTO=&#34;dhcp&#34;
DEFROUTE=&#34;yes&#34;
IPV4_FAILURE_FATAL=&#34;no&#34;
IPV6INIT=&#34;yes&#34;
IPV6_AUTOCONF=&#34;yes&#34;
IPV6_DEFROUTE=&#34;yes&#34;
IPV6_FAILURE_FATAL=&#34;no&#34;
IPV6_ADDR_GEN_MODE=&#34;stable-privacy&#34;
NAME=&#34;enp1s0&#34;
UUID=&#34;&lt;DEVICE_ID&gt;&#34;
DEVICE=&#34;enp1s0&#34;
ONBOOT=&#34;yes&#34;</code></pre></div>
  </div>
</div>
<p>Обратим внимание на опцию <strong>BOOTPROTO</strong>. По умолчанию, в опции <strong>BOOTPROTO</strong> прописано <code>dhcp</code>. Это означает, что сетевой интерфейс получает информацию о сети автоматически от DHCP. Сама опция <strong>BOOTPROTO</strong> может принимать следующие значения:</p>
<ul>
<li><code>none</code> – не использовать протокол.</li>
<li><code>bootp</code> – использование протокола <strong>bootp</strong>.</li>
<li><code>dhcp</code> – использование протокола <strong>dhcp</strong> (по умолчанию).</li>
</ul>
<p>Для настройки статического IP необходимо установит <strong>BOOTPROTO</strong> в <code>none</code> и дописать в конец файла опции:</p>
<ul>
<li><code>IPADDR</code> - IP адрес.</li>
<li><code>PREFIX</code> - маска сети.</li>
<li><code>GATEWAY</code> - шлюз сети.</li>
<li><code>DNS</code> - серверы DNS.</li>
</ul>
<p>Например:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-625a02d8d1df6a12b33204131526fe86"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">TYPE</span><span class="o">=</span><span class="s">&#34;Ethernet&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">PROXY_METHOD</span><span class="o">=</span><span class="s">&#34;none&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">BROWSER_ONLY</span><span class="o">=</span><span class="s">&#34;no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">BOOTPROTO</span><span class="o">=</span><span class="s">&#34;none&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DEFROUTE</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV4_FAILURE_FATAL</span><span class="o">=</span><span class="s">&#34;no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6INIT</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_AUTOCONF</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_DEFROUTE</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_FAILURE_FATAL</span><span class="o">=</span><span class="s">&#34;no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_ADDR_GEN_MODE</span><span class="o">=</span><span class="s">&#34;stable-privacy&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">NAME</span><span class="o">=</span><span class="s">&#34;enp1s0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">UUID</span><span class="o">=</span><span class="s">&#34;&lt;DEVICE_ID&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DEVICE</span><span class="o">=</span><span class="s">&#34;enp1s0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">ONBOOT</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPADDR</span><span class="o">=</span><span class="s">&#34;192.168.10.55&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">PREFIX</span><span class="o">=</span><span class="s">&#34;24&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">GATEWAY</span><span class="o">=</span><span class="s">&#34;192.168.10.1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DNS1</span><span class="o">=</span><span class="s">&#34;192.168.11.1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DNS1</span><span class="o">=</span><span class="s">&#34;192.168.12.1&#34;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-625a02d8d1df6a12b33204131526fe86"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>После указания всех параметров, необходимо перезапустить интерфейс:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-196eff20329492dfe64a60a15a9fedb2"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-196eff20329492dfe64a60a15a9fedb2"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con down enp1s0 &amp;&amp; nmcli con up enp1s0</code></pre></div>
  </div>
</div>
<h2 id="настройка-ip-при-помощи-network-manager-cli-nmcli">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-ip-%d0%bf%d1%80%d0%b8-%d0%bf%d0%be%d0%bc%d0%be%d1%89%d0%b8-network-manager-cli-nmcli">Настройка IP при помощи Network Manager CLI (nmcli)</a>
</h2><p>Установка IP адреса:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-8effb60b23a046b17dbfafcd689154fd"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-8effb60b23a046b17dbfafcd689154fd"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.addresses &#39;192.168.10.55/24&#39;</code></pre></div>
  </div>
</div>
<p>Установка шлюза:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-19a2220b28b9a24c2f8cc948618715c8"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-19a2220b28b9a24c2f8cc948618715c8"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.gateway &#39;192.168.10.1&#39;</code></pre></div>
  </div>
</div>
<p>Установка DNS:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2cf57c65288479bbba4f6980dd2a7872"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-2cf57c65288479bbba4f6980dd2a7872"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.dns &#39;192.168.11.1&#39;</code></pre></div>
  </div>
</div>
<p>Установка <strong>BOOTPROTO</strong> в <code>none</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-e86e68f2eeab1c1df4761bf4b307dcc8"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-e86e68f2eeab1c1df4761bf4b307dcc8"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.method &#39;manual&#39;</code></pre></div>
  </div>
</div>
<p>Перезапуск интерфейса:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f77f2573f8f6a7df3fc54ea6f9f8491e"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-f77f2573f8f6a7df3fc54ea6f9f8491e"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con down enp1s0 &amp;&amp; nmcli con up enp1s0</code></pre></div>
  </div>
</div>]]></content:encoded><turbo:source/><turbo:topic>Настройка статического IP адреса</turbo:topic><turbo:content><![CDATA[<p>Рассмотрим различные способы настройки статического IP адреса в дистрибутивах Linux. Способы различаются в зависимости от пакетной базы дистрибутивов. Например, настройка статического IP в RHEL-based дистрибутиве будет отличаться от настройки в DEB-based дистрибутиве.</p>
<h2 id="подготовка">
  <a class="link-body-emphasis" href="#%d0%bf%d0%be%d0%b4%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%ba%d0%b0">Подготовка</a>
</h2><p>Смотрим текущие сетевые устройства и соединения:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-019d3447bc04e385ef7931eb425ed9cf"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-019d3447bc04e385ef7931eb425ed9cf"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">ip a

1: lo: &lt;loopback,up,lower_up&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
  link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
  inet 127.0.0.1/8 scope host lo
2: enp1s0: &lt;broadcast,multicast,up,lower_up&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
  link/ether xx:xx:xx:xx:xx:xx brd ff:ff:ff:ff:ff:ff
  inet 192.168.10.123/24 brd 192.168.10.255 scope global dynamic noprefixroute enp1s0</code></pre></div>
  </div>
</div>
<h2 id="настройка-ip-в-rhel-based-дистрибутивах">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-ip-%d0%b2-rhel-based-%d0%b4%d0%b8%d1%81%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%82%d0%b8%d0%b2%d0%b0%d1%85">Настройка IP в RHEL-based дистрибутивах</a>
</h2><p>В директории <code>/etc/sysconfig/network-scripts</code> находятся конфигурационные файлы для сетевых интерфейсов. Имя файла состоит из префикса <code>ifcfg</code> и имени интерфейса. Например, содержимое файла для интерфейса <code>enp1s0</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3e0b2568d35583722a3d746df10a7f05"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-3e0b2568d35583722a3d746df10a7f05"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">cat /etc/sysconfig/network-scripts/ifcfg-enp1s0

TYPE=&#34;Ethernet&#34;
PROXY_METHOD=&#34;none&#34;
BROWSER_ONLY=&#34;no&#34;
BOOTPROTO=&#34;dhcp&#34;
DEFROUTE=&#34;yes&#34;
IPV4_FAILURE_FATAL=&#34;no&#34;
IPV6INIT=&#34;yes&#34;
IPV6_AUTOCONF=&#34;yes&#34;
IPV6_DEFROUTE=&#34;yes&#34;
IPV6_FAILURE_FATAL=&#34;no&#34;
IPV6_ADDR_GEN_MODE=&#34;stable-privacy&#34;
NAME=&#34;enp1s0&#34;
UUID=&#34;&lt;DEVICE_ID&gt;&#34;
DEVICE=&#34;enp1s0&#34;
ONBOOT=&#34;yes&#34;</code></pre></div>
  </div>
</div>
<p>Обратим внимание на опцию <strong>BOOTPROTO</strong>. По умолчанию, в опции <strong>BOOTPROTO</strong> прописано <code>dhcp</code>. Это означает, что сетевой интерфейс получает информацию о сети автоматически от DHCP. Сама опция <strong>BOOTPROTO</strong> может принимать следующие значения:</p>
<ul>
<li><code>none</code> – не использовать протокол.</li>
<li><code>bootp</code> – использование протокола <strong>bootp</strong>.</li>
<li><code>dhcp</code> – использование протокола <strong>dhcp</strong> (по умолчанию).</li>
</ul>
<p>Для настройки статического IP необходимо установит <strong>BOOTPROTO</strong> в <code>none</code> и дописать в конец файла опции:</p>
<ul>
<li><code>IPADDR</code> - IP адрес.</li>
<li><code>PREFIX</code> - маска сети.</li>
<li><code>GATEWAY</code> - шлюз сети.</li>
<li><code>DNS</code> - серверы DNS.</li>
</ul>
<p>Например:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-ini">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-625a02d8d1df6a12b33204131526fe86"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="na">TYPE</span><span class="o">=</span><span class="s">&#34;Ethernet&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">PROXY_METHOD</span><span class="o">=</span><span class="s">&#34;none&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">BROWSER_ONLY</span><span class="o">=</span><span class="s">&#34;no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">BOOTPROTO</span><span class="o">=</span><span class="s">&#34;none&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DEFROUTE</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV4_FAILURE_FATAL</span><span class="o">=</span><span class="s">&#34;no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6INIT</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_AUTOCONF</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_DEFROUTE</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_FAILURE_FATAL</span><span class="o">=</span><span class="s">&#34;no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPV6_ADDR_GEN_MODE</span><span class="o">=</span><span class="s">&#34;stable-privacy&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">NAME</span><span class="o">=</span><span class="s">&#34;enp1s0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">UUID</span><span class="o">=</span><span class="s">&#34;&lt;DEVICE_ID&gt;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DEVICE</span><span class="o">=</span><span class="s">&#34;enp1s0&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">ONBOOT</span><span class="o">=</span><span class="s">&#34;yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">IPADDR</span><span class="o">=</span><span class="s">&#34;192.168.10.55&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">PREFIX</span><span class="o">=</span><span class="s">&#34;24&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">GATEWAY</span><span class="o">=</span><span class="s">&#34;192.168.10.1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DNS1</span><span class="o">=</span><span class="s">&#34;192.168.11.1&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">DNS1</span><span class="o">=</span><span class="s">&#34;192.168.12.1&#34;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-625a02d8d1df6a12b33204131526fe86"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>После указания всех параметров, необходимо перезапустить интерфейс:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-196eff20329492dfe64a60a15a9fedb2"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-196eff20329492dfe64a60a15a9fedb2"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con down enp1s0 &amp;&amp; nmcli con up enp1s0</code></pre></div>
  </div>
</div>
<h2 id="настройка-ip-при-помощи-network-manager-cli-nmcli">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b0%d1%81%d1%82%d1%80%d0%be%d0%b9%d0%ba%d0%b0-ip-%d0%bf%d1%80%d0%b8-%d0%bf%d0%be%d0%bc%d0%be%d1%89%d0%b8-network-manager-cli-nmcli">Настройка IP при помощи Network Manager CLI (nmcli)</a>
</h2><p>Установка IP адреса:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-8effb60b23a046b17dbfafcd689154fd"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-8effb60b23a046b17dbfafcd689154fd"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.addresses &#39;192.168.10.55/24&#39;</code></pre></div>
  </div>
</div>
<p>Установка шлюза:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-19a2220b28b9a24c2f8cc948618715c8"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-19a2220b28b9a24c2f8cc948618715c8"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.gateway &#39;192.168.10.1&#39;</code></pre></div>
  </div>
</div>
<p>Установка DNS:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2cf57c65288479bbba4f6980dd2a7872"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-2cf57c65288479bbba4f6980dd2a7872"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.dns &#39;192.168.11.1&#39;</code></pre></div>
  </div>
</div>
<p>Установка <strong>BOOTPROTO</strong> в <code>none</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-e86e68f2eeab1c1df4761bf4b307dcc8"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-e86e68f2eeab1c1df4761bf4b307dcc8"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con mod enp1s0 ipv4.method &#39;manual&#39;</code></pre></div>
  </div>
</div>
<p>Перезапуск интерфейса:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f77f2573f8f6a7df3fc54ea6f9f8491e"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-f77f2573f8f6a7df3fc54ea6f9f8491e"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">nmcli con down enp1s0 &amp;&amp; nmcli con up enp1s0</code></pre></div>
  </div>
</div>]]></turbo:content><pubDate>Sat, 15 May 2021 17:08:30 +0000</pubDate><category>Терминал</category><category>Linux</category><category>Сеть</category><category>В доработке</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Перезагрузка и выключение Linux</title><link>https://lib.onl/ru/posts/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/05/86db7f3a-17ce-502b-b21d-337c3bba5d58/</guid><description>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</description><media:content medium="image" url="https://images.unsplash.com/photo-1611780427130-996d9882dc41" width="1600" height="900"/><content:encoded><![CDATA[<p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</p>
<h2 id="halt--poweroff--reboot">
  <a class="link-body-emphasis" href="#halt--poweroff--reboot">halt / poweroff / reboot</a>
</h2><p>Старые команды по управлению питанием системы. Опции у этих команд одинаковые. Отдаются команды из под пользователя <strong>root</strong>. Команда <code>halt</code> приостанавливает все функции CPU, но сам ПК остаётся включённым. Команда <code>poweroff</code> отключает питание ПК, посылая сигнал по ACPI. Команда <code>reboot</code> даёт команду системе на перезагрузку.</p>






    
    








<div class="shortcode shortcode-alert">
  <div class="alert alert-success d-flex overflow-hidden" role="alert">
    <div class="flex-shrink-0 align-self-center">
      <i class="fas fa-lightbulb fa-fw fa-2x"></i>
    </div>
    <div class="flex-grow-1 ms-3 overflow-hidden">
        <p>Команда <code>halt</code> в современных ОС полностью прекращает работу системы. На системах с <strong>systemd</strong> команда <code>halt</code> является устаревшей и представляет собой символьную ссылку на утилиту <code>systemctl</code>.</p>

    </div>
  </div>
</div>

<p>Предпочтительнее использовать команду <code>shutdown</code>, о которой я расскажу ниже.</p>
<h3 id="синтаксис">
  <a class="link-body-emphasis" href="#%d1%81%d0%b8%d0%bd%d1%82%d0%b0%d0%ba%d1%81%d0%b8%d1%81">Синтаксис</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0283a0defd10ce36646f9e3e42466a30"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">halt [OPTION]
</span></span><span class="line"><span class="cl">poweroff [OPTION]
</span></span><span class="line"><span class="cl">reboot [OPTION]</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0283a0defd10ce36646f9e3e42466a30"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h4 id="некоторые-опции">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8">Некоторые опции</a>
</h4><ul>
<li><code>-f</code> - принудительное выполнение команды.</li>
<li><code>-p</code> - сообщает команде <code>halt</code> действовать как <code>poweroff</code>.</li>
<li><code>-w</code> - не выполнять никакие действия, только записать в журнал <code>/var/log/wtmp</code> сообщение о завершении работы.</li>
</ul>
<h2 id="shutdown">
  <a class="link-body-emphasis" href="#shutdown">shutdown</a>
</h2><p>За остановку работы ПК отвечает команда <code>shutdown</code>. Она поддерживает несколько опций, через которые задаётся определённое действие. К примеру:</p>
<ul>
<li><code>-r</code> - перезагрузка.</li>
<li><code>-h</code> - выключение.</li>
<li><code>-c</code> - отмена запланированных действий на перезагрузку или выключение.</li>
</ul>
<p>Для запланированной перезагрузки ПК через 1 минуту используется опция <code>-r</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d2dd5a75b0be1a7dc5e13a6fb40e683b"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-d2dd5a75b0be1a7dc5e13a6fb40e683b"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r</code></pre></div>
  </div>
</div>
<p>Команда <code>shutdown</code> поддерживает указание времени, когда ПК должен быть перезагружен или выключен. К примеру, перезагрузить через 5 минут:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f41fd4f71e832bf240646093682f55b2"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-f41fd4f71e832bf240646093682f55b2"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r +5</code></pre></div>
  </div>
</div>
<p>Также можно указать конкретное время для перезагрузки. Например, перезагрузить ПК в 18:30:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9ef697b74a62d60d7c3fc95dbbc72311"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-9ef697b74a62d60d7c3fc95dbbc72311"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r 18:30</code></pre></div>
  </div>
</div>
<p>Если перезагрузка или выключение уже запланированы, их можно отменить опцией <code>-c</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-53283bf8579c97c86c0c3997a31016f6"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-53283bf8579c97c86c0c3997a31016f6"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -c</code></pre></div>
  </div>
</div>
<p>Для немедленной перезагрузки ПК, вместо времени можно ввести <code>now</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5ca18157c9f9a2c067aadf6ac5b8a8fe"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-5ca18157c9f9a2c067aadf6ac5b8a8fe"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r now</code></pre></div>
  </div>
</div>
<p>Чтобы выключить ПК через 1 минуту, используется опция <code>-h</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4b8c033ccb4d2e36a15768e8f62f5b8e"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-4b8c033ccb4d2e36a15768e8f62f5b8e"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -h</code></pre></div>
  </div>
</div>
<p>На этом всё, ничего сложного нет. <span class="shortcode shortcode-emoji">😄</span></p>]]></content:encoded><turbo:source/><turbo:topic>Перезагрузка и выключение Linux</turbo:topic><turbo:content><![CDATA[<p>Нередко приходится завершать работу системы через терминал, например, когда компьютер является удалённой рабочей станцией или сервером и вся работа происходит через терминал. В этой статье я постараюсь привести информацию о командах, позволяющих удалённо завершить работу системы.</p>
<h2 id="halt--poweroff--reboot">
  <a class="link-body-emphasis" href="#halt--poweroff--reboot">halt / poweroff / reboot</a>
</h2><p>Старые команды по управлению питанием системы. Опции у этих команд одинаковые. Отдаются команды из под пользователя <strong>root</strong>. Команда <code>halt</code> приостанавливает все функции CPU, но сам ПК остаётся включённым. Команда <code>poweroff</code> отключает питание ПК, посылая сигнал по ACPI. Команда <code>reboot</code> даёт команду системе на перезагрузку.</p>






    
    








<div class="shortcode shortcode-alert">
  <div class="alert alert-success d-flex overflow-hidden" role="alert">
    <div class="flex-shrink-0 align-self-center">
      <i class="fas fa-lightbulb fa-fw fa-2x"></i>
    </div>
    <div class="flex-grow-1 ms-3 overflow-hidden">
        <p>Команда <code>halt</code> в современных ОС полностью прекращает работу системы. На системах с <strong>systemd</strong> команда <code>halt</code> является устаревшей и представляет собой символьную ссылку на утилиту <code>systemctl</code>.</p>

    </div>
  </div>
</div>

<p>Предпочтительнее использовать команду <code>shutdown</code>, о которой я расскажу ниже.</p>
<h3 id="синтаксис">
  <a class="link-body-emphasis" href="#%d1%81%d0%b8%d0%bd%d1%82%d0%b0%d0%ba%d1%81%d0%b8%d1%81">Синтаксис</a>
</h3>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0283a0defd10ce36646f9e3e42466a30"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">halt [OPTION]
</span></span><span class="line"><span class="cl">poweroff [OPTION]
</span></span><span class="line"><span class="cl">reboot [OPTION]</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0283a0defd10ce36646f9e3e42466a30"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h4 id="некоторые-опции">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8">Некоторые опции</a>
</h4><ul>
<li><code>-f</code> - принудительное выполнение команды.</li>
<li><code>-p</code> - сообщает команде <code>halt</code> действовать как <code>poweroff</code>.</li>
<li><code>-w</code> - не выполнять никакие действия, только записать в журнал <code>/var/log/wtmp</code> сообщение о завершении работы.</li>
</ul>
<h2 id="shutdown">
  <a class="link-body-emphasis" href="#shutdown">shutdown</a>
</h2><p>За остановку работы ПК отвечает команда <code>shutdown</code>. Она поддерживает несколько опций, через которые задаётся определённое действие. К примеру:</p>
<ul>
<li><code>-r</code> - перезагрузка.</li>
<li><code>-h</code> - выключение.</li>
<li><code>-c</code> - отмена запланированных действий на перезагрузку или выключение.</li>
</ul>
<p>Для запланированной перезагрузки ПК через 1 минуту используется опция <code>-r</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-d2dd5a75b0be1a7dc5e13a6fb40e683b"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-d2dd5a75b0be1a7dc5e13a6fb40e683b"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r</code></pre></div>
  </div>
</div>
<p>Команда <code>shutdown</code> поддерживает указание времени, когда ПК должен быть перезагружен или выключен. К примеру, перезагрузить через 5 минут:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f41fd4f71e832bf240646093682f55b2"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-f41fd4f71e832bf240646093682f55b2"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r +5</code></pre></div>
  </div>
</div>
<p>Также можно указать конкретное время для перезагрузки. Например, перезагрузить ПК в 18:30:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-9ef697b74a62d60d7c3fc95dbbc72311"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-9ef697b74a62d60d7c3fc95dbbc72311"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r 18:30</code></pre></div>
  </div>
</div>
<p>Если перезагрузка или выключение уже запланированы, их можно отменить опцией <code>-c</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-53283bf8579c97c86c0c3997a31016f6"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-53283bf8579c97c86c0c3997a31016f6"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -c</code></pre></div>
  </div>
</div>
<p>Для немедленной перезагрузки ПК, вместо времени можно ввести <code>now</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-5ca18157c9f9a2c067aadf6ac5b8a8fe"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-5ca18157c9f9a2c067aadf6ac5b8a8fe"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -r now</code></pre></div>
  </div>
</div>
<p>Чтобы выключить ПК через 1 минуту, используется опция <code>-h</code>:</p>






<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux-root">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 text-danger">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4b8c033ccb4d2e36a15768e8f62f5b8e"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-4b8c033ccb4d2e36a15768e8f62f5b8e"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">shutdown -h</code></pre></div>
  </div>
</div>
<p>На этом всё, ничего сложного нет. <span class="shortcode shortcode-emoji">😄</span></p>]]></turbo:content><pubDate>Wed, 12 May 2021 14:20:47 +0000</pubDate><category>Терминал</category><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Рекурсивное изменение прав доступа на файлы и директории</title><link>https://lib.onl/ru/posts/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/05/4a3b0a31-0d3d-5a9b-8c07-7e3b4f80669e/</guid><description>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</description><media:content medium="image" url="https://images.unsplash.com/photo-1569235186275-626cb53b83ce" width="1600" height="900"/><content:encoded><![CDATA[<p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p>
<p>Изменение прав доступа осуществляется при помощи команды <code>chmod</code>, рекурсивное при добавлении опции <code>-R</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-81736b44bf4fd8e8e0c670862f201985"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">chmod -R MODE DIR</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-81736b44bf4fd8e8e0c670862f201985"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ul>
<li><code>-R</code> - рекурсивный обход директорий и файлов.</li>
<li><code>MODE</code> - набор прав доступа для их установки.</li>
<li><code>DIR</code> - файл или директория, у которых необходимо установить определённые права доступа.</li>
</ul>
<p>В итоге, команда должна выглядеть так:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-2cbbc7f0c730581c4ad995f8ce907aa3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">chmod -R <span class="m">755</span> /var/www/html</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2cbbc7f0c730581c4ad995f8ce907aa3"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Но, стоит учитывать, что таким образом директории и файлы примут одинаковые права доступа. Чтобы избежать этого, можно воспользоваться командой <code>find</code>, которая отфильтрует директории и файлы друг от друга:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-220c73e46bbd66a1b505f414ef3a86b4"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type d -exec chmod <span class="m">755</span> <span class="o">{}</span> <span class="se">\;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-220c73e46bbd66a1b505f414ef3a86b4"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-6c408ce65f002a3060e69061eb21d05f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type f -exec chmod <span class="m">644</span> <span class="o">{}</span> <span class="se">\;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-6c408ce65f002a3060e69061eb21d05f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Команда <code>find</code> ищет директории (<code>-type d</code>) и файлы (<code>-type f</code>) и скармливает их команде <code>chmod</code>, а та, в свою очередь, уже расставляет права доступа. При использовании <code>-exec</code>, <code>chmod</code> выполняется для каждого найденного элемента поочерёдно. Можно оптимизировать и записать с использованием <code>xargs</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-73d1a75f6fb7e4450dd4a8a4b85148ba"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type d -print0 <span class="p">|</span> xargs -0 chmod <span class="m">755</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-73d1a75f6fb7e4450dd4a8a4b85148ba"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-116d5ba47c79efaba8585e82c6962776"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type f -print0 <span class="p">|</span> xargs -0 chmod <span class="m">644</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-116d5ba47c79efaba8585e82c6962776"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>При <code>xargs</code>, <code>chmod</code> выполняется сразу для нескольких записей одновременно, как сообщает <strong>Daniel Miessler</strong>:</p>

    

    <div class="shortcode shortcode-quote">
      <figure>
        <blockquote class="blockquote">
            <p>This is where -exec breaks down and xargs shows its superiority. When you use -exec to do the work you run a separate instance of the called program for each element of input. So if find comes up with 10,000 results, you run exec 10,000 times. With xargs, you build up the input into bundles and run them through the command as few times as possible, which is often just once. When dealing with hundreds or thousands of elements this is a big win for xargs.</p>

        </blockquote>
          
            <figcaption class="blockquote-footer">
              <cite>
                  
                    <a href="https://danielmiessler.com/blog/linux-xargs-vs-exec/" target="_blank" rel="noopener nofollow">Daniel Miessler</a>
                  
              </cite>
            </figcaption>
          
      </figure>
    </div>
<p>Если необходимо запустить рекурсивное изменение прав доступа начиная с текущей директории, то <code>/var/www/html</code> необходимо поменять на точку:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-8dce2f1df9235c866b0459a4f0817591"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find . -type d -print0 <span class="p">|</span> xargs -0 chmod <span class="m">755</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-8dce2f1df9235c866b0459a4f0817591"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3df931e7948f055b02aa49b6c9b4d29d"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find . -type f -print0 <span class="p">|</span> xargs -0 chmod <span class="m">644</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3df931e7948f055b02aa49b6c9b4d29d"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>Рекурсивное изменение прав доступа на файлы и директории</turbo:topic><turbo:content><![CDATA[<p>Права доступа к файлам и директориям является неотъемлемой частью любой операционной системы. И в этой статье описаны возможности по рекурсивной настройке этих прав доступа.</p>
<p>Изменение прав доступа осуществляется при помощи команды <code>chmod</code>, рекурсивное при добавлении опции <code>-R</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-81736b44bf4fd8e8e0c670862f201985"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">chmod -R MODE DIR</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-81736b44bf4fd8e8e0c670862f201985"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<ul>
<li><code>-R</code> - рекурсивный обход директорий и файлов.</li>
<li><code>MODE</code> - набор прав доступа для их установки.</li>
<li><code>DIR</code> - файл или директория, у которых необходимо установить определённые права доступа.</li>
</ul>
<p>В итоге, команда должна выглядеть так:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-2cbbc7f0c730581c4ad995f8ce907aa3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">chmod -R <span class="m">755</span> /var/www/html</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-2cbbc7f0c730581c4ad995f8ce907aa3"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Но, стоит учитывать, что таким образом директории и файлы примут одинаковые права доступа. Чтобы избежать этого, можно воспользоваться командой <code>find</code>, которая отфильтрует директории и файлы друг от друга:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-220c73e46bbd66a1b505f414ef3a86b4"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type d -exec chmod <span class="m">755</span> <span class="o">{}</span> <span class="se">\;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-220c73e46bbd66a1b505f414ef3a86b4"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-6c408ce65f002a3060e69061eb21d05f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type f -exec chmod <span class="m">644</span> <span class="o">{}</span> <span class="se">\;</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-6c408ce65f002a3060e69061eb21d05f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Команда <code>find</code> ищет директории (<code>-type d</code>) и файлы (<code>-type f</code>) и скармливает их команде <code>chmod</code>, а та, в свою очередь, уже расставляет права доступа. При использовании <code>-exec</code>, <code>chmod</code> выполняется для каждого найденного элемента поочерёдно. Можно оптимизировать и записать с использованием <code>xargs</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-73d1a75f6fb7e4450dd4a8a4b85148ba"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type d -print0 <span class="p">|</span> xargs -0 chmod <span class="m">755</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-73d1a75f6fb7e4450dd4a8a4b85148ba"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-116d5ba47c79efaba8585e82c6962776"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find /var/www/html -type f -print0 <span class="p">|</span> xargs -0 chmod <span class="m">644</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-116d5ba47c79efaba8585e82c6962776"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>При <code>xargs</code>, <code>chmod</code> выполняется сразу для нескольких записей одновременно, как сообщает <strong>Daniel Miessler</strong>:</p>

    

    <div class="shortcode shortcode-quote">
      <figure>
        <blockquote class="blockquote">
            <p>This is where -exec breaks down and xargs shows its superiority. When you use -exec to do the work you run a separate instance of the called program for each element of input. So if find comes up with 10,000 results, you run exec 10,000 times. With xargs, you build up the input into bundles and run them through the command as few times as possible, which is often just once. When dealing with hundreds or thousands of elements this is a big win for xargs.</p>

        </blockquote>
          
            <figcaption class="blockquote-footer">
              <cite>
                  
                    <a href="https://danielmiessler.com/blog/linux-xargs-vs-exec/" target="_blank" rel="noopener nofollow">Daniel Miessler</a>
                  
              </cite>
            </figcaption>
          
      </figure>
    </div>
<p>Если необходимо запустить рекурсивное изменение прав доступа начиная с текущей директории, то <code>/var/www/html</code> необходимо поменять на точку:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-8dce2f1df9235c866b0459a4f0817591"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find . -type d -print0 <span class="p">|</span> xargs -0 chmod <span class="m">755</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-8dce2f1df9235c866b0459a4f0817591"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>










  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3df931e7948f055b02aa49b6c9b4d29d"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">find . -type f -print0 <span class="p">|</span> xargs -0 chmod <span class="m">644</span></span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3df931e7948f055b02aa49b6c9b4d29d"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Sun, 09 May 2021 17:15:26 +0000</pubDate><category>Терминал</category><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Разнообразие команд ls*</title><link>https://lib.onl/ru/posts/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2021/05/5ba03b8a-0505-5d80-bfad-f7a4d66f07b0/</guid><description>Команда ls и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах ls*, которые присутствуют в большинстве дистрибутивов Linux.</description><media:content medium="image" url="https://images.unsplash.com/photo-1507925921958-8a62f3d1a50d" width="1600" height="900"/><content:encoded><![CDATA[<p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве дистрибутивов Linux.</p>
<p>Знаю, что есть <code>lsscsi</code>, <code>lsusb</code> и т.п., которые появляются в системе с установкой дополнительных пакетов, но я подобные команды рассматривать не стал. Хотя, по возможности, статью буду дополнять.</p>
<h2 id="ls">
  <a class="link-body-emphasis" href="#ls">ls</a>
</h2><p>Команда позволяет вывести список директорий и файлов в текущем каталоге.</p>
<h3 id="некоторые-опции">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8">Некоторые опции</a>
</h3><ul>
<li><code>-l</code> - использовать длинный формат отображения.</li>
<li><code>-S</code> - сортировать по размеру файла.</li>
<li><code>-t</code> - сортировать по времени модификации.</li>
<li><code>-a</code> - показать ВСЕ файлы, в том числе скрытые.</li>
<li><code>-R</code> - рекурсивное отображение директорий и файлов в них.</li>
<li><code>-h</code> - отображение размеров файлов в человеко-читаемом формате.</li>
<li><code>--hide='*.txt' -l</code> - игнорировать файлы с форматом <code>.txt</code>.</li>
</ul>
<h2 id="lscpu">
  <a class="link-body-emphasis" href="#lscpu">lscpu</a>
</h2><p>Отображение доступной информации об установленном процессоре.</p>
<h3 id="некоторые-опции-1">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8-1">Некоторые опции</a>
</h3><ul>
<li><code>-a</code> - показать ВСЕ CPU, как включённые, так и отключённые.</li>
</ul>
<h3 id="пример-использования">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b1259996b46bfecbd84d2a9f693f7525"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-b1259996b46bfecbd84d2a9f693f7525"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lscpu

Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
Address sizes:                   39 bits physical, 48 bits virtual
CPU(s):                          12
On-line CPU(s) list:             0-11
Thread(s) per core:              2
Core(s) per socket:              6
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           165
Model name:                      Intel(R) Core(TM) i5-10400 CPU @ 2.90GHz
Stepping:                        5
CPU MHz:                         2900.000
CPU max MHz:                     4300.0000
CPU min MHz:                     800.0000
BogoMIPS:                        5799.77
L1d cache:                       192 KiB
L1i cache:                       192 KiB
L2 cache:                        1.5 MiB
L3 cache:                        12 MiB</code></pre></div>
  </div>
</div>
<h2 id="lspci">
  <a class="link-body-emphasis" href="#lspci">lspci</a>
</h2><p>Отображение информации по шине PCI и подключённых к ней устройствах.</p>
<h3 id="пример-использования-1">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-1">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f0ee44ae371a35190d9a09e5a179de86"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-f0ee44ae371a35190d9a09e5a179de86"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lspci

00:00.0 Host bridge: Intel Corporation Comet Lake-S 6c Host Bridge/DRAM Controller (rev 05)
00:01.0 PCI bridge: Intel Corporation 6th-10th Gen Core Processor PCIe Controller (x16) (rev 05)
00:14.0 USB controller: Intel Corporation Comet Lake USB 3.1 xHCI Host Controller
00:14.2 RAM memory: Intel Corporation Comet Lake PCH Shared SRAM
00:14.3 Network controller: Intel Corporation Comet Lake PCH CNVi WiFi
00:15.0 Serial bus controller [0c80]: Intel Corporation Comet Lake PCH Serial IO I2C Controller #0
00:15.1 Serial bus controller [0c80]: Intel Corporation Comet Lake PCH Serial IO I2C Controller #1
00:16.0 Communication controller: Intel Corporation Comet Lake HECI Controller
00:17.0 SATA controller: Intel Corporation Comet Lake SATA AHCI Controller
00:1d.0 PCI bridge: Intel Corporation Comet Lake PCI Express Root Port #9 (rev f0)
00:1f.0 ISA bridge: Intel Corporation Device 0684
00:1f.3 Audio device: Intel Corporation Comet Lake PCH cAVS
00:1f.4 SMBus: Intel Corporation Comet Lake PCH SMBus Controller
00:1f.5 Serial bus controller [0c80]: Intel Corporation Comet Lake PCH SPI Controller
00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (11) I219-V
01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Baffin [Radeon RX 550 640SP / RX 560/560X] (rev cf)
01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Baffin HDMI/DP Audio [Radeon RX 550 640SP / RX 560/560X]</code></pre></div>
  </div>
</div>
<h2 id="lsblk">
  <a class="link-body-emphasis" href="#lsblk">lsblk</a>
</h2><p>Отображение информации по блочным устройствам.</p>
<h3 id="пример-использования-2">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-2">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-89797293ee865c5912ace537c31d85d3"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-89797293ee865c5912ace537c31d85d3"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lsblk

NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 232.9G  0 disk
├─sda1   8:1    0   200M  0 part /boot/efi
├─sda2   8:2    0     4G  0 part /boot
├─sda3   8:3    0    64G  0 part /
├─sda4   8:4    0    32G  0 part [SWAP]
├─sda5   8:5    0    16G  0 part /tmp
└─sda6   8:6    0 116.7G  0 part /home
sdb      8:16   0 465.8G  0 disk
└─sdb1   8:17   0 465.8G  0 part /home/storage.01
sdc      8:32   1 119.5G  0 disk
└─sdc1   8:33   1 119.5G  0 part /run/media/user-0001/USB01
sdd      8:48   1  59.8G  0 disk
├─sdd1   8:49   1  59.7G  0 part /run/media/user-0001/Ventoy
└─sdd2   8:50   1    32M  0 part /run/media/user-0001/VTOYEFI
zram0  252:0    0     4G  0 disk [SWAP]</code></pre></div>
  </div>
</div>
<h2 id="lsmod">
  <a class="link-body-emphasis" href="#lsmod">lsmod</a>
</h2><p>Отображение модулей ядра, загруженных в системе.</p>
<h3 id="пример-использования-3">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-3">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4a60a8dc824c5fd43386c7f0d581cb73"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-4a60a8dc824c5fd43386c7f0d581cb73"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lsmod

Module                  Size  Used by
exfat                  81920  1
f2fs                  700416  1
uas                    32768  0
usb_storage            81920  4 uas
snd_seq_dummy          16384  0
rfcomm                 90112  0
snd_hrtimer            16384  1
xt_CHECKSUM            16384  1
xt_MASQUERADE          20480  3
xt_conntrack           16384  1
ipt_REJECT             16384  2
nft_compat             20480  16
nf_nat_tftp            16384  0
nft_objref             16384  1
nf_conntrack_tftp      20480  3 nf_nat_tftp
nft_counter            16384  33
tun                    57344  1
bridge                294912  0
stp                    16384  1 bridge
llc                    16384  2 bridge,stp</code></pre></div>
  </div>
</div>]]></content:encoded><turbo:source/><turbo:topic>Разнообразие команд ls*</turbo:topic><turbo:content><![CDATA[<p>Команда <code>ls</code> и её разновидности позволяют вывести список директорий, файлов, устройств и различной другой информации. Я расскажу только о некоторых командах <code>ls*</code>, которые присутствуют в большинстве дистрибутивов Linux.</p>
<p>Знаю, что есть <code>lsscsi</code>, <code>lsusb</code> и т.п., которые появляются в системе с установкой дополнительных пакетов, но я подобные команды рассматривать не стал. Хотя, по возможности, статью буду дополнять.</p>
<h2 id="ls">
  <a class="link-body-emphasis" href="#ls">ls</a>
</h2><p>Команда позволяет вывести список директорий и файлов в текущем каталоге.</p>
<h3 id="некоторые-опции">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8">Некоторые опции</a>
</h3><ul>
<li><code>-l</code> - использовать длинный формат отображения.</li>
<li><code>-S</code> - сортировать по размеру файла.</li>
<li><code>-t</code> - сортировать по времени модификации.</li>
<li><code>-a</code> - показать ВСЕ файлы, в том числе скрытые.</li>
<li><code>-R</code> - рекурсивное отображение директорий и файлов в них.</li>
<li><code>-h</code> - отображение размеров файлов в человеко-читаемом формате.</li>
<li><code>--hide='*.txt' -l</code> - игнорировать файлы с форматом <code>.txt</code>.</li>
</ul>
<h2 id="lscpu">
  <a class="link-body-emphasis" href="#lscpu">lscpu</a>
</h2><p>Отображение доступной информации об установленном процессоре.</p>
<h3 id="некоторые-опции-1">
  <a class="link-body-emphasis" href="#%d0%bd%d0%b5%d0%ba%d0%be%d1%82%d0%be%d1%80%d1%8b%d0%b5-%d0%be%d0%bf%d1%86%d0%b8%d0%b8-1">Некоторые опции</a>
</h3><ul>
<li><code>-a</code> - показать ВСЕ CPU, как включённые, так и отключённые.</li>
</ul>
<h3 id="пример-использования">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-b1259996b46bfecbd84d2a9f693f7525"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-b1259996b46bfecbd84d2a9f693f7525"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lscpu

Architecture:                    x86_64
CPU op-mode(s):                  32-bit, 64-bit
Byte Order:                      Little Endian
Address sizes:                   39 bits physical, 48 bits virtual
CPU(s):                          12
On-line CPU(s) list:             0-11
Thread(s) per core:              2
Core(s) per socket:              6
Socket(s):                       1
NUMA node(s):                    1
Vendor ID:                       GenuineIntel
CPU family:                      6
Model:                           165
Model name:                      Intel(R) Core(TM) i5-10400 CPU @ 2.90GHz
Stepping:                        5
CPU MHz:                         2900.000
CPU max MHz:                     4300.0000
CPU min MHz:                     800.0000
BogoMIPS:                        5799.77
L1d cache:                       192 KiB
L1i cache:                       192 KiB
L2 cache:                        1.5 MiB
L3 cache:                        12 MiB</code></pre></div>
  </div>
</div>
<h2 id="lspci">
  <a class="link-body-emphasis" href="#lspci">lspci</a>
</h2><p>Отображение информации по шине PCI и подключённых к ней устройствах.</p>
<h3 id="пример-использования-1">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-1">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-f0ee44ae371a35190d9a09e5a179de86"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-f0ee44ae371a35190d9a09e5a179de86"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lspci

00:00.0 Host bridge: Intel Corporation Comet Lake-S 6c Host Bridge/DRAM Controller (rev 05)
00:01.0 PCI bridge: Intel Corporation 6th-10th Gen Core Processor PCIe Controller (x16) (rev 05)
00:14.0 USB controller: Intel Corporation Comet Lake USB 3.1 xHCI Host Controller
00:14.2 RAM memory: Intel Corporation Comet Lake PCH Shared SRAM
00:14.3 Network controller: Intel Corporation Comet Lake PCH CNVi WiFi
00:15.0 Serial bus controller [0c80]: Intel Corporation Comet Lake PCH Serial IO I2C Controller #0
00:15.1 Serial bus controller [0c80]: Intel Corporation Comet Lake PCH Serial IO I2C Controller #1
00:16.0 Communication controller: Intel Corporation Comet Lake HECI Controller
00:17.0 SATA controller: Intel Corporation Comet Lake SATA AHCI Controller
00:1d.0 PCI bridge: Intel Corporation Comet Lake PCI Express Root Port #9 (rev f0)
00:1f.0 ISA bridge: Intel Corporation Device 0684
00:1f.3 Audio device: Intel Corporation Comet Lake PCH cAVS
00:1f.4 SMBus: Intel Corporation Comet Lake PCH SMBus Controller
00:1f.5 Serial bus controller [0c80]: Intel Corporation Comet Lake PCH SPI Controller
00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (11) I219-V
01:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Baffin [Radeon RX 550 640SP / RX 560/560X] (rev cf)
01:00.1 Audio device: Advanced Micro Devices, Inc. [AMD/ATI] Baffin HDMI/DP Audio [Radeon RX 550 640SP / RX 560/560X]</code></pre></div>
  </div>
</div>
<h2 id="lsblk">
  <a class="link-body-emphasis" href="#lsblk">lsblk</a>
</h2><p>Отображение информации по блочным устройствам.</p>
<h3 id="пример-использования-2">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-2">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-89797293ee865c5912ace537c31d85d3"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-89797293ee865c5912ace537c31d85d3"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lsblk

NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0 232.9G  0 disk
├─sda1   8:1    0   200M  0 part /boot/efi
├─sda2   8:2    0     4G  0 part /boot
├─sda3   8:3    0    64G  0 part /
├─sda4   8:4    0    32G  0 part [SWAP]
├─sda5   8:5    0    16G  0 part /tmp
└─sda6   8:6    0 116.7G  0 part /home
sdb      8:16   0 465.8G  0 disk
└─sdb1   8:17   0 465.8G  0 part /home/storage.01
sdc      8:32   1 119.5G  0 disk
└─sdc1   8:33   1 119.5G  0 part /run/media/user-0001/USB01
sdd      8:48   1  59.8G  0 disk
├─sdd1   8:49   1  59.7G  0 part /run/media/user-0001/Ventoy
└─sdd2   8:50   1    32M  0 part /run/media/user-0001/VTOYEFI
zram0  252:0    0     4G  0 disk [SWAP]</code></pre></div>
  </div>
</div>
<h2 id="lsmod">
  <a class="link-body-emphasis" href="#lsmod">lsmod</a>
</h2><p>Отображение модулей ядра, загруженных в системе.</p>
<h3 id="пример-использования-3">
  <a class="link-body-emphasis" href="#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%80-%d0%b8%d1%81%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8f-3">Пример использования</a>
</h3>





<div class="shortcode shortcode-codeblock shortcode-codeblock-terminal
shortcode-codeblock-terminal-linux
shortcode-codeblock-terminal-linux">
  <div class="card mb-3 overflow-hidden" data-bs-theme="dark">
    <div class="card-header">
      <div class="d-flex align-items-center">
        <div class="flex-shrink-0 ">
          <i class="fas fa-terminal fa-fw"></i>
        </div>
        <div class="flex-grow-1 mx-2">
          <h5 class="mb-0">Терминал</h5>
        </div>
        <div class="flex-shrink-0">
          <ul class="list-inline mb-0">
            <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
              <a class="text-body" href="#"
                 data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-4a60a8dc824c5fd43386c7f0d581cb73"
                 role="button" aria-label='Копировать'>
                <i class="fas fa-copy fa-fw"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="clipboard-4a60a8dc824c5fd43386c7f0d581cb73"><pre tabindex="0"><code class="language-terminal" data-lang="terminal">lsmod

Module                  Size  Used by
exfat                  81920  1
f2fs                  700416  1
uas                    32768  0
usb_storage            81920  4 uas
snd_seq_dummy          16384  0
rfcomm                 90112  0
snd_hrtimer            16384  1
xt_CHECKSUM            16384  1
xt_MASQUERADE          20480  3
xt_conntrack           16384  1
ipt_REJECT             16384  2
nft_compat             20480  16
nf_nat_tftp            16384  0
nft_objref             16384  1
nf_conntrack_tftp      20480  3 nf_nat_tftp
nft_counter            16384  33
tun                    57344  1
bridge                294912  0
stp                    16384  1 bridge
llc                    16384  2 bridge,stp</code></pre></div>
  </div>
</div>]]></turbo:content><pubDate>Sun, 09 May 2021 13:44:05 +0000</pubDate><category>Терминал</category><category>В доработке</category><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Первичная настройка UAIK</title><link>https://lib.onl/ru/posts/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2020/06/59781965-afe7-5dd5-9798-d1c5ba6cdafd/</guid><description>После автоматической установки (Kickstart) при помощи UAIK , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</description><media:content medium="image" url="https://images.unsplash.com/photo-1518432031352-d6fc5c10da5a" width="1600" height="900"/><content:encoded><![CDATA[<p>После автоматической установки (Kickstart) при помощи <a title="" href="https://uaik.github.io/" target="_blank" rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p>
<h2 id="включение-графического-режима">
  <a class="link-body-emphasis" href="#%d0%b2%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b3%d1%80%d0%b0%d1%84%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%be%d0%b3%d0%be-%d1%80%d0%b5%d0%b6%d0%b8%d0%bc%d0%b0">Включение графического режима</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0b14c447bdd626d4d70ad879b99a631e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">systemctl set-default graphical.target</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0b14c447bdd626d4d70ad879b99a631e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="создание-пользователя">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f">Создание пользователя</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3348bc221ab09920525dba7e491f6348"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Добавить пользователя.</span>
</span></span><span class="line"><span class="cl">useradd -mc <span class="s2">&#34;User 0001&#34;</span> user-0001
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Установить пароль для пользователя.</span>
</span></span><span class="line"><span class="cl">passwd user-0001</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3348bc221ab09920525dba7e491f6348"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="отключение-пользователя">
  <a class="link-body-emphasis" href="#%d0%be%d1%82%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f">Отключение пользователя</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-046dc4bc5b617c5e565fb9ae963968d5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Отключить пользователя.</span>
</span></span><span class="line"><span class="cl">usermod -L user-0000</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-046dc4bc5b617c5e565fb9ae963968d5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="перемещение-пользователя">
  <a class="link-body-emphasis" href="#%d0%bf%d0%b5%d1%80%d0%b5%d0%bc%d0%b5%d1%89%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f">Перемещение пользователя</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-49252a1ec8eb7490d18c498ec7b1166f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">usermod -md /new_home/user-0001 user-0001</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-49252a1ec8eb7490d18c498ec7b1166f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="работа-с-диском">
  <a class="link-body-emphasis" href="#%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-%d1%81-%d0%b4%d0%b8%d1%81%d0%ba%d0%be%d0%bc">Работа с диском</a>
</h2><p>Чтобы создать на новом диске раздел, необходимо войти в программу <code>parted</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c8caeebf47c44d11ce2ebd38470cc333"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">parted -a optimal /dev/sdb</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c8caeebf47c44d11ce2ebd38470cc333"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Выполнить следующие команды:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a32806e974c27192bc649d4a87f1013d"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">(parted) mklabel gpt
</span></span><span class="line"><span class="cl">(parted) mkpart primary 0% 100%
</span></span><span class="line"><span class="cl">(parted) quit</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a32806e974c27192bc649d4a87f1013d"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Создать файловую систему:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-789462cbcb11469acf5e5b5fe4bc2454"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mkfs.xfs /dev/sdb1</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-789462cbcb11469acf5e5b5fe4bc2454"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Настроить автоматическое монтирование раздела в <code>/etc/fstab</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-bb0243c286d8f3eaa328ec422290bf01"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">/dev/sdb1 /home/storage xfs defaults 0 0</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-bb0243c286d8f3eaa328ec422290bf01"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>Первичная настройка UAIK</turbo:topic><turbo:content><![CDATA[<p>После автоматической установки (Kickstart) при помощи <a title="" href="https://uaik.github.io/" target="_blank" rel="noopener noreferrer nofollow">UAIK</a> , Fedora запустится в текстовом режиме. На этом этапе необходимо произвести первичную настройку операционной системы.</p>
<h2 id="включение-графического-режима">
  <a class="link-body-emphasis" href="#%d0%b2%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%b3%d1%80%d0%b0%d1%84%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%be%d0%b3%d0%be-%d1%80%d0%b5%d0%b6%d0%b8%d0%bc%d0%b0">Включение графического режима</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-0b14c447bdd626d4d70ad879b99a631e"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">systemctl set-default graphical.target</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-0b14c447bdd626d4d70ad879b99a631e"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="создание-пользователя">
  <a class="link-body-emphasis" href="#%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f">Создание пользователя</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-3348bc221ab09920525dba7e491f6348"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Добавить пользователя.</span>
</span></span><span class="line"><span class="cl">useradd -mc <span class="s2">&#34;User 0001&#34;</span> user-0001
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Установить пароль для пользователя.</span>
</span></span><span class="line"><span class="cl">passwd user-0001</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-3348bc221ab09920525dba7e491f6348"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="отключение-пользователя">
  <a class="link-body-emphasis" href="#%d0%be%d1%82%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f">Отключение пользователя</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-046dc4bc5b617c5e565fb9ae963968d5"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Отключить пользователя.</span>
</span></span><span class="line"><span class="cl">usermod -L user-0000</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-046dc4bc5b617c5e565fb9ae963968d5"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="перемещение-пользователя">
  <a class="link-body-emphasis" href="#%d0%bf%d0%b5%d1%80%d0%b5%d0%bc%d0%b5%d1%89%d0%b5%d0%bd%d0%b8%d0%b5-%d0%bf%d0%be%d0%bb%d1%8c%d0%b7%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8f">Перемещение пользователя</a>
</h2>







  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-49252a1ec8eb7490d18c498ec7b1166f"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">usermod -md /new_home/user-0001 user-0001</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-49252a1ec8eb7490d18c498ec7b1166f"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<h2 id="работа-с-диском">
  <a class="link-body-emphasis" href="#%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-%d1%81-%d0%b4%d0%b8%d1%81%d0%ba%d0%be%d0%bc">Работа с диском</a>
</h2><p>Чтобы создать на новом диске раздел, необходимо войти в программу <code>parted</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-c8caeebf47c44d11ce2ebd38470cc333"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">parted -a optimal /dev/sdb</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-c8caeebf47c44d11ce2ebd38470cc333"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Выполнить следующие команды:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-a32806e974c27192bc649d4a87f1013d"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">(parted) mklabel gpt
</span></span><span class="line"><span class="cl">(parted) mkpart primary 0% 100%
</span></span><span class="line"><span class="cl">(parted) quit</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-a32806e974c27192bc649d4a87f1013d"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Создать файловую систему:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-789462cbcb11469acf5e5b5fe4bc2454"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">mkfs.xfs /dev/sdb1</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-789462cbcb11469acf5e5b5fe4bc2454"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>


<p>Настроить автоматическое монтирование раздела в <code>/etc/fstab</code>:</p>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-text">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-bb0243c286d8f3eaa328ec422290bf01"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">/dev/sdb1 /home/storage xfs defaults 0 0</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-bb0243c286d8f3eaa328ec422290bf01"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Tue, 02 Jun 2020 06:20:27 +0000</pubDate><category>Linux</category></item><item turbo="true"><turbo:extendedHtml>true</turbo:extendedHtml><title>Запись ISO на USB Flash Drive</title><link>https://lib.onl/ru/posts/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/</link><dc:creator>Kitsune Solar</dc:creator><guid isPermaLink="true">https://lib.onl/ru/posts/2020/06/5d90ef6f-f05f-5462-b8a2-28dac0bb2f48/</guid><description>Команды для &amp;ldquo;правильной&amp;rdquo; записи ISO на USB Flash Drive.</description><media:content medium="image" url="https://images.unsplash.com/photo-1587145820098-23e484e69816" width="1600" height="900"/><content:encoded><![CDATA[<p>Команды для &ldquo;правильной&rdquo; записи ISO на USB Flash Drive.</p>
<ol>
<li>Определить USB-накопитель при помощи команды <code>fdisk -l</code>.</li>
<li>Отмонтировать ВСЕ разделы с USB-накопителя командой <code>umount /dev/sdX*</code>, где <code>X</code> - буква накопителя (например, <code>umount /dev/sdc*</code>).</li>
<li>Загрузить ISO на USB-накопитель:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-19b56c6fd6118b664197cddd582f5827"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Отмонтировать и очистить USB-накопитель.</span>
</span></span><span class="line"><span class="cl">umount /dev/sdX* <span class="o">&amp;&amp;</span> sgdisk -Z /dev/sdX
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Записать образ на USB-накопитель.</span>
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>image.iso <span class="nv">of</span><span class="o">=</span>/dev/sdX <span class="nv">bs</span><span class="o">=</span>4M <span class="nv">oflag</span><span class="o">=</span>direct <span class="nv">status</span><span class="o">=</span>progress<span class="p">;</span> sync
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Извлечь USB-накопитель.</span>
</span></span><span class="line"><span class="cl">eject /dev/sdX</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-19b56c6fd6118b664197cddd582f5827"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></content:encoded><turbo:source/><turbo:topic>Запись ISO на USB Flash Drive</turbo:topic><turbo:content><![CDATA[<p>Команды для &ldquo;правильной&rdquo; записи ISO на USB Flash Drive.</p>
<ol>
<li>Определить USB-накопитель при помощи команды <code>fdisk -l</code>.</li>
<li>Отмонтировать ВСЕ разделы с USB-накопителя командой <code>umount /dev/sdX*</code>, где <code>X</code> - буква накопителя (например, <code>umount /dev/sdc*</code>).</li>
<li>Загрузить ISO на USB-накопитель:</li>
</ol>








  <div class="shortcode shortcode-codeblock shortcode-codeblock-sh">
    <div class="d-flex mb-3 overflow-hidden">
      <div class="flex-grow-1 rounded overflow-hidden" id="clipboard-19b56c6fd6118b664197cddd582f5827"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Отмонтировать и очистить USB-накопитель.</span>
</span></span><span class="line"><span class="cl">umount /dev/sdX* <span class="o">&amp;&amp;</span> sgdisk -Z /dev/sdX
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Записать образ на USB-накопитель.</span>
</span></span><span class="line"><span class="cl">dd <span class="k">if</span><span class="o">=</span>image.iso <span class="nv">of</span><span class="o">=</span>/dev/sdX <span class="nv">bs</span><span class="o">=</span>4M <span class="nv">oflag</span><span class="o">=</span>direct <span class="nv">status</span><span class="o">=</span>progress<span class="p">;</span> sync
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Извлечь USB-накопитель.</span>
</span></span><span class="line"><span class="cl">eject /dev/sdX</span></span></code></pre></div></div>
      <div class="flex-shrink-0">
        <ul class="list-inline mb-0">
          <li class="list-inline-item" data-bs-tooltip data-bs-title='Копировать'>
            <a class="text-body" href="#"
               data-fn="clipboard preventDefault" data-clipboard-target="#clipboard-19b56c6fd6118b664197cddd582f5827"
               role="button" aria-label='Копировать'>
              <i class="fas fa-copy fa-fw"></i>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>]]></turbo:content><pubDate>Tue, 02 Jun 2020 06:20:24 +0000</pubDate><category>Linux</category></item></channel></rss>